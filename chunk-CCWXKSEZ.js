import{A as Ie,B as mu,C as rr,D as Et,G as zh,I as Ut,L as Me,M as bn,O as Fo,R as Xs,S as jh,a as je,b as Or,c as lt,d as Be,e as $e,g as Lr,i as Ys,j as _n,k as yr,l as We,m as nn,n as O,o as vt,p as at,q as Dr,r as ut,s as I,t as ft,w as qh,x as G,y as dt,z as Se}from"./chunk-BYZEYO7O.js";import{d as Z}from"./chunk-MOFZY53X.js";import{M as hu,d as Uh,e as gr,z as Je}from"./chunk-2FSENJOC.js";import{a as me,b as tr,c as iv,d as Y,e as rn,f as ae,g as du,h as pu}from"./chunk-F2BXWNMC.js";var sl={};rn(sl,{AnnotatedTextEdit:()=>Jr,ChangeAnnotation:()=>ii,ChangeAnnotationIdentifier:()=>ot,CodeAction:()=>cd,CodeActionContext:()=>od,CodeActionKind:()=>qg,CodeActionTriggerKind:()=>rl,CodeDescription:()=>Wf,CodeLens:()=>ld,Color:()=>Jc,ColorInformation:()=>zf,ColorPresentation:()=>jf,Command:()=>si,CompletionItem:()=>Qf,CompletionItemKind:()=>Og,CompletionItemLabelDetails:()=>Jf,CompletionItemTag:()=>Dg,CompletionList:()=>Zf,CreateFile:()=>ss,DeleteFile:()=>os,Diagnostic:()=>Ga,DiagnosticRelatedInformation:()=>Qc,DiagnosticSeverity:()=>bg,DiagnosticTag:()=>Pg,DocumentHighlight:()=>nd,DocumentHighlightKind:()=>Fg,DocumentLink:()=>fd,DocumentSymbol:()=>ad,DocumentUri:()=>Gf,EOL:()=>_A,FoldingRange:()=>Bf,FoldingRangeKind:()=>_g,FormattingOptions:()=>ud,Hover:()=>ed,InlayHint:()=>Td,InlayHintKind:()=>nl,InlayHintLabelPart:()=>il,InlineCompletionContext:()=>Ad,InlineCompletionItem:()=>xd,InlineCompletionList:()=>vd,InlineCompletionTriggerKind:()=>Bg,InlineValueContext:()=>yd,InlineValueEvaluatableExpression:()=>gd,InlineValueText:()=>hd,InlineValueVariableLookup:()=>md,InsertReplaceEdit:()=>Xf,InsertTextFormat:()=>Lg,InsertTextMode:()=>Mg,Location:()=>Fa,LocationLink:()=>qf,MarkedString:()=>za,MarkupContent:()=>cs,MarkupKind:()=>tl,OptionalVersionedTextDocumentIdentifier:()=>qa,ParameterInformation:()=>td,Position:()=>ce,Range:()=>ie,RenameFile:()=>as,SelectedCompletionInfo:()=>Ed,SelectionRange:()=>dd,SemanticTokenModifiers:()=>jg,SemanticTokenTypes:()=>zg,SemanticTokens:()=>pd,SignatureInformation:()=>rd,StringValue:()=>Rd,SymbolInformation:()=>id,SymbolKind:()=>Gg,SymbolTag:()=>Ug,TextDocument:()=>Sd,TextDocumentEdit:()=>Ua,TextDocumentIdentifier:()=>Kf,TextDocumentItem:()=>Yf,TextEdit:()=>Ar,URI:()=>Xc,VersionedTextDocumentIdentifier:()=>Hf,WorkspaceChange:()=>Vf,WorkspaceEdit:()=>Zc,WorkspaceFolder:()=>$d,WorkspaceSymbol:()=>sd,integer:()=>Uf,uinteger:()=>Ma});var Gf,Xc,Uf,Ma,ce,ie,Fa,qf,Jc,zf,jf,_g,Bf,Qc,bg,Pg,Wf,Ga,si,Ar,ii,ot,Jr,Ua,ss,as,os,Zc,is,el,Vf,Kf,Hf,qa,Yf,tl,cs,Og,Lg,Dg,Xf,Mg,Jf,Qf,Zf,za,ed,td,rd,Fg,nd,Gg,Ug,id,sd,ad,qg,rl,od,cd,ld,ud,fd,dd,zg,jg,pd,hd,md,gd,yd,nl,il,Td,Rd,xd,vd,Bg,Ed,Ad,$d,_A,Sd,kd,m,ls=iv(()=>{"use strict";(function(t){function e(r){return typeof r=="string"}t.is=e})(Gf||(Gf={}));(function(t){function e(r){return typeof r=="string"}t.is=e})(Xc||(Xc={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(Uf||(Uf={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(Ma||(Ma={}));(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=Ma.MAX_VALUE),i===Number.MAX_VALUE&&(i=Ma.MAX_VALUE),{line:n,character:i}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&m.uinteger(i.line)&&m.uinteger(i.character)}t.is=r})(ce||(ce={}));(function(t){function e(n,i,s,a){if(m.uinteger(n)&&m.uinteger(i)&&m.uinteger(s)&&m.uinteger(a))return{start:ce.create(n,i),end:ce.create(s,a)};if(ce.is(n)&&ce.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${s}, ${a}]`)}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ce.is(i.start)&&ce.is(i.end)}t.is=r})(ie||(ie={}));(function(t){function e(n,i){return{uri:n,range:i}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ie.is(i.range)&&(m.string(i.uri)||m.undefined(i.uri))}t.is=r})(Fa||(Fa={}));(function(t){function e(n,i,s,a){return{targetUri:n,targetRange:i,targetSelectionRange:s,originSelectionRange:a}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ie.is(i.targetRange)&&m.string(i.targetUri)&&ie.is(i.targetSelectionRange)&&(ie.is(i.originSelectionRange)||m.undefined(i.originSelectionRange))}t.is=r})(qf||(qf={}));(function(t){function e(n,i,s,a){return{red:n,green:i,blue:s,alpha:a}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&m.numberRange(i.red,0,1)&&m.numberRange(i.green,0,1)&&m.numberRange(i.blue,0,1)&&m.numberRange(i.alpha,0,1)}t.is=r})(Jc||(Jc={}));(function(t){function e(n,i){return{range:n,color:i}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ie.is(i.range)&&Jc.is(i.color)}t.is=r})(zf||(zf={}));(function(t){function e(n,i,s){return{label:n,textEdit:i,additionalTextEdits:s}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&m.string(i.label)&&(m.undefined(i.textEdit)||Ar.is(i))&&(m.undefined(i.additionalTextEdits)||m.typedArray(i.additionalTextEdits,Ar.is))}t.is=r})(jf||(jf={}));_g=(function(t){return t.Comment="comment",t.Imports="imports",t.Region="region",t})(_g||{});(function(t){function e(n,i,s,a,o,c){let l={startLine:n,endLine:i};return m.defined(s)&&(l.startCharacter=s),m.defined(a)&&(l.endCharacter=a),m.defined(o)&&(l.kind=o),m.defined(c)&&(l.collapsedText=c),l}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&m.uinteger(i.startLine)&&m.uinteger(i.startLine)&&(m.undefined(i.startCharacter)||m.uinteger(i.startCharacter))&&(m.undefined(i.endCharacter)||m.uinteger(i.endCharacter))&&(m.undefined(i.kind)||m.string(i.kind))}t.is=r})(Bf||(Bf={}));(function(t){function e(n,i){return{location:n,message:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&Fa.is(i.location)&&m.string(i.message)}t.is=r})(Qc||(Qc={}));bg=(function(t){return t.Error=1,t.Warning=2,t.Information=3,t.Hint=4,t})(bg||{}),Pg=(function(t){return t.Unnecessary=1,t.Deprecated=2,t})(Pg||{});(function(t){function e(r){let n=r;return m.objectLiteral(n)&&m.string(n.href)}t.is=e})(Wf||(Wf={}));(function(t){function e(n,i,s,a,o,c){let l={range:n,message:i};return m.defined(s)&&(l.severity=s),m.defined(a)&&(l.code=a),m.defined(o)&&(l.source=o),m.defined(c)&&(l.relatedInformation=c),l}t.create=e;function r(n){var i;let s=n;return m.defined(s)&&ie.is(s.range)&&m.string(s.message)&&(m.number(s.severity)||m.undefined(s.severity))&&(m.integer(s.code)||m.string(s.code)||m.undefined(s.code))&&(m.undefined(s.codeDescription)||m.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(m.string(s.source)||m.undefined(s.source))&&(m.undefined(s.relatedInformation)||m.typedArray(s.relatedInformation,Qc.is))}t.is=r})(Ga||(Ga={}));(function(t){function e(n,i,...s){let a={title:n,command:i};return m.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function r(n){let i=n;return m.defined(i)&&m.string(i.title)&&m.string(i.command)}t.is=r})(si||(si={}));(function(t){function e(s,a){return{range:s,newText:a}}t.replace=e;function r(s,a){return{range:{start:s,end:s},newText:a}}t.insert=r;function n(s){return{range:s,newText:""}}t.del=n;function i(s){let a=s;return m.objectLiteral(a)&&m.string(a.newText)&&ie.is(a.range)}t.is=i})(Ar||(Ar={}));(function(t){function e(n,i,s){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),s!==void 0&&(a.description=s),a}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&m.string(i.label)&&(m.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(m.string(i.description)||i.description===void 0)}t.is=r})(ii||(ii={}));(function(t){function e(r){let n=r;return m.string(n)}t.is=e})(ot||(ot={}));(function(t){function e(s,a,o){return{range:s,newText:a,annotationId:o}}t.replace=e;function r(s,a,o){return{range:{start:s,end:s},newText:a,annotationId:o}}t.insert=r;function n(s,a){return{range:s,newText:"",annotationId:a}}t.del=n;function i(s){let a=s;return Ar.is(a)&&(ii.is(a.annotationId)||ot.is(a.annotationId))}t.is=i})(Jr||(Jr={}));(function(t){function e(n,i){return{textDocument:n,edits:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&qa.is(i.textDocument)&&Array.isArray(i.edits)}t.is=r})(Ua||(Ua={}));(function(t){function e(n,i,s){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&m.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ot.is(i.annotationId))}t.is=r})(ss||(ss={}));(function(t){function e(n,i,s,a){let o={kind:"rename",oldUri:n,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(o.options=s),a!==void 0&&(o.annotationId=a),o}t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&m.string(i.oldUri)&&m.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ot.is(i.annotationId))}t.is=r})(as||(as={}));(function(t){function e(n,i,s){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&m.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||m.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||m.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ot.is(i.annotationId))}t.is=r})(os||(os={}));(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>m.string(i.kind)?ss.is(i)||as.is(i)||os.is(i):Ua.is(i)))}t.is=e})(Zc||(Zc={}));is=class{constructor(e,r){this.edits=e,this.changeAnnotations=r}insert(e,r,n){let i,s;if(n===void 0?i=Ar.insert(e,r):ot.is(n)?(s=n,i=Jr.insert(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Jr.insert(e,r,s)),this.edits.push(i),s!==void 0)return s}replace(e,r,n){let i,s;if(n===void 0?i=Ar.replace(e,r):ot.is(n)?(s=n,i=Jr.replace(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Jr.replace(e,r,s)),this.edits.push(i),s!==void 0)return s}delete(e,r){let n,i;if(r===void 0?n=Ar.del(e):ot.is(r)?(i=r,n=Jr.del(e,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Jr.del(e,i)),this.edits.push(n),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}},el=class{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,r){let n;if(ot.is(e)?n=e:(n=this.nextId(),r=e),this._annotations[n]!==void 0)throw new Error(`Id ${n} is already in use.`);if(r===void 0)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=r,this._size++,n}nextId(){return this._counter++,this._counter.toString()}},Vf=class{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new el(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(r=>{if(Ua.is(r)){let n=new is(r.edits,this._changeAnnotations);this._textEditChanges[r.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(r=>{let n=new is(e.changes[r]);this._textEditChanges[r]=n})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(qa.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let r={uri:e.uri,version:e.version},n=this._textEditChanges[r.uri];if(!n){let i=[],s={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(s),n=new is(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let r=this._textEditChanges[e];if(!r){let n=[];this._workspaceEdit.changes[e]=n,r=new is(n),this._textEditChanges[e]=r}return r}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new el,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;ii.is(r)||ot.is(r)?i=r:n=r;let s,a;if(i===void 0?s=ss.create(e,n):(a=ot.is(i)?i:this._changeAnnotations.manage(i),s=ss.create(e,n,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}renameFile(e,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let s;ii.is(n)||ot.is(n)?s=n:i=n;let a,o;if(s===void 0?a=as.create(e,r,i):(o=ot.is(s)?s:this._changeAnnotations.manage(s),a=as.create(e,r,i,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o}deleteFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;ii.is(r)||ot.is(r)?i=r:n=r;let s,a;if(i===void 0?s=os.create(e,n):(a=ot.is(i)?i:this._changeAnnotations.manage(i),s=os.create(e,n,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}};(function(t){function e(n){return{uri:n}}t.create=e;function r(n){let i=n;return m.defined(i)&&m.string(i.uri)}t.is=r})(Kf||(Kf={}));(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&m.string(i.uri)&&m.integer(i.version)}t.is=r})(Hf||(Hf={}));(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&m.string(i.uri)&&(i.version===null||m.integer(i.version))}t.is=r})(qa||(qa={}));(function(t){function e(n,i,s,a){return{uri:n,languageId:i,version:s,text:a}}t.create=e;function r(n){let i=n;return m.defined(i)&&m.string(i.uri)&&m.string(i.languageId)&&m.integer(i.version)&&m.string(i.text)}t.is=r})(Yf||(Yf={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}t.is=e})(tl||(tl={}));(function(t){function e(r){let n=r;return m.objectLiteral(r)&&tl.is(n.kind)&&m.string(n.value)}t.is=e})(cs||(cs={}));Og=(function(t){return t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25,t})(Og||{}),Lg=(function(t){return t.PlainText=1,t.Snippet=2,t})(Lg||{}),Dg=(function(t){return t.Deprecated=1,t})(Dg||{});(function(t){function e(n,i,s){return{newText:n,insert:i,replace:s}}t.create=e;function r(n){let i=n;return i&&m.string(i.newText)&&ie.is(i.insert)&&ie.is(i.replace)}t.is=r})(Xf||(Xf={}));Mg=(function(t){return t.asIs=1,t.adjustIndentation=2,t})(Mg||{});(function(t){function e(r){let n=r;return n&&(m.string(n.detail)||n.detail===void 0)&&(m.string(n.description)||n.description===void 0)}t.is=e})(Jf||(Jf={}));(function(t){function e(r){return{label:r}}t.create=e})(Qf||(Qf={}));(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}t.create=e})(Zf||(Zf={}));(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function r(n){let i=n;return m.string(i)||m.objectLiteral(i)&&m.string(i.language)&&m.string(i.value)}t.is=r})(za||(za={}));(function(t){function e(r){let n=r;return!!n&&m.objectLiteral(n)&&(cs.is(n.contents)||za.is(n.contents)||m.typedArray(n.contents,za.is))&&(r.range===void 0||ie.is(r.range))}t.is=e})(ed||(ed={}));(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}t.create=e})(td||(td={}));(function(t){function e(r,n,...i){let s={label:r};return m.defined(n)&&(s.documentation=n),m.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(rd||(rd={}));Fg=(function(t){return t.Text=1,t.Read=2,t.Write=3,t})(Fg||{});(function(t){function e(r,n){let i={range:r};return m.number(n)&&(i.kind=n),i}t.create=e})(nd||(nd={}));Gg=(function(t){return t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26,t})(Gg||{}),Ug=(function(t){return t.Deprecated=1,t})(Ug||{});(function(t){function e(r,n,i,s,a){let o={name:r,kind:n,location:{uri:s,range:i}};return a&&(o.containerName=a),o}t.create=e})(id||(id={}));(function(t){function e(r,n,i,s){return s!==void 0?{name:r,kind:n,location:{uri:i,range:s}}:{name:r,kind:n,location:{uri:i}}}t.create=e})(sd||(sd={}));(function(t){function e(n,i,s,a,o,c){let l={name:n,detail:i,kind:s,range:a,selectionRange:o};return c!==void 0&&(l.children=c),l}t.create=e;function r(n){let i=n;return i&&m.string(i.name)&&m.number(i.kind)&&ie.is(i.range)&&ie.is(i.selectionRange)&&(i.detail===void 0||m.string(i.detail))&&(i.deprecated===void 0||m.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=r})(ad||(ad={}));qg=(function(t){return t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll",t})(qg||{}),rl=(function(t){return t.Invoked=1,t.Automatic=2,t})(rl||{});(function(t){function e(n,i,s){let a={diagnostics:n};return i!=null&&(a.only=i),s!=null&&(a.triggerKind=s),a}t.create=e;function r(n){let i=n;return m.defined(i)&&m.typedArray(i.diagnostics,Ga.is)&&(i.only===void 0||m.typedArray(i.only,m.string))&&(i.triggerKind===void 0||i.triggerKind===rl.Invoked||i.triggerKind===rl.Automatic)}t.is=r})(od||(od={}));(function(t){function e(n,i,s){let a={title:n},o=!0;return typeof i=="string"?(o=!1,a.kind=i):si.is(i)?a.command=i:a.edit=i,o&&s!==void 0&&(a.kind=s),a}t.create=e;function r(n){let i=n;return i&&m.string(i.title)&&(i.diagnostics===void 0||m.typedArray(i.diagnostics,Ga.is))&&(i.kind===void 0||m.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||si.is(i.command))&&(i.isPreferred===void 0||m.boolean(i.isPreferred))&&(i.edit===void 0||Zc.is(i.edit))}t.is=r})(cd||(cd={}));(function(t){function e(n,i){let s={range:n};return m.defined(i)&&(s.data=i),s}t.create=e;function r(n){let i=n;return m.defined(i)&&ie.is(i.range)&&(m.undefined(i.command)||si.is(i.command))}t.is=r})(ld||(ld={}));(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&m.uinteger(i.tabSize)&&m.boolean(i.insertSpaces)}t.is=r})(ud||(ud={}));(function(t){function e(n,i,s){return{range:n,target:i,data:s}}t.create=e;function r(n){let i=n;return m.defined(i)&&ie.is(i.range)&&(m.undefined(i.target)||m.string(i.target))}t.is=r})(fd||(fd={}));(function(t){function e(n,i){return{range:n,parent:i}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ie.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=r})(dd||(dd={}));zg=(function(t){return t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator",t})(zg||{}),jg=(function(t){return t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary",t})(jg||{});(function(t){function e(r){let n=r;return m.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(pd||(pd={}));(function(t){function e(n,i){return{range:n,text:i}}t.create=e;function r(n){let i=n;return i!=null&&ie.is(i.range)&&m.string(i.text)}t.is=r})(hd||(hd={}));(function(t){function e(n,i,s){return{range:n,variableName:i,caseSensitiveLookup:s}}t.create=e;function r(n){let i=n;return i!=null&&ie.is(i.range)&&m.boolean(i.caseSensitiveLookup)&&(m.string(i.variableName)||i.variableName===void 0)}t.is=r})(md||(md={}));(function(t){function e(n,i){return{range:n,expression:i}}t.create=e;function r(n){let i=n;return i!=null&&ie.is(i.range)&&(m.string(i.expression)||i.expression===void 0)}t.is=r})(gd||(gd={}));(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}t.create=e;function r(n){let i=n;return m.defined(i)&&ie.is(n.stoppedLocation)}t.is=r})(yd||(yd={}));(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}t.is=e})(nl||(nl={}));(function(t){function e(n){return{value:n}}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&(i.tooltip===void 0||m.string(i.tooltip)||cs.is(i.tooltip))&&(i.location===void 0||Fa.is(i.location))&&(i.command===void 0||si.is(i.command))}t.is=r})(il||(il={}));(function(t){function e(n,i,s){let a={position:n,label:i};return s!==void 0&&(a.kind=s),a}t.create=e;function r(n){let i=n;return m.objectLiteral(i)&&ce.is(i.position)&&(m.string(i.label)||m.typedArray(i.label,il.is))&&(i.kind===void 0||nl.is(i.kind))&&i.textEdits===void 0||m.typedArray(i.textEdits,Ar.is)&&(i.tooltip===void 0||m.string(i.tooltip)||cs.is(i.tooltip))&&(i.paddingLeft===void 0||m.boolean(i.paddingLeft))&&(i.paddingRight===void 0||m.boolean(i.paddingRight))}t.is=r})(Td||(Td={}));(function(t){function e(r){return{kind:"snippet",value:r}}t.createSnippet=e})(Rd||(Rd={}));(function(t){function e(r,n,i,s){return{insertText:r,filterText:n,range:i,command:s}}t.create=e})(xd||(xd={}));(function(t){function e(r){return{items:r}}t.create=e})(vd||(vd={}));Bg=(function(t){return t.Invoked=0,t.Automatic=1,t})(Bg||{});(function(t){function e(r,n){return{range:r,text:n}}t.create=e})(Ed||(Ed={}));(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}t.create=e})(Ad||(Ad={}));(function(t){function e(r){let n=r;return m.objectLiteral(n)&&Xc.is(n.uri)&&m.string(n.name)}t.is=e})($d||($d={}));_A=[`
`,`\r
`,"\r"];(function(t){function e(s,a,o,c){return new kd(s,a,o,c)}t.create=e;function r(s){let a=s;return!!(m.defined(a)&&m.string(a.uri)&&(m.undefined(a.languageId)||m.string(a.languageId))&&m.uinteger(a.lineCount)&&m.func(a.getText)&&m.func(a.positionAt)&&m.func(a.offsetAt))}t.is=r;function n(s,a){let o=s.getText(),c=i(a,(u,p)=>{let h=u.range.start.line-p.range.start.line;return h===0?u.range.start.character-p.range.start.character:h}),l=o.length;for(let u=c.length-1;u>=0;u--){let p=c[u],h=s.offsetAt(p.range.start),g=s.offsetAt(p.range.end);if(g<=l)o=o.substring(0,h)+p.newText+o.substring(g,o.length);else throw new Error("Overlapping edit");l=h}return o}t.applyEdits=n;function i(s,a){if(s.length<=1)return s;let o=s.length/2|0,c=s.slice(0,o),l=s.slice(o);i(c,a),i(l,a);let u=0,p=0,h=0;for(;u<c.length&&p<l.length;)a(c[u],l[p])<=0?s[h++]=c[u++]:s[h++]=l[p++];for(;u<c.length;)s[h++]=c[u++];for(;p<l.length;)s[h++]=l[p++];return s}})(Sd||(Sd={}));kd=class{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let s=r.charAt(i);n=s==="\r"||s===`
`,s==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return ce.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let s=n-1;return ce.create(s,e-r[s])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}};(function(t){let e=Object.prototype.toString;function r(g){return typeof g<"u"}t.defined=r;function n(g){return typeof g>"u"}t.undefined=n;function i(g){return g===!0||g===!1}t.boolean=i;function s(g){return e.call(g)==="[object String]"}t.string=s;function a(g){return e.call(g)==="[object Number]"}t.number=a;function o(g,N,k){return e.call(g)==="[object Number]"&&N<=g&&g<=k}t.numberRange=o;function c(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}t.integer=c;function l(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}t.uinteger=l;function u(g){return e.call(g)==="[object Function]"}t.func=u;function p(g){return g!==null&&typeof g=="object"}t.objectLiteral=p;function h(g,N){return Array.isArray(g)&&g.every(N)}t.typedArray=h})(m||(m={}))});var vn=Y(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});var Od;function Ld(){if(Od===void 0)throw new Error("No runtime abstraction layer installed");return Od}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Od=r}t.install=e})(Ld||(Ld={}));Dd.default=Ld});var ds=Y(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.stringArray=mt.array=mt.func=mt.error=mt.number=mt.string=mt.boolean=void 0;function jA(t){return t===!0||t===!1}mt.boolean=jA;function Xg(t){return typeof t=="string"||t instanceof String}mt.string=Xg;function BA(t){return typeof t=="number"||t instanceof Number}mt.number=BA;function WA(t){return t instanceof Error}mt.error=WA;function VA(t){return typeof t=="function"}mt.func=VA;function Jg(t){return Array.isArray(t)}mt.array=Jg;function KA(t){return Jg(t)&&t.every(e=>Xg(e))}mt.stringArray=KA});var ui=Y(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.Emitter=ps.Event=void 0;var HA=vn(),Qg;(function(t){let e={dispose(){}};t.None=function(){return e}})(Qg||(ps.Event=Qg={}));var Md=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{r.push(n[s].apply(i[s],e))}catch(o){(0,HA.default)().console.error(o)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ul=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Md),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ps.Emitter=ul;ul._noop=function(){}});var Ya=Y(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.CancellationTokenSource=hs.CancellationToken=void 0;var YA=vn(),XA=ds(),Fd=ui(),fl;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Fd.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Fd.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||XA.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(fl||(hs.CancellationToken=fl={}));var JA=Object.freeze(function(t,e){let r=(0,YA.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),dl=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?JA:(this._emitter||(this._emitter=new Fd.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Gd=class{get token(){return this._token||(this._token=new dl),this._token}cancel(){this._token?this._token.cancel():this._token=fl.Cancelled}dispose(){this._token?this._token instanceof dl&&this._token.dispose():this._token=fl.None}};hs.CancellationTokenSource=Gd});var hp=Y(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.Message=q.NotificationType9=q.NotificationType8=q.NotificationType7=q.NotificationType6=q.NotificationType5=q.NotificationType4=q.NotificationType3=q.NotificationType2=q.NotificationType1=q.NotificationType0=q.NotificationType=q.RequestType9=q.RequestType8=q.RequestType7=q.RequestType6=q.RequestType5=q.RequestType4=q.RequestType3=q.RequestType2=q.RequestType1=q.RequestType=q.RequestType0=q.AbstractMessageSignature=q.ParameterStructures=q.ResponseError=q.ErrorCodes=void 0;var mi=ds(),Bd=(function(t){return t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3,t})(Bd||(q.ErrorCodes=Bd={})),Wd=class t extends Error{constructor(e,r,n){super(r),this.code=mi.number(e)?e:Bd.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};q.ResponseError=Wd;var Dt=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};q.ParameterStructures=Dt;Dt.auto=new Dt("auto");Dt.byPosition=new Dt("byPosition");Dt.byName=new Dt("byName");var Ne=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Dt.auto}};q.AbstractMessageSignature=Ne;var Vd=class extends Ne{constructor(e){super(e,0)}};q.RequestType0=Vd;var Kd=class extends Ne{constructor(e,r=Dt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};q.RequestType=Kd;var Hd=class extends Ne{constructor(e,r=Dt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};q.RequestType1=Hd;var Yd=class extends Ne{constructor(e){super(e,2)}};q.RequestType2=Yd;var Xd=class extends Ne{constructor(e){super(e,3)}};q.RequestType3=Xd;var Jd=class extends Ne{constructor(e){super(e,4)}};q.RequestType4=Jd;var Qd=class extends Ne{constructor(e){super(e,5)}};q.RequestType5=Qd;var Zd=class extends Ne{constructor(e){super(e,6)}};q.RequestType6=Zd;var ep=class extends Ne{constructor(e){super(e,7)}};q.RequestType7=ep;var tp=class extends Ne{constructor(e){super(e,8)}};q.RequestType8=tp;var rp=class extends Ne{constructor(e){super(e,9)}};q.RequestType9=rp;var np=class extends Ne{constructor(e,r=Dt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};q.NotificationType=np;var ip=class extends Ne{constructor(e){super(e,0)}};q.NotificationType0=ip;var sp=class extends Ne{constructor(e,r=Dt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};q.NotificationType1=sp;var ap=class extends Ne{constructor(e){super(e,2)}};q.NotificationType2=ap;var op=class extends Ne{constructor(e){super(e,3)}};q.NotificationType3=op;var cp=class extends Ne{constructor(e){super(e,4)}};q.NotificationType4=cp;var lp=class extends Ne{constructor(e){super(e,5)}};q.NotificationType5=lp;var up=class extends Ne{constructor(e){super(e,6)}};q.NotificationType6=up;var fp=class extends Ne{constructor(e){super(e,7)}};q.NotificationType7=fp;var dp=class extends Ne{constructor(e){super(e,8)}};q.NotificationType8=dp;var pp=class extends Ne{constructor(e){super(e,9)}};q.NotificationType9=pp;var uy;(function(t){function e(i){let s=i;return s&&mi.string(s.method)&&(mi.string(s.id)||mi.number(s.id))}t.isRequest=e;function r(i){let s=i;return s&&mi.string(s.method)&&i.id===void 0}t.isNotification=r;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(mi.string(s.id)||mi.number(s.id)||s.id===null)}t.isResponse=n})(uy||(q.Message=uy={}))});var gp=Y(En=>{"use strict";var fy;Object.defineProperty(En,"__esModule",{value:!0});En.LRUCache=En.LinkedMap=En.Touch=void 0;var yt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(yt||(En.Touch=yt={}));var Rl=class{constructor(){this[fy]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=yt.None){let n=this._map.get(e);if(n)return r!==yt.None&&this.touch(n,r),n.value}set(e,r,n=yt.None){let i=this._map.get(e);if(i)i.value=r,n!==yt.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case yt.None:this.addItemLast(i);break;case yt.First:this.addItemFirst(i);break;case yt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}[(fy=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==yt.First&&r!==yt.Last)){if(r===yt.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===yt.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};En.LinkedMap=Rl;var mp=class extends Rl{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=yt.AsNew){return super.get(e,r)}peek(e){return super.get(e,yt.None)}set(e,r){return super.set(e,r,yt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};En.LRUCache=mp});var py=Y(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.Disposable=void 0;var dy;(function(t){function e(r){return{dispose:r}}t.create=e})(dy||(xl.Disposable=dy={}))});var hy=Y(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.SharedArrayReceiverStrategy=vs.SharedArraySenderStrategy=void 0;var e$=Ya(),vl=(function(t){return t.Continue=0,t.Cancelled=1,t})(vl||{}),yp=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=vl.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,vl.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};vs.SharedArraySenderStrategy=yp;var Tp=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===vl.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Rp=class{constructor(e){this.token=new Tp(e)}cancel(){}dispose(){}},xp=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new e$.CancellationTokenSource:new Rp(r)}};vs.SharedArrayReceiverStrategy=xp});var Ep=Y(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.Semaphore=void 0;var t$=vn(),vp=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t$.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};El.Semaphore=vp});var gy=Y(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.ReadableStreamMessageReader=An.AbstractMessageReader=An.MessageReader=void 0;var $p=vn(),Es=ds(),Ap=ui(),r$=Ep(),my;(function(t){function e(r){let n=r;return n&&Es.func(n.listen)&&Es.func(n.dispose)&&Es.func(n.onError)&&Es.func(n.onClose)&&Es.func(n.onPartialMessage)}t.is=e})(my||(An.MessageReader=my={}));var Al=class{constructor(){this.errorEmitter=new Ap.Emitter,this.closeEmitter=new Ap.Emitter,this.partialMessageEmitter=new Ap.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Es.string(e.message)?e.message:"unknown"}`)}};An.AbstractMessageReader=Al;var Sp;(function(t){function e(r){let n,i,s,a=new Map,o,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,a.set(s.name,s)),r.contentDecoders!==void 0)for(let l of r.contentDecoders)a.set(l.name,l);if(r.contentTypeDecoder!==void 0&&(o=r.contentTypeDecoder,c.set(o.name,o)),r.contentTypeDecoders!==void 0)for(let l of r.contentTypeDecoders)c.set(l.name,l)}return o===void 0&&(o=(0,$p.default)().applicationJson.decoder,c.set(o.name,o)),{charset:n,contentDecoder:s,contentDecoders:a,contentTypeDecoder:o,contentTypeDecoders:c}}t.fromOptions=e})(Sp||(Sp={}));var kp=class extends Al{constructor(e,r){super(),this.readable=e,this.options=Sp.fromOptions(r),this.buffer=(0,$p.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new r$.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,$p.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};An.ReadableStreamMessageReader=kp});var vy=Y($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.WriteableStreamMessageWriter=$n.AbstractMessageWriter=$n.MessageWriter=void 0;var yy=vn(),ho=ds(),n$=Ep(),Ty=ui(),i$="Content-Length: ",Ry=`\r
`,xy;(function(t){function e(r){let n=r;return n&&ho.func(n.dispose)&&ho.func(n.onClose)&&ho.func(n.onError)&&ho.func(n.write)}t.is=e})(xy||($n.MessageWriter=xy={}));var $l=class{constructor(){this.errorEmitter=new Ty.Emitter,this.closeEmitter=new Ty.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ho.string(e.message)?e.message:"unknown"}`)}};$n.AbstractMessageWriter=$l;var Np;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,yy.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,yy.default)().applicationJson.encoder}}t.fromOptions=e})(Np||(Np={}));var Cp=class extends $l{constructor(e,r){super(),this.writable=e,this.options=Np.fromOptions(r),this.errorCount=0,this.writeSemaphore=new n$.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(i$,n.byteLength.toString(),Ry),i.push(Ry),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};$n.WriteableStreamMessageWriter=Cp});var Ey=Y(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.AbstractMessageBuffer=void 0;var s$=13,a$=10,o$=`\r
`,wp=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case s$:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case a$:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}s+=l.byteLength,n++}if(r!==4)return;let a=this._read(s+i),o=new Map,c=this.toString(a,"ascii").split(o$);if(c.length<2)return o;for(let l=0;l<c.length-2;l++){let u=c[l],p=u.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let h=u.substr(0,p),g=u.substr(p+1).trim();o.set(e?h.toLowerCase():h,g)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};Sl.AbstractMessageBuffer=wp});var Ny=Y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createMessageConnection=X.ConnectionOptions=X.MessageStrategy=X.CancellationStrategy=X.CancellationSenderStrategy=X.CancellationReceiverStrategy=X.RequestCancellationReceiverStrategy=X.IdCancellationReceiverStrategy=X.ConnectionStrategy=X.ConnectionError=X.ConnectionErrors=X.LogTraceNotification=X.SetTraceNotification=X.TraceFormat=X.TraceValues=X.Trace=X.NullLogger=X.ProgressType=X.ProgressToken=void 0;var Ay=vn(),Le=ds(),V=hp(),$y=gp(),mo=ui(),Ip=Ya(),To;(function(t){t.type=new V.NotificationType("$/cancelRequest")})(To||(To={}));var _p;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}t.is=e})(_p||(X.ProgressToken=_p={}));var go;(function(t){t.type=new V.NotificationType("$/progress")})(go||(go={}));var bp=class{constructor(){}};X.ProgressType=bp;var Pp;(function(t){function e(r){return Le.func(r)}t.is=e})(Pp||(Pp={}));X.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ue=(function(t){return t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose",t})(ue||(X.Trace=ue={})),Sy=(function(t){return t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose",t})(Sy||(X.TraceValues=Sy={}));(function(t){function e(n){if(!Le.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(ue||(X.Trace=ue={}));var Vt=(function(t){return t.Text="text",t.JSON="json",t})(Vt||(X.TraceFormat=Vt={}));(function(t){function e(r){return Le.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Vt||(X.TraceFormat=Vt={}));var Op;(function(t){t.type=new V.NotificationType("$/setTrace")})(Op||(X.SetTraceNotification=Op={}));var kl;(function(t){t.type=new V.NotificationType("$/logTrace")})(kl||(X.LogTraceNotification=kl={}));var yo=(function(t){return t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening",t})(yo||(X.ConnectionErrors=yo={})),As=class t extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};X.ConnectionError=As;var Lp;(function(t){function e(r){let n=r;return n&&Le.func(n.cancelUndispatched)}t.is=e})(Lp||(X.ConnectionStrategy=Lp={}));var Nl;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Le.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Le.func(n.dispose))}t.is=e})(Nl||(X.IdCancellationReceiverStrategy=Nl={}));var Dp;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Le.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Le.func(n.dispose))}t.is=e})(Dp||(X.RequestCancellationReceiverStrategy=Dp={}));var Cl;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new Ip.CancellationTokenSource}});function e(r){return Nl.is(r)||Dp.is(r)}t.is=e})(Cl||(X.CancellationReceiverStrategy=Cl={}));var wl;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(To.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Le.func(n.sendCancellation)&&Le.func(n.cleanup)}t.is=e})(wl||(X.CancellationSenderStrategy=wl={}));var Il;(function(t){t.Message=Object.freeze({receiver:Cl.Message,sender:wl.Message});function e(r){let n=r;return n&&Cl.is(n.receiver)&&wl.is(n.sender)}t.is=e})(Il||(X.CancellationStrategy=Il={}));var _l;(function(t){function e(r){let n=r;return n&&Le.func(n.handleMessage)}t.is=e})(_l||(X.MessageStrategy=_l={}));var ky;(function(t){function e(r){let n=r;return n&&(Il.is(n.cancellationStrategy)||Lp.is(n.connectionStrategy)||_l.is(n.messageStrategy))}t.is=e})(ky||(X.ConnectionOptions=ky={}));var Nr=(function(t){return t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed",t})(Nr||{});function c$(t,e,r,n){let i=r!==void 0?r:X.NullLogger,s=0,a=0,o=0,c="2.0",l,u=new Map,p,h=new Map,g=new Map,N,k=new $y.LinkedMap,F=new Map,L=new Set,D=new Map,x=ue.Off,z=Vt.Text,H,J=Nr.New,Ht=new mo.Emitter,wt=new mo.Emitter,It=new mo.Emitter,pr=new mo.Emitter,S=new mo.Emitter,y=n&&n.cancellationStrategy?n.cancellationStrategy:Il.Message;function b(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function P(d){return d===null?"res-unknown-"+(++o).toString():"res-"+d.toString()}function T(){return"not-"+(++a).toString()}function E(d,v){V.Message.isRequest(v)?d.set(b(v.id),v):V.Message.isResponse(v)?d.set(P(v.id),v):d.set(T(),v)}function A(d){}function _(){return J===Nr.Listening}function M(){return J===Nr.Closed}function C(){return J===Nr.Disposed}function K(){(J===Nr.New||J===Nr.Listening)&&(J=Nr.Closed,wt.fire(void 0))}function Q(d){Ht.fire([d,void 0,void 0])}function Ue(d){Ht.fire(d)}t.onClose(K),t.onError(Q),e.onClose(K),e.onError(Ue);function fe(){N||k.size===0||(N=(0,Ay.default)().timer.setImmediate(()=>{N=void 0,Ye()}))}function _t(d){V.Message.isRequest(d)?et(d):V.Message.isNotification(d)?tn(d):V.Message.isResponse(d)?bt(d):Rt(d)}function Ye(){if(k.size===0)return;let d=k.shift();try{let v=n?.messageStrategy;_l.is(v)?v.handleMessage(d,_t):_t(d)}finally{fe()}}let Mo=d=>{try{if(V.Message.isNotification(d)&&d.method===To.type.method){let v=d.params.id,w=b(v),U=k.get(w);if(V.Message.isRequest(U)){let ge=n?.connectionStrategy,De=ge&&ge.cancelUndispatched?ge.cancelUndispatched(U,A):void 0;if(De&&(De.error!==void 0||De.result!==void 0)){k.delete(w),D.delete(v),De.id=U.id,Yt(De,d.method,Date.now()),e.write(De).catch(()=>i.error("Sending response for canceled message failed."));return}}let Ae=D.get(v);if(Ae!==void 0){Ae.cancel(),Ei(d);return}else L.add(v)}E(k,d)}finally{fe()}};function et(d){if(C())return;function v(oe,we,he){let Xe={jsonrpc:c,id:d.id};oe instanceof V.ResponseError?Xe.error=oe.toJson():Xe.result=oe===void 0?null:oe,Yt(Xe,we,he),e.write(Xe).catch(()=>i.error("Sending response failed."))}function w(oe,we,he){let Xe={jsonrpc:c,id:d.id,error:oe.toJson()};Yt(Xe,we,he),e.write(Xe).catch(()=>i.error("Sending response failed."))}function U(oe,we,he){oe===void 0&&(oe=null);let Xe={jsonrpc:c,id:d.id,result:oe};Yt(Xe,we,he),e.write(Xe).catch(()=>i.error("Sending response failed."))}Vs(d);let Ae=u.get(d.method),ge,De;Ae&&(ge=Ae.type,De=Ae.handler);let qe=Date.now();if(De||l){let oe=d.id??String(Date.now()),we=Nl.is(y.receiver)?y.receiver.createCancellationTokenSource(oe):y.receiver.createCancellationTokenSource(d);d.id!==null&&L.has(d.id)&&we.cancel(),d.id!==null&&D.set(oe,we);try{let he;if(De)if(d.params===void 0){if(ge!==void 0&&ge.numberOfParams!==0){w(new V.ResponseError(V.ErrorCodes.InvalidParams,`Request ${d.method} defines ${ge.numberOfParams} params but received none.`),d.method,qe);return}he=De(we.token)}else if(Array.isArray(d.params)){if(ge!==void 0&&ge.parameterStructures===V.ParameterStructures.byName){w(new V.ResponseError(V.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,qe);return}he=De(...d.params,we.token)}else{if(ge!==void 0&&ge.parameterStructures===V.ParameterStructures.byPosition){w(new V.ResponseError(V.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,qe);return}he=De(d.params,we.token)}else l&&(he=l(d.method,d.params,we.token));let Xe=he;he?Xe.then?Xe.then(xt=>{D.delete(oe),v(xt,d.method,qe)},xt=>{D.delete(oe),xt instanceof V.ResponseError?w(xt,d.method,qe):xt&&Le.string(xt.message)?w(new V.ResponseError(V.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${xt.message}`),d.method,qe):w(new V.ResponseError(V.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,qe)}):(D.delete(oe),v(he,d.method,qe)):(D.delete(oe),U(he,d.method,qe))}catch(he){D.delete(oe),he instanceof V.ResponseError?v(he,d.method,qe):he&&Le.string(he.message)?w(new V.ResponseError(V.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${he.message}`),d.method,qe):w(new V.ResponseError(V.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,qe)}}else w(new V.ResponseError(V.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,qe)}function bt(d){if(!C())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let v=d.id,w=F.get(v);if(ev(d,w),w!==void 0){F.delete(v);try{if(d.error){let U=d.error;w.reject(new V.ResponseError(U.code,U.message,U.data))}else if(d.result!==void 0)w.resolve(d.result);else throw new Error("Should never happen.")}catch(U){U.message?i.error(`Response handler '${w.method}' failed with message: ${U.message}`):i.error(`Response handler '${w.method}' failed unexpectedly.`)}}}}function tn(d){if(C())return;let v,w;if(d.method===To.type.method){let U=d.params.id;L.delete(U),Ei(d);return}else{let U=h.get(d.method);U&&(w=U.handler,v=U.type)}if(w||p)try{if(Ei(d),w)if(d.params===void 0)v!==void 0&&v.numberOfParams!==0&&v.parameterStructures!==V.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${v.numberOfParams} params but received none.`),w();else if(Array.isArray(d.params)){let U=d.params;d.method===go.type.method&&U.length===2&&_p.is(U[0])?w({token:U[0],value:U[1]}):(v!==void 0&&(v.parameterStructures===V.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),v.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${v.numberOfParams} params but received ${U.length} arguments`)),w(...U))}else v!==void 0&&v.parameterStructures===V.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),w(d.params);else p&&p(d.method,d.params)}catch(U){U.message?i.error(`Notification handler '${d.method}' failed with message: ${U.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else It.fire(d)}function Rt(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let v=d;if(Le.string(v.id)||Le.number(v.id)){let w=v.id,U=F.get(w);U&&U.reject(new Error("The received response has neither a result nor an error property."))}}function tt(d){if(d!=null)switch(x){case ue.Verbose:return JSON.stringify(d,null,4);case ue.Compact:return JSON.stringify(d);default:return}}function hr(d){if(!(x===ue.Off||!H))if(z===Vt.Text){let v;(x===ue.Verbose||x===ue.Compact)&&d.params&&(v=`Params: ${tt(d.params)}

`),H.log(`Sending request '${d.method} - (${d.id})'.`,v)}else Ai("send-request",d)}function er(d){if(!(x===ue.Off||!H))if(z===Vt.Text){let v;(x===ue.Verbose||x===ue.Compact)&&(d.params?v=`Params: ${tt(d.params)}

`:v=`No parameters provided.

`),H.log(`Sending notification '${d.method}'.`,v)}else Ai("send-notification",d)}function Yt(d,v,w){if(!(x===ue.Off||!H))if(z===Vt.Text){let U;(x===ue.Verbose||x===ue.Compact)&&(d.error&&d.error.data?U=`Error data: ${tt(d.error.data)}

`:d.result?U=`Result: ${tt(d.result)}

`:d.error===void 0&&(U=`No result returned.

`)),H.log(`Sending response '${v} - (${d.id})'. Processing request took ${Date.now()-w}ms`,U)}else Ai("send-response",d)}function Vs(d){if(!(x===ue.Off||!H))if(z===Vt.Text){let v;(x===ue.Verbose||x===ue.Compact)&&d.params&&(v=`Params: ${tt(d.params)}

`),H.log(`Received request '${d.method} - (${d.id})'.`,v)}else Ai("receive-request",d)}function Ei(d){if(!(x===ue.Off||!H||d.method===kl.type.method))if(z===Vt.Text){let v;(x===ue.Verbose||x===ue.Compact)&&(d.params?v=`Params: ${tt(d.params)}

`:v=`No parameters provided.

`),H.log(`Received notification '${d.method}'.`,v)}else Ai("receive-notification",d)}function ev(d,v){if(!(x===ue.Off||!H))if(z===Vt.Text){let w;if((x===ue.Verbose||x===ue.Compact)&&(d.error&&d.error.data?w=`Error data: ${tt(d.error.data)}

`:d.result?w=`Result: ${tt(d.result)}

`:d.error===void 0&&(w=`No result returned.

`)),v){let U=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";H.log(`Received response '${v.method} - (${d.id})' in ${Date.now()-v.timerStart}ms.${U}`,w)}else H.log(`Received response ${d.id} without active response promise.`,w)}else Ai("receive-response",d)}function Ai(d,v){if(!H||x===ue.Off)return;let w={isLSPMessage:!0,type:d,message:v,timestamp:Date.now()};H.log(w)}function Ks(){if(M())throw new As(yo.Closed,"Connection is closed.");if(C())throw new As(yo.Disposed,"Connection is disposed.")}function tv(){if(_())throw new As(yo.AlreadyListening,"Connection is already listening")}function rv(){if(!_())throw new Error("Call listen() first.")}function Hs(d){return d===void 0?null:d}function Mh(d){if(d!==null)return d}function Fh(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function fu(d,v){switch(d){case V.ParameterStructures.auto:return Fh(v)?Mh(v):[Hs(v)];case V.ParameterStructures.byName:if(!Fh(v))throw new Error("Received parameters by name but param is not an object literal.");return Mh(v);case V.ParameterStructures.byPosition:return[Hs(v)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function Gh(d,v){let w,U=d.numberOfParams;switch(U){case 0:w=void 0;break;case 1:w=fu(d.parameterStructures,v[0]);break;default:w=[];for(let Ae=0;Ae<v.length&&Ae<U;Ae++)w.push(Hs(v[Ae]));if(v.length<U)for(let Ae=v.length;Ae<U;Ae++)w.push(null);break}return w}let $i={sendNotification:(d,...v)=>{Ks();let w,U;if(Le.string(d)){w=d;let ge=v[0],De=0,qe=V.ParameterStructures.auto;V.ParameterStructures.is(ge)&&(De=1,qe=ge);let oe=v.length,we=oe-De;switch(we){case 0:U=void 0;break;case 1:U=fu(qe,v[De]);break;default:if(qe===V.ParameterStructures.byName)throw new Error(`Received ${we} parameters for 'by Name' notification parameter structure.`);U=v.slice(De,oe).map(he=>Hs(he));break}}else{let ge=v;w=d.method,U=Gh(d,ge)}let Ae={jsonrpc:c,method:w,params:U};return er(Ae),e.write(Ae).catch(ge=>{throw i.error("Sending notification failed."),ge})},onNotification:(d,v)=>{Ks();let w;return Le.func(d)?p=d:v&&(Le.string(d)?(w=d,h.set(d,{type:void 0,handler:v})):(w=d.method,h.set(d.method,{type:d,handler:v}))),{dispose:()=>{w!==void 0?h.delete(w):p=void 0}}},onProgress:(d,v,w)=>{if(g.has(v))throw new Error(`Progress handler for token ${v} already registered`);return g.set(v,w),{dispose:()=>{g.delete(v)}}},sendProgress:(d,v,w)=>$i.sendNotification(go.type,{token:v,value:w}),onUnhandledProgress:pr.event,sendRequest:(d,...v)=>{Ks(),rv();let w,U,Ae;if(Le.string(d)){w=d;let oe=v[0],we=v[v.length-1],he=0,Xe=V.ParameterStructures.auto;V.ParameterStructures.is(oe)&&(he=1,Xe=oe);let xt=v.length;Ip.CancellationToken.is(we)&&(xt=xt-1,Ae=we);let mr=xt-he;switch(mr){case 0:U=void 0;break;case 1:U=fu(Xe,v[he]);break;default:if(Xe===V.ParameterStructures.byName)throw new Error(`Received ${mr} parameters for 'by Name' request parameter structure.`);U=v.slice(he,xt).map(nv=>Hs(nv));break}}else{let oe=v;w=d.method,U=Gh(d,oe);let we=d.numberOfParams;Ae=Ip.CancellationToken.is(oe[we])?oe[we]:void 0}let ge=s++,De;Ae&&(De=Ae.onCancellationRequested(()=>{let oe=y.sender.sendCancellation($i,ge);return oe===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ge}`),Promise.resolve()):oe.catch(()=>{i.log(`Sending cancellation messages for id ${ge} failed`)})}));let qe={jsonrpc:c,id:ge,method:w,params:U};return hr(qe),typeof y.sender.enableCancellation=="function"&&y.sender.enableCancellation(qe),new Promise(async(oe,we)=>{let he=mr=>{oe(mr),y.sender.cleanup(ge),De?.dispose()},Xe=mr=>{we(mr),y.sender.cleanup(ge),De?.dispose()},xt={method:w,timerStart:Date.now(),resolve:he,reject:Xe};try{await e.write(qe),F.set(ge,xt)}catch(mr){throw i.error("Sending request failed."),xt.reject(new V.ResponseError(V.ErrorCodes.MessageWriteError,mr.message?mr.message:"Unknown reason")),mr}})},onRequest:(d,v)=>{Ks();let w=null;return Pp.is(d)?(w=void 0,l=d):Le.string(d)?(w=null,v!==void 0&&(w=d,u.set(d,{handler:v,type:void 0}))):v!==void 0&&(w=d.method,u.set(d.method,{type:d,handler:v})),{dispose:()=>{w!==null&&(w!==void 0?u.delete(w):l=void 0)}}},hasPendingResponse:()=>F.size>0,trace:async(d,v,w)=>{let U=!1,Ae=Vt.Text;w!==void 0&&(Le.boolean(w)?U=w:(U=w.sendNotification||!1,Ae=w.traceFormat||Vt.Text)),x=d,z=Ae,x===ue.Off?H=void 0:H=v,U&&!M()&&!C()&&await $i.sendNotification(Op.type,{value:ue.toString(d)})},onError:Ht.event,onClose:wt.event,onUnhandledNotification:It.event,onDispose:S.event,end:()=>{e.end()},dispose:()=>{if(C())return;J=Nr.Disposed,S.fire(void 0);let d=new V.ResponseError(V.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let v of F.values())v.reject(d);F=new Map,D=new Map,L=new Set,k=new $y.LinkedMap,Le.func(e.dispose)&&e.dispose(),Le.func(t.dispose)&&t.dispose()},listen:()=>{Ks(),tv(),J=Nr.Listening,t.listen(Mo)},inspect:()=>{(0,Ay.default)().console.log("inspect")}};return $i.onNotification(kl.type,d=>{if(x===ue.Off||!H)return;let v=x===ue.Verbose||x===ue.Compact;H.log(d.message,v?d.verbose:void 0)}),$i.onNotification(go.type,d=>{let v=g.get(d.token);v?v(d.value):pr.fire(d)}),$i}X.createMessageConnection=c$});var bl=Y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.ProgressType=R.ProgressToken=R.createMessageConnection=R.NullLogger=R.ConnectionOptions=R.ConnectionStrategy=R.AbstractMessageBuffer=R.WriteableStreamMessageWriter=R.AbstractMessageWriter=R.MessageWriter=R.ReadableStreamMessageReader=R.AbstractMessageReader=R.MessageReader=R.SharedArrayReceiverStrategy=R.SharedArraySenderStrategy=R.CancellationToken=R.CancellationTokenSource=R.Emitter=R.Event=R.Disposable=R.LRUCache=R.Touch=R.LinkedMap=R.ParameterStructures=R.NotificationType9=R.NotificationType8=R.NotificationType7=R.NotificationType6=R.NotificationType5=R.NotificationType4=R.NotificationType3=R.NotificationType2=R.NotificationType1=R.NotificationType0=R.NotificationType=R.ErrorCodes=R.ResponseError=R.RequestType9=R.RequestType8=R.RequestType7=R.RequestType6=R.RequestType5=R.RequestType4=R.RequestType3=R.RequestType2=R.RequestType1=R.RequestType0=R.RequestType=R.Message=R.RAL=void 0;R.MessageStrategy=R.CancellationStrategy=R.CancellationSenderStrategy=R.CancellationReceiverStrategy=R.ConnectionError=R.ConnectionErrors=R.LogTraceNotification=R.SetTraceNotification=R.TraceFormat=R.TraceValues=R.Trace=void 0;var Ee=hp();Object.defineProperty(R,"Message",{enumerable:!0,get:function(){return Ee.Message}});Object.defineProperty(R,"RequestType",{enumerable:!0,get:function(){return Ee.RequestType}});Object.defineProperty(R,"RequestType0",{enumerable:!0,get:function(){return Ee.RequestType0}});Object.defineProperty(R,"RequestType1",{enumerable:!0,get:function(){return Ee.RequestType1}});Object.defineProperty(R,"RequestType2",{enumerable:!0,get:function(){return Ee.RequestType2}});Object.defineProperty(R,"RequestType3",{enumerable:!0,get:function(){return Ee.RequestType3}});Object.defineProperty(R,"RequestType4",{enumerable:!0,get:function(){return Ee.RequestType4}});Object.defineProperty(R,"RequestType5",{enumerable:!0,get:function(){return Ee.RequestType5}});Object.defineProperty(R,"RequestType6",{enumerable:!0,get:function(){return Ee.RequestType6}});Object.defineProperty(R,"RequestType7",{enumerable:!0,get:function(){return Ee.RequestType7}});Object.defineProperty(R,"RequestType8",{enumerable:!0,get:function(){return Ee.RequestType8}});Object.defineProperty(R,"RequestType9",{enumerable:!0,get:function(){return Ee.RequestType9}});Object.defineProperty(R,"ResponseError",{enumerable:!0,get:function(){return Ee.ResponseError}});Object.defineProperty(R,"ErrorCodes",{enumerable:!0,get:function(){return Ee.ErrorCodes}});Object.defineProperty(R,"NotificationType",{enumerable:!0,get:function(){return Ee.NotificationType}});Object.defineProperty(R,"NotificationType0",{enumerable:!0,get:function(){return Ee.NotificationType0}});Object.defineProperty(R,"NotificationType1",{enumerable:!0,get:function(){return Ee.NotificationType1}});Object.defineProperty(R,"NotificationType2",{enumerable:!0,get:function(){return Ee.NotificationType2}});Object.defineProperty(R,"NotificationType3",{enumerable:!0,get:function(){return Ee.NotificationType3}});Object.defineProperty(R,"NotificationType4",{enumerable:!0,get:function(){return Ee.NotificationType4}});Object.defineProperty(R,"NotificationType5",{enumerable:!0,get:function(){return Ee.NotificationType5}});Object.defineProperty(R,"NotificationType6",{enumerable:!0,get:function(){return Ee.NotificationType6}});Object.defineProperty(R,"NotificationType7",{enumerable:!0,get:function(){return Ee.NotificationType7}});Object.defineProperty(R,"NotificationType8",{enumerable:!0,get:function(){return Ee.NotificationType8}});Object.defineProperty(R,"NotificationType9",{enumerable:!0,get:function(){return Ee.NotificationType9}});Object.defineProperty(R,"ParameterStructures",{enumerable:!0,get:function(){return Ee.ParameterStructures}});var Mp=gp();Object.defineProperty(R,"LinkedMap",{enumerable:!0,get:function(){return Mp.LinkedMap}});Object.defineProperty(R,"LRUCache",{enumerable:!0,get:function(){return Mp.LRUCache}});Object.defineProperty(R,"Touch",{enumerable:!0,get:function(){return Mp.Touch}});var l$=py();Object.defineProperty(R,"Disposable",{enumerable:!0,get:function(){return l$.Disposable}});var Cy=ui();Object.defineProperty(R,"Event",{enumerable:!0,get:function(){return Cy.Event}});Object.defineProperty(R,"Emitter",{enumerable:!0,get:function(){return Cy.Emitter}});var wy=Ya();Object.defineProperty(R,"CancellationTokenSource",{enumerable:!0,get:function(){return wy.CancellationTokenSource}});Object.defineProperty(R,"CancellationToken",{enumerable:!0,get:function(){return wy.CancellationToken}});var Iy=hy();Object.defineProperty(R,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Iy.SharedArraySenderStrategy}});Object.defineProperty(R,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Iy.SharedArrayReceiverStrategy}});var Fp=gy();Object.defineProperty(R,"MessageReader",{enumerable:!0,get:function(){return Fp.MessageReader}});Object.defineProperty(R,"AbstractMessageReader",{enumerable:!0,get:function(){return Fp.AbstractMessageReader}});Object.defineProperty(R,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Fp.ReadableStreamMessageReader}});var Gp=vy();Object.defineProperty(R,"MessageWriter",{enumerable:!0,get:function(){return Gp.MessageWriter}});Object.defineProperty(R,"AbstractMessageWriter",{enumerable:!0,get:function(){return Gp.AbstractMessageWriter}});Object.defineProperty(R,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Gp.WriteableStreamMessageWriter}});var u$=Ey();Object.defineProperty(R,"AbstractMessageBuffer",{enumerable:!0,get:function(){return u$.AbstractMessageBuffer}});var ct=Ny();Object.defineProperty(R,"ConnectionStrategy",{enumerable:!0,get:function(){return ct.ConnectionStrategy}});Object.defineProperty(R,"ConnectionOptions",{enumerable:!0,get:function(){return ct.ConnectionOptions}});Object.defineProperty(R,"NullLogger",{enumerable:!0,get:function(){return ct.NullLogger}});Object.defineProperty(R,"createMessageConnection",{enumerable:!0,get:function(){return ct.createMessageConnection}});Object.defineProperty(R,"ProgressToken",{enumerable:!0,get:function(){return ct.ProgressToken}});Object.defineProperty(R,"ProgressType",{enumerable:!0,get:function(){return ct.ProgressType}});Object.defineProperty(R,"Trace",{enumerable:!0,get:function(){return ct.Trace}});Object.defineProperty(R,"TraceValues",{enumerable:!0,get:function(){return ct.TraceValues}});Object.defineProperty(R,"TraceFormat",{enumerable:!0,get:function(){return ct.TraceFormat}});Object.defineProperty(R,"SetTraceNotification",{enumerable:!0,get:function(){return ct.SetTraceNotification}});Object.defineProperty(R,"LogTraceNotification",{enumerable:!0,get:function(){return ct.LogTraceNotification}});Object.defineProperty(R,"ConnectionErrors",{enumerable:!0,get:function(){return ct.ConnectionErrors}});Object.defineProperty(R,"ConnectionError",{enumerable:!0,get:function(){return ct.ConnectionError}});Object.defineProperty(R,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ct.CancellationReceiverStrategy}});Object.defineProperty(R,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ct.CancellationSenderStrategy}});Object.defineProperty(R,"CancellationStrategy",{enumerable:!0,get:function(){return ct.CancellationStrategy}});Object.defineProperty(R,"MessageStrategy",{enumerable:!0,get:function(){return ct.MessageStrategy}});var f$=vn();R.RAL=f$.default});var by=Y(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});var Cr=bl(),Pl=class t extends Cr.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return new TextEncoder().encode(e)}toString(e,r){return r==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e:e.slice(0,r)}allocNative(e){return new Uint8Array(e)}};Pl.emptyBuffer=new Uint8Array(0);var Up=class{constructor(e){this.socket=e,this._onData=new Cr.Emitter,this._messageListener=r=>{r.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i))},()=>{(0,Cr.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),Cr.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Cr.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Cr.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}},qp=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),Cr.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Cr.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Cr.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,r){if(typeof e=="string"){if(r!==void 0&&r!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${r}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}},d$=new TextEncoder,_y=Object.freeze({messageBuffer:Object.freeze({create:t=>new Pl(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(d$.encode(JSON.stringify(t,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{if(!(t instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(t)))}})}),stream:Object.freeze({asReadableStream:t=>new Up(t),asWritableStream:t=>new qp(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){let r=setTimeout(t,0,...e);return{dispose:()=>clearTimeout(r)}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function zp(){return _y}(function(t){function e(){Cr.RAL.install(_y)}t.install=e})(zp||(zp={}));jp.default=zp});var gi=Y(Kt=>{"use strict";var p$=Kt&&Kt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h$=Kt&&Kt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&p$(e,t,r)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.createMessageConnection=Kt.BrowserMessageWriter=Kt.BrowserMessageReader=void 0;var m$=by();m$.default.install();var $s=bl();h$(bl(),Kt);var Bp=class extends $s.AbstractMessageReader{constructor(e){super(),this._onData=new $s.Emitter,this._messageListener=r=>{this._onData.fire(r.data)},e.addEventListener("error",r=>this.fireError(r)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}};Kt.BrowserMessageReader=Bp;var Wp=class extends $s.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Kt.BrowserMessageWriter=Wp;function g$(t,e,r,n){return r===void 0&&(r=$s.NullLogger),$s.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,$s.createMessageConnection)(t,e,r,n)}Kt.createMessageConnection=g$});var Vp=Y((jb,Py)=>{"use strict";Py.exports=gi()});var Ce=Y(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.ProtocolNotificationType=Mt.ProtocolNotificationType0=Mt.ProtocolRequestType=Mt.ProtocolRequestType0=Mt.RegistrationType=Mt.MessageDirection=void 0;var Ss=gi(),Oy=(function(t){return t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both",t})(Oy||(Mt.MessageDirection=Oy={})),Kp=class{constructor(e){this.method=e}};Mt.RegistrationType=Kp;var Hp=class extends Ss.RequestType0{constructor(e){super(e)}};Mt.ProtocolRequestType0=Hp;var Yp=class extends Ss.RequestType{constructor(e){super(e,Ss.ParameterStructures.byName)}};Mt.ProtocolRequestType=Yp;var Xp=class extends Ss.NotificationType0{constructor(e){super(e)}};Mt.ProtocolNotificationType0=Xp;var Jp=class extends Ss.NotificationType{constructor(e){super(e,Ss.ParameterStructures.byName)}};Mt.ProtocolNotificationType=Jp});var Ol=Y(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.objectLiteral=He.typedArray=He.stringArray=He.array=He.func=He.error=He.number=He.string=He.boolean=void 0;function y$(t){return t===!0||t===!1}He.boolean=y$;function Ly(t){return typeof t=="string"||t instanceof String}He.string=Ly;function T$(t){return typeof t=="number"||t instanceof Number}He.number=T$;function R$(t){return t instanceof Error}He.error=R$;function x$(t){return typeof t=="function"}He.func=x$;function Dy(t){return Array.isArray(t)}He.array=Dy;function v$(t){return Dy(t)&&t.every(e=>Ly(e))}He.stringArray=v$;function E$(t,e){return Array.isArray(t)&&t.every(e)}He.typedArray=E$;function A$(t){return t!==null&&typeof t=="object"}He.objectLiteral=A$});var Gy=Y(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.ImplementationRequest=void 0;var My=Ce(),Fy;(function(t){t.method="textDocument/implementation",t.messageDirection=My.MessageDirection.clientToServer,t.type=new My.ProtocolRequestType(t.method)})(Fy||(Ll.ImplementationRequest=Fy={}))});var zy=Y(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.TypeDefinitionRequest=void 0;var Uy=Ce(),qy;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.ProtocolRequestType(t.method)})(qy||(Dl.TypeDefinitionRequest=qy={}))});var Wy=Y(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.DidChangeWorkspaceFoldersNotification=ks.WorkspaceFoldersRequest=void 0;var Ml=Ce(),jy;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Ml.MessageDirection.serverToClient,t.type=new Ml.ProtocolRequestType0(t.method)})(jy||(ks.WorkspaceFoldersRequest=jy={}));var By;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Ml.MessageDirection.clientToServer,t.type=new Ml.ProtocolNotificationType(t.method)})(By||(ks.DidChangeWorkspaceFoldersNotification=By={}))});var Hy=Y(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.ConfigurationRequest=void 0;var Vy=Ce(),Ky;(function(t){t.method="workspace/configuration",t.messageDirection=Vy.MessageDirection.serverToClient,t.type=new Vy.ProtocolRequestType(t.method)})(Ky||(Fl.ConfigurationRequest=Ky={}))});var Jy=Y(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.ColorPresentationRequest=Ns.DocumentColorRequest=void 0;var Gl=Ce(),Yy;(function(t){t.method="textDocument/documentColor",t.messageDirection=Gl.MessageDirection.clientToServer,t.type=new Gl.ProtocolRequestType(t.method)})(Yy||(Ns.DocumentColorRequest=Yy={}));var Xy;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Gl.MessageDirection.clientToServer,t.type=new Gl.ProtocolRequestType(t.method)})(Xy||(Ns.ColorPresentationRequest=Xy={}))});var eT=Y(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.FoldingRangeRefreshRequest=Cs.FoldingRangeRequest=void 0;var Ul=Ce(),Qy;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Ul.MessageDirection.clientToServer,t.type=new Ul.ProtocolRequestType(t.method)})(Qy||(Cs.FoldingRangeRequest=Qy={}));var Zy;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=Ul.MessageDirection.serverToClient,t.type=new Ul.ProtocolRequestType0(t.method)})(Zy||(Cs.FoldingRangeRefreshRequest=Zy={}))});var nT=Y(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.DeclarationRequest=void 0;var tT=Ce(),rT;(function(t){t.method="textDocument/declaration",t.messageDirection=tT.MessageDirection.clientToServer,t.type=new tT.ProtocolRequestType(t.method)})(rT||(ql.DeclarationRequest=rT={}))});var aT=Y(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.SelectionRangeRequest=void 0;var iT=Ce(),sT;(function(t){t.method="textDocument/selectionRange",t.messageDirection=iT.MessageDirection.clientToServer,t.type=new iT.ProtocolRequestType(t.method)})(sT||(zl.SelectionRangeRequest=sT={}))});var uT=Y(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.WorkDoneProgressCancelNotification=Sn.WorkDoneProgressCreateRequest=Sn.WorkDoneProgress=void 0;var $$=gi(),jl=Ce(),oT;(function(t){t.type=new $$.ProgressType;function e(r){return r===t.type}t.is=e})(oT||(Sn.WorkDoneProgress=oT={}));var cT;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=jl.MessageDirection.serverToClient,t.type=new jl.ProtocolRequestType(t.method)})(cT||(Sn.WorkDoneProgressCreateRequest=cT={}));var lT;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=jl.MessageDirection.clientToServer,t.type=new jl.ProtocolNotificationType(t.method)})(lT||(Sn.WorkDoneProgressCancelNotification=lT={}))});var hT=Y(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.CallHierarchyOutgoingCallsRequest=kn.CallHierarchyIncomingCallsRequest=kn.CallHierarchyPrepareRequest=void 0;var ws=Ce(),fT;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=ws.MessageDirection.clientToServer,t.type=new ws.ProtocolRequestType(t.method)})(fT||(kn.CallHierarchyPrepareRequest=fT={}));var dT;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=ws.MessageDirection.clientToServer,t.type=new ws.ProtocolRequestType(t.method)})(dT||(kn.CallHierarchyIncomingCallsRequest=dT={}));var pT;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=ws.MessageDirection.clientToServer,t.type=new ws.ProtocolRequestType(t.method)})(pT||(kn.CallHierarchyOutgoingCallsRequest=pT={}))});var xT=Y(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.SemanticTokensRefreshRequest=Ft.SemanticTokensRangeRequest=Ft.SemanticTokensDeltaRequest=Ft.SemanticTokensRequest=Ft.SemanticTokensRegistrationType=Ft.TokenFormat=void 0;var Zr=Ce(),mT=(function(t){return t.Relative="relative",t})(mT||(Ft.TokenFormat=mT={})),Ro;(function(t){t.method="textDocument/semanticTokens",t.type=new Zr.RegistrationType(t.method)})(Ro||(Ft.SemanticTokensRegistrationType=Ro={}));var gT;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Zr.MessageDirection.clientToServer,t.type=new Zr.ProtocolRequestType(t.method),t.registrationMethod=Ro.method})(gT||(Ft.SemanticTokensRequest=gT={}));var yT;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Zr.MessageDirection.clientToServer,t.type=new Zr.ProtocolRequestType(t.method),t.registrationMethod=Ro.method})(yT||(Ft.SemanticTokensDeltaRequest=yT={}));var TT;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Zr.MessageDirection.clientToServer,t.type=new Zr.ProtocolRequestType(t.method),t.registrationMethod=Ro.method})(TT||(Ft.SemanticTokensRangeRequest=TT={}));var RT;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Zr.MessageDirection.serverToClient,t.type=new Zr.ProtocolRequestType0(t.method)})(RT||(Ft.SemanticTokensRefreshRequest=RT={}))});var AT=Y(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.ShowDocumentRequest=void 0;var vT=Ce(),ET;(function(t){t.method="window/showDocument",t.messageDirection=vT.MessageDirection.serverToClient,t.type=new vT.ProtocolRequestType(t.method)})(ET||(Bl.ShowDocumentRequest=ET={}))});var kT=Y(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.LinkedEditingRangeRequest=void 0;var $T=Ce(),ST;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=$T.MessageDirection.clientToServer,t.type=new $T.ProtocolRequestType(t.method)})(ST||(Wl.LinkedEditingRangeRequest=ST={}))});var OT=Y(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.WillDeleteFilesRequest=Tt.DidDeleteFilesNotification=Tt.DidRenameFilesNotification=Tt.WillRenameFilesRequest=Tt.DidCreateFilesNotification=Tt.WillCreateFilesRequest=Tt.FileOperationPatternKind=void 0;var Qt=Ce(),NT=(function(t){return t.file="file",t.folder="folder",t})(NT||(Tt.FileOperationPatternKind=NT={})),CT;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(CT||(Tt.WillCreateFilesRequest=CT={}));var wT;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(wT||(Tt.DidCreateFilesNotification=wT={}));var IT;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(IT||(Tt.WillRenameFilesRequest=IT={}));var _T;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(_T||(Tt.DidRenameFilesNotification=_T={}));var bT;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(bT||(Tt.DidDeleteFilesNotification=bT={}));var PT;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(PT||(Tt.WillDeleteFilesRequest=PT={}))});var GT=Y(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.MonikerRequest=Nn.MonikerKind=Nn.UniquenessLevel=void 0;var LT=Ce(),DT=(function(t){return t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global",t})(DT||(Nn.UniquenessLevel=DT={})),MT=(function(t){return t.$import="import",t.$export="export",t.local="local",t})(MT||(Nn.MonikerKind=MT={})),FT;(function(t){t.method="textDocument/moniker",t.messageDirection=LT.MessageDirection.clientToServer,t.type=new LT.ProtocolRequestType(t.method)})(FT||(Nn.MonikerRequest=FT={}))});var jT=Y(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.TypeHierarchySubtypesRequest=Cn.TypeHierarchySupertypesRequest=Cn.TypeHierarchyPrepareRequest=void 0;var Is=Ce(),UT;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Is.MessageDirection.clientToServer,t.type=new Is.ProtocolRequestType(t.method)})(UT||(Cn.TypeHierarchyPrepareRequest=UT={}));var qT;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Is.MessageDirection.clientToServer,t.type=new Is.ProtocolRequestType(t.method)})(qT||(Cn.TypeHierarchySupertypesRequest=qT={}));var zT;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Is.MessageDirection.clientToServer,t.type=new Is.ProtocolRequestType(t.method)})(zT||(Cn.TypeHierarchySubtypesRequest=zT={}))});var VT=Y(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.InlineValueRefreshRequest=_s.InlineValueRequest=void 0;var Vl=Ce(),BT;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Vl.MessageDirection.clientToServer,t.type=new Vl.ProtocolRequestType(t.method)})(BT||(_s.InlineValueRequest=BT={}));var WT;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Vl.MessageDirection.serverToClient,t.type=new Vl.ProtocolRequestType0(t.method)})(WT||(_s.InlineValueRefreshRequest=WT={}))});var XT=Y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.InlayHintRefreshRequest=wn.InlayHintResolveRequest=wn.InlayHintRequest=void 0;var bs=Ce(),KT;(function(t){t.method="textDocument/inlayHint",t.messageDirection=bs.MessageDirection.clientToServer,t.type=new bs.ProtocolRequestType(t.method)})(KT||(wn.InlayHintRequest=KT={}));var HT;(function(t){t.method="inlayHint/resolve",t.messageDirection=bs.MessageDirection.clientToServer,t.type=new bs.ProtocolRequestType(t.method)})(HT||(wn.InlayHintResolveRequest=HT={}));var YT;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=bs.MessageDirection.serverToClient,t.type=new bs.ProtocolRequestType0(t.method)})(YT||(wn.InlayHintRefreshRequest=YT={}))});var nR=Y(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DiagnosticRefreshRequest=Zt.WorkspaceDiagnosticRequest=Zt.DocumentDiagnosticRequest=Zt.DocumentDiagnosticReportKind=Zt.DiagnosticServerCancellationData=void 0;var rR=gi(),S$=Ol(),Ps=Ce(),JT;(function(t){function e(r){let n=r;return n&&S$.boolean(n.retriggerRequest)}t.is=e})(JT||(Zt.DiagnosticServerCancellationData=JT={}));var QT=(function(t){return t.Full="full",t.Unchanged="unchanged",t})(QT||(Zt.DocumentDiagnosticReportKind=QT={})),ZT;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Ps.MessageDirection.clientToServer,t.type=new Ps.ProtocolRequestType(t.method),t.partialResult=new rR.ProgressType})(ZT||(Zt.DocumentDiagnosticRequest=ZT={}));var eR;(function(t){t.method="workspace/diagnostic",t.messageDirection=Ps.MessageDirection.clientToServer,t.type=new Ps.ProtocolRequestType(t.method),t.partialResult=new rR.ProgressType})(eR||(Zt.WorkspaceDiagnosticRequest=eR={}));var tR;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Ps.MessageDirection.serverToClient,t.type=new Ps.ProtocolRequestType0(t.method)})(tR||(Zt.DiagnosticRefreshRequest=tR={}))});var uR=Y(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.DidCloseNotebookDocumentNotification=Ge.DidSaveNotebookDocumentNotification=Ge.DidChangeNotebookDocumentNotification=Ge.NotebookCellArrayChange=Ge.DidOpenNotebookDocumentNotification=Ge.NotebookDocumentSyncRegistrationType=Ge.NotebookDocument=Ge.NotebookCell=Ge.ExecutionSummary=Ge.NotebookCellKind=void 0;var xo=(ls(),pu(sl)),fr=Ol(),wr=Ce(),Qp;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(Qp||(Ge.NotebookCellKind=Qp={}));var Zp;(function(t){function e(i,s){let a={executionOrder:i};return(s===!0||s===!1)&&(a.success=s),a}t.create=e;function r(i){let s=i;return fr.objectLiteral(s)&&xo.uinteger.is(s.executionOrder)&&(s.success===void 0||fr.boolean(s.success))}t.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=n})(Zp||(Ge.ExecutionSummary=Zp={}));var Kl;(function(t){function e(s,a){return{kind:s,document:a}}t.create=e;function r(s){let a=s;return fr.objectLiteral(a)&&Qp.is(a.kind)&&xo.DocumentUri.is(a.document)&&(a.metadata===void 0||fr.objectLiteral(a.metadata))}t.is=r;function n(s,a){let o=new Set;return s.document!==a.document&&o.add("document"),s.kind!==a.kind&&o.add("kind"),s.executionSummary!==a.executionSummary&&o.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!i(s.metadata,a.metadata)&&o.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!Zp.equals(s.executionSummary,a.executionSummary)&&o.add("executionSummary"),o}t.diff=n;function i(s,a){if(s===a)return!0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return!1;let o=Array.isArray(s),c=Array.isArray(a);if(o!==c)return!1;if(o&&c){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],a[l]))return!1}if(fr.objectLiteral(s)&&fr.objectLiteral(a)){let l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length||(l.sort(),u.sort(),!i(l,u)))return!1;for(let p=0;p<l.length;p++){let h=l[p];if(!i(s[h],a[h]))return!1}}return!0}})(Kl||(Ge.NotebookCell=Kl={}));var iR;(function(t){function e(n,i,s,a){return{uri:n,notebookType:i,version:s,cells:a}}t.create=e;function r(n){let i=n;return fr.objectLiteral(i)&&fr.string(i.uri)&&xo.integer.is(i.version)&&fr.typedArray(i.cells,Kl.is)}t.is=r})(iR||(Ge.NotebookDocument=iR={}));var Os;(function(t){t.method="notebookDocument/sync",t.messageDirection=wr.MessageDirection.clientToServer,t.type=new wr.RegistrationType(t.method)})(Os||(Ge.NotebookDocumentSyncRegistrationType=Os={}));var sR;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=wr.MessageDirection.clientToServer,t.type=new wr.ProtocolNotificationType(t.method),t.registrationMethod=Os.method})(sR||(Ge.DidOpenNotebookDocumentNotification=sR={}));var aR;(function(t){function e(n){let i=n;return fr.objectLiteral(i)&&xo.uinteger.is(i.start)&&xo.uinteger.is(i.deleteCount)&&(i.cells===void 0||fr.typedArray(i.cells,Kl.is))}t.is=e;function r(n,i,s){let a={start:n,deleteCount:i};return s!==void 0&&(a.cells=s),a}t.create=r})(aR||(Ge.NotebookCellArrayChange=aR={}));var oR;(function(t){t.method="notebookDocument/didChange",t.messageDirection=wr.MessageDirection.clientToServer,t.type=new wr.ProtocolNotificationType(t.method),t.registrationMethod=Os.method})(oR||(Ge.DidChangeNotebookDocumentNotification=oR={}));var cR;(function(t){t.method="notebookDocument/didSave",t.messageDirection=wr.MessageDirection.clientToServer,t.type=new wr.ProtocolNotificationType(t.method),t.registrationMethod=Os.method})(cR||(Ge.DidSaveNotebookDocumentNotification=cR={}));var lR;(function(t){t.method="notebookDocument/didClose",t.messageDirection=wr.MessageDirection.clientToServer,t.type=new wr.ProtocolNotificationType(t.method),t.registrationMethod=Os.method})(lR||(Ge.DidCloseNotebookDocumentNotification=lR={}))});var pR=Y(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.InlineCompletionRequest=void 0;var fR=Ce(),dR;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=fR.MessageDirection.clientToServer,t.type=new fR.ProtocolRequestType(t.method)})(dR||(Hl.InlineCompletionRequest=dR={}))});var kx=Y(f=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});f.WorkspaceSymbolRequest=f.CodeActionResolveRequest=f.CodeActionRequest=f.DocumentSymbolRequest=f.DocumentHighlightRequest=f.ReferencesRequest=f.DefinitionRequest=f.SignatureHelpRequest=f.SignatureHelpTriggerKind=f.HoverRequest=f.CompletionResolveRequest=f.CompletionRequest=f.CompletionTriggerKind=f.PublishDiagnosticsNotification=f.WatchKind=f.RelativePattern=f.FileChangeType=f.DidChangeWatchedFilesNotification=f.WillSaveTextDocumentWaitUntilRequest=f.WillSaveTextDocumentNotification=f.TextDocumentSaveReason=f.DidSaveTextDocumentNotification=f.DidCloseTextDocumentNotification=f.DidChangeTextDocumentNotification=f.TextDocumentContentChangeEvent=f.DidOpenTextDocumentNotification=f.TextDocumentSyncKind=f.TelemetryEventNotification=f.LogMessageNotification=f.ShowMessageRequest=f.ShowMessageNotification=f.MessageType=f.DidChangeConfigurationNotification=f.ExitNotification=f.ShutdownRequest=f.InitializedNotification=f.InitializeErrorCodes=f.InitializeRequest=f.WorkDoneProgressOptions=f.TextDocumentRegistrationOptions=f.StaticRegistrationOptions=f.PositionEncodingKind=f.FailureHandlingKind=f.ResourceOperationKind=f.UnregistrationRequest=f.RegistrationRequest=f.DocumentSelector=f.NotebookCellTextDocumentFilter=f.NotebookDocumentFilter=f.TextDocumentFilter=void 0;f.MonikerRequest=f.MonikerKind=f.UniquenessLevel=f.WillDeleteFilesRequest=f.DidDeleteFilesNotification=f.WillRenameFilesRequest=f.DidRenameFilesNotification=f.WillCreateFilesRequest=f.DidCreateFilesNotification=f.FileOperationPatternKind=f.LinkedEditingRangeRequest=f.ShowDocumentRequest=f.SemanticTokensRegistrationType=f.SemanticTokensRefreshRequest=f.SemanticTokensRangeRequest=f.SemanticTokensDeltaRequest=f.SemanticTokensRequest=f.TokenFormat=f.CallHierarchyPrepareRequest=f.CallHierarchyOutgoingCallsRequest=f.CallHierarchyIncomingCallsRequest=f.WorkDoneProgressCancelNotification=f.WorkDoneProgressCreateRequest=f.WorkDoneProgress=f.SelectionRangeRequest=f.DeclarationRequest=f.FoldingRangeRefreshRequest=f.FoldingRangeRequest=f.ColorPresentationRequest=f.DocumentColorRequest=f.ConfigurationRequest=f.DidChangeWorkspaceFoldersNotification=f.WorkspaceFoldersRequest=f.TypeDefinitionRequest=f.ImplementationRequest=f.ApplyWorkspaceEditRequest=f.ExecuteCommandRequest=f.PrepareRenameRequest=f.RenameRequest=f.PrepareSupportDefaultBehavior=f.DocumentOnTypeFormattingRequest=f.DocumentRangesFormattingRequest=f.DocumentRangeFormattingRequest=f.DocumentFormattingRequest=f.DocumentLinkResolveRequest=f.DocumentLinkRequest=f.CodeLensRefreshRequest=f.CodeLensResolveRequest=f.CodeLensRequest=f.WorkspaceSymbolResolveRequest=void 0;f.InlineCompletionRequest=f.DidCloseNotebookDocumentNotification=f.DidSaveNotebookDocumentNotification=f.DidChangeNotebookDocumentNotification=f.NotebookCellArrayChange=f.DidOpenNotebookDocumentNotification=f.NotebookDocumentSyncRegistrationType=f.NotebookDocument=f.NotebookCell=f.ExecutionSummary=f.NotebookCellKind=f.DiagnosticRefreshRequest=f.WorkspaceDiagnosticRequest=f.DocumentDiagnosticRequest=f.DocumentDiagnosticReportKind=f.DiagnosticServerCancellationData=f.InlayHintRefreshRequest=f.InlayHintResolveRequest=f.InlayHintRequest=f.InlineValueRefreshRequest=f.InlineValueRequest=f.TypeHierarchySupertypesRequest=f.TypeHierarchySubtypesRequest=f.TypeHierarchyPrepareRequest=void 0;var $=Ce(),hR=(ls(),pu(sl)),st=Ol(),k$=Gy();Object.defineProperty(f,"ImplementationRequest",{enumerable:!0,get:function(){return k$.ImplementationRequest}});var N$=zy();Object.defineProperty(f,"TypeDefinitionRequest",{enumerable:!0,get:function(){return N$.TypeDefinitionRequest}});var Ex=Wy();Object.defineProperty(f,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Ex.WorkspaceFoldersRequest}});Object.defineProperty(f,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Ex.DidChangeWorkspaceFoldersNotification}});var C$=Hy();Object.defineProperty(f,"ConfigurationRequest",{enumerable:!0,get:function(){return C$.ConfigurationRequest}});var Ax=Jy();Object.defineProperty(f,"DocumentColorRequest",{enumerable:!0,get:function(){return Ax.DocumentColorRequest}});Object.defineProperty(f,"ColorPresentationRequest",{enumerable:!0,get:function(){return Ax.ColorPresentationRequest}});var $x=eT();Object.defineProperty(f,"FoldingRangeRequest",{enumerable:!0,get:function(){return $x.FoldingRangeRequest}});Object.defineProperty(f,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return $x.FoldingRangeRefreshRequest}});var w$=nT();Object.defineProperty(f,"DeclarationRequest",{enumerable:!0,get:function(){return w$.DeclarationRequest}});var I$=aT();Object.defineProperty(f,"SelectionRangeRequest",{enumerable:!0,get:function(){return I$.SelectionRangeRequest}});var ih=uT();Object.defineProperty(f,"WorkDoneProgress",{enumerable:!0,get:function(){return ih.WorkDoneProgress}});Object.defineProperty(f,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ih.WorkDoneProgressCreateRequest}});Object.defineProperty(f,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ih.WorkDoneProgressCancelNotification}});var sh=hT();Object.defineProperty(f,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return sh.CallHierarchyIncomingCallsRequest}});Object.defineProperty(f,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return sh.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(f,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return sh.CallHierarchyPrepareRequest}});var Ls=xT();Object.defineProperty(f,"TokenFormat",{enumerable:!0,get:function(){return Ls.TokenFormat}});Object.defineProperty(f,"SemanticTokensRequest",{enumerable:!0,get:function(){return Ls.SemanticTokensRequest}});Object.defineProperty(f,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Ls.SemanticTokensDeltaRequest}});Object.defineProperty(f,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Ls.SemanticTokensRangeRequest}});Object.defineProperty(f,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Ls.SemanticTokensRefreshRequest}});Object.defineProperty(f,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Ls.SemanticTokensRegistrationType}});var _$=AT();Object.defineProperty(f,"ShowDocumentRequest",{enumerable:!0,get:function(){return _$.ShowDocumentRequest}});var b$=kT();Object.defineProperty(f,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return b$.LinkedEditingRangeRequest}});var yi=OT();Object.defineProperty(f,"FileOperationPatternKind",{enumerable:!0,get:function(){return yi.FileOperationPatternKind}});Object.defineProperty(f,"DidCreateFilesNotification",{enumerable:!0,get:function(){return yi.DidCreateFilesNotification}});Object.defineProperty(f,"WillCreateFilesRequest",{enumerable:!0,get:function(){return yi.WillCreateFilesRequest}});Object.defineProperty(f,"DidRenameFilesNotification",{enumerable:!0,get:function(){return yi.DidRenameFilesNotification}});Object.defineProperty(f,"WillRenameFilesRequest",{enumerable:!0,get:function(){return yi.WillRenameFilesRequest}});Object.defineProperty(f,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return yi.DidDeleteFilesNotification}});Object.defineProperty(f,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return yi.WillDeleteFilesRequest}});var ah=GT();Object.defineProperty(f,"UniquenessLevel",{enumerable:!0,get:function(){return ah.UniquenessLevel}});Object.defineProperty(f,"MonikerKind",{enumerable:!0,get:function(){return ah.MonikerKind}});Object.defineProperty(f,"MonikerRequest",{enumerable:!0,get:function(){return ah.MonikerRequest}});var oh=jT();Object.defineProperty(f,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return oh.TypeHierarchyPrepareRequest}});Object.defineProperty(f,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return oh.TypeHierarchySubtypesRequest}});Object.defineProperty(f,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return oh.TypeHierarchySupertypesRequest}});var Sx=VT();Object.defineProperty(f,"InlineValueRequest",{enumerable:!0,get:function(){return Sx.InlineValueRequest}});Object.defineProperty(f,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Sx.InlineValueRefreshRequest}});var ch=XT();Object.defineProperty(f,"InlayHintRequest",{enumerable:!0,get:function(){return ch.InlayHintRequest}});Object.defineProperty(f,"InlayHintResolveRequest",{enumerable:!0,get:function(){return ch.InlayHintResolveRequest}});Object.defineProperty(f,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return ch.InlayHintRefreshRequest}});var vo=nR();Object.defineProperty(f,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return vo.DiagnosticServerCancellationData}});Object.defineProperty(f,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return vo.DocumentDiagnosticReportKind}});Object.defineProperty(f,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return vo.DocumentDiagnosticRequest}});Object.defineProperty(f,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return vo.WorkspaceDiagnosticRequest}});Object.defineProperty(f,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return vo.DiagnosticRefreshRequest}});var Ir=uR();Object.defineProperty(f,"NotebookCellKind",{enumerable:!0,get:function(){return Ir.NotebookCellKind}});Object.defineProperty(f,"ExecutionSummary",{enumerable:!0,get:function(){return Ir.ExecutionSummary}});Object.defineProperty(f,"NotebookCell",{enumerable:!0,get:function(){return Ir.NotebookCell}});Object.defineProperty(f,"NotebookDocument",{enumerable:!0,get:function(){return Ir.NotebookDocument}});Object.defineProperty(f,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ir.NotebookDocumentSyncRegistrationType}});Object.defineProperty(f,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ir.DidOpenNotebookDocumentNotification}});Object.defineProperty(f,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ir.NotebookCellArrayChange}});Object.defineProperty(f,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ir.DidChangeNotebookDocumentNotification}});Object.defineProperty(f,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ir.DidSaveNotebookDocumentNotification}});Object.defineProperty(f,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ir.DidCloseNotebookDocumentNotification}});var P$=pR();Object.defineProperty(f,"InlineCompletionRequest",{enumerable:!0,get:function(){return P$.InlineCompletionRequest}});var eh;(function(t){function e(r){let n=r;return st.string(n)||st.string(n.language)||st.string(n.scheme)||st.string(n.pattern)}t.is=e})(eh||(f.TextDocumentFilter=eh={}));var th;(function(t){function e(r){let n=r;return st.objectLiteral(n)&&(st.string(n.notebookType)||st.string(n.scheme)||st.string(n.pattern))}t.is=e})(th||(f.NotebookDocumentFilter=th={}));var rh;(function(t){function e(r){let n=r;return st.objectLiteral(n)&&(st.string(n.notebook)||th.is(n.notebook))&&(n.language===void 0||st.string(n.language))}t.is=e})(rh||(f.NotebookCellTextDocumentFilter=rh={}));var nh;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!st.string(n)&&!eh.is(n)&&!rh.is(n))return!1;return!0}t.is=e})(nh||(f.DocumentSelector=nh={}));var mR;(function(t){t.method="client/registerCapability",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolRequestType(t.method)})(mR||(f.RegistrationRequest=mR={}));var gR;(function(t){t.method="client/unregisterCapability",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolRequestType(t.method)})(gR||(f.UnregistrationRequest=gR={}));var yR=(function(t){return t.Create="create",t.Rename="rename",t.Delete="delete",t})(yR||(f.ResourceOperationKind=yR={})),TR=(function(t){return t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo",t})(TR||(f.FailureHandlingKind=TR={})),RR=(function(t){return t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32",t})(RR||(f.PositionEncodingKind=RR={})),xR;(function(t){function e(r){let n=r;return n&&st.string(n.id)&&n.id.length>0}t.hasId=e})(xR||(f.StaticRegistrationOptions=xR={}));var vR;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||nh.is(n.documentSelector))}t.is=e})(vR||(f.TextDocumentRegistrationOptions=vR={}));var ER;(function(t){function e(n){let i=n;return st.objectLiteral(i)&&(i.workDoneProgress===void 0||st.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&st.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(ER||(f.WorkDoneProgressOptions=ER={}));var AR;(function(t){t.method="initialize",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(AR||(f.InitializeRequest=AR={}));var $R=(function(t){return t.unknownProtocolVersion=1,t})($R||(f.InitializeErrorCodes=$R={})),SR;(function(t){t.method="initialized",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(SR||(f.InitializedNotification=SR={}));var kR;(function(t){t.method="shutdown",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType0(t.method)})(kR||(f.ShutdownRequest=kR={}));var NR;(function(t){t.method="exit",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType0(t.method)})(NR||(f.ExitNotification=NR={}));var CR;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(CR||(f.DidChangeConfigurationNotification=CR={}));var wR=(function(t){return t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5,t})(wR||(f.MessageType=wR={})),IR;(function(t){t.method="window/showMessage",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolNotificationType(t.method)})(IR||(f.ShowMessageNotification=IR={}));var _R;(function(t){t.method="window/showMessageRequest",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolRequestType(t.method)})(_R||(f.ShowMessageRequest=_R={}));var bR;(function(t){t.method="window/logMessage",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolNotificationType(t.method)})(bR||(f.LogMessageNotification=bR={}));var PR;(function(t){t.method="telemetry/event",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolNotificationType(t.method)})(PR||(f.TelemetryEventNotification=PR={}));var OR=(function(t){return t.None=0,t.Full=1,t.Incremental=2,t})(OR||(f.TextDocumentSyncKind=OR={})),LR;(function(t){t.method="textDocument/didOpen",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(LR||(f.DidOpenTextDocumentNotification=LR={}));var DR;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(DR||(f.TextDocumentContentChangeEvent=DR={}));var MR;(function(t){t.method="textDocument/didChange",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(MR||(f.DidChangeTextDocumentNotification=MR={}));var FR;(function(t){t.method="textDocument/didClose",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(FR||(f.DidCloseTextDocumentNotification=FR={}));var GR;(function(t){t.method="textDocument/didSave",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(GR||(f.DidSaveTextDocumentNotification=GR={}));var UR=(function(t){return t.Manual=1,t.AfterDelay=2,t.FocusOut=3,t})(UR||(f.TextDocumentSaveReason=UR={})),qR;(function(t){t.method="textDocument/willSave",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(qR||(f.WillSaveTextDocumentNotification=qR={}));var zR;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(zR||(f.WillSaveTextDocumentWaitUntilRequest=zR={}));var jR;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolNotificationType(t.method)})(jR||(f.DidChangeWatchedFilesNotification=jR={}));var BR=(function(t){return t.Created=1,t.Changed=2,t.Deleted=3,t})(BR||(f.FileChangeType=BR={})),WR;(function(t){function e(r){let n=r;return st.objectLiteral(n)&&(hR.URI.is(n.baseUri)||hR.WorkspaceFolder.is(n.baseUri))&&st.string(n.pattern)}t.is=e})(WR||(f.RelativePattern=WR={}));var VR=(function(t){return t.Create=1,t.Change=2,t.Delete=4,t})(VR||(f.WatchKind=VR={})),KR;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolNotificationType(t.method)})(KR||(f.PublishDiagnosticsNotification=KR={}));var HR=(function(t){return t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3,t})(HR||(f.CompletionTriggerKind=HR={})),YR;(function(t){t.method="textDocument/completion",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(YR||(f.CompletionRequest=YR={}));var XR;(function(t){t.method="completionItem/resolve",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(XR||(f.CompletionResolveRequest=XR={}));var JR;(function(t){t.method="textDocument/hover",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(JR||(f.HoverRequest=JR={}));var QR=(function(t){return t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3,t})(QR||(f.SignatureHelpTriggerKind=QR={})),ZR;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(ZR||(f.SignatureHelpRequest=ZR={}));var ex;(function(t){t.method="textDocument/definition",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(ex||(f.DefinitionRequest=ex={}));var tx;(function(t){t.method="textDocument/references",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(tx||(f.ReferencesRequest=tx={}));var rx;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(rx||(f.DocumentHighlightRequest=rx={}));var nx;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(nx||(f.DocumentSymbolRequest=nx={}));var ix;(function(t){t.method="textDocument/codeAction",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(ix||(f.CodeActionRequest=ix={}));var sx;(function(t){t.method="codeAction/resolve",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(sx||(f.CodeActionResolveRequest=sx={}));var ax;(function(t){t.method="workspace/symbol",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(ax||(f.WorkspaceSymbolRequest=ax={}));var ox;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(ox||(f.WorkspaceSymbolResolveRequest=ox={}));var cx;(function(t){t.method="textDocument/codeLens",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(cx||(f.CodeLensRequest=cx={}));var lx;(function(t){t.method="codeLens/resolve",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(lx||(f.CodeLensResolveRequest=lx={}));var ux;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolRequestType0(t.method)})(ux||(f.CodeLensRefreshRequest=ux={}));var fx;(function(t){t.method="textDocument/documentLink",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(fx||(f.DocumentLinkRequest=fx={}));var dx;(function(t){t.method="documentLink/resolve",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(dx||(f.DocumentLinkResolveRequest=dx={}));var px;(function(t){t.method="textDocument/formatting",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(px||(f.DocumentFormattingRequest=px={}));var hx;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(hx||(f.DocumentRangeFormattingRequest=hx={}));var mx;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(mx||(f.DocumentRangesFormattingRequest=mx={}));var gx;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(gx||(f.DocumentOnTypeFormattingRequest=gx={}));var yx=(function(t){return t.Identifier=1,t})(yx||(f.PrepareSupportDefaultBehavior=yx={})),Tx;(function(t){t.method="textDocument/rename",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(Tx||(f.RenameRequest=Tx={}));var Rx;(function(t){t.method="textDocument/prepareRename",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(Rx||(f.PrepareRenameRequest=Rx={}));var xx;(function(t){t.method="workspace/executeCommand",t.messageDirection=$.MessageDirection.clientToServer,t.type=new $.ProtocolRequestType(t.method)})(xx||(f.ExecuteCommandRequest=xx={}));var vx;(function(t){t.method="workspace/applyEdit",t.messageDirection=$.MessageDirection.serverToClient,t.type=new $.ProtocolRequestType("workspace/applyEdit")})(vx||(f.ApplyWorkspaceEditRequest=vx={}))});var Cx=Y(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.createProtocolConnection=void 0;var Nx=gi();function O$(t,e,r,n){return Nx.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Nx.createMessageConnection)(t,e,r,n)}Yl.createProtocolConnection=O$});var Ix=Y(Gt=>{"use strict";var L$=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xl=Gt&&Gt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&L$(e,t,r)};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.LSPErrorCodes=Gt.createProtocolConnection=void 0;Xl(gi(),Gt);Xl((ls(),pu(sl)),Gt);Xl(Ce(),Gt);Xl(kx(),Gt);var D$=Cx();Object.defineProperty(Gt,"createProtocolConnection",{enumerable:!0,get:function(){return D$.createProtocolConnection}});var wx=(function(t){return t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800,t})(wx||(Gt.LSPErrorCodes=wx={}))});var bx=Y(_r=>{"use strict";var M$=_r&&_r.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_x=_r&&_r.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&M$(e,t,r)};Object.defineProperty(_r,"__esModule",{value:!0});_r.createProtocolConnection=void 0;var F$=Vp();_x(Vp(),_r);_x(Ix(),_r);function G$(t,e,r,n){return(0,F$.createMessageConnection)(t,e,r,n)}_r.createProtocolConnection=G$});var Fe={};rn(Fe,{AbstractAstReflection:()=>Pn,AbstractCstNode:()=>Ba,AbstractLangiumParser:()=>Wa,AbstractParserErrorMessageProvider:()=>ol,AbstractThreadedAsyncParser:()=>gh,AstUtils:()=>qo,BiMap:()=>di,Cancellation:()=>B,CompositeCstNodeImpl:()=>oi,ContextCache:()=>pi,CstNodeBuilder:()=>ja,CstUtils:()=>oc,DEFAULT_TOKENIZE_OPTIONS:()=>Jl,DONE_RESULT:()=>pt,DatatypeSymbol:()=>al,DefaultAstNodeDescriptionProvider:()=>lo,DefaultAstNodeLocator:()=>fo,DefaultAsyncParser:()=>Io,DefaultCommentProvider:()=>wo,DefaultConfigurationProvider:()=>po,DefaultDocumentBuilder:()=>Eo,DefaultDocumentValidator:()=>co,DefaultHydrator:()=>bo,DefaultIndexManager:()=>Ao,DefaultJsonSerializer:()=>so,DefaultLangiumDocumentFactory:()=>Xa,DefaultLangiumDocuments:()=>Ja,DefaultLangiumProfiler:()=>Ah,DefaultLexer:()=>Ti,DefaultLexerErrorMessageProvider:()=>So,DefaultLinker:()=>Qa,DefaultNameProvider:()=>Za,DefaultReferenceDescriptionProvider:()=>uo,DefaultReferences:()=>eo,DefaultScopeComputation:()=>to,DefaultScopeProvider:()=>io,DefaultServiceRegistry:()=>ao,DefaultTokenBuilder:()=>Qr,DefaultValueConverter:()=>li,DefaultWorkspaceLock:()=>_o,DefaultWorkspaceManager:()=>$o,Deferred:()=>Ct,Disposable:()=>In,DisposableCache:()=>Rs,DocumentCache:()=>gl,DocumentState:()=>re,DocumentValidator:()=>ur,EMPTY_SCOPE:()=>ZA,EMPTY_STREAM:()=>an,EmptyFileSystem:()=>Eh,EmptyFileSystemProvider:()=>nu,ErrorWithLocation:()=>Hn,GrammarAST:()=>la,GrammarUtils:()=>pc,IndentationAwareLexer:()=>vh,IndentationAwareTokenBuilder:()=>ru,JSDocDocumentationProvider:()=>Co,LangiumCompletionParser:()=>Ka,LangiumParser:()=>Va,LangiumParserErrorMessageProvider:()=>fs,LeafCstNodeImpl:()=>ai,LexingMode:()=>Ms,MapScope:()=>zd,Module:()=>qx,MultiMap:()=>gt,MultiMapScope:()=>ro,OperationCancelled:()=>Jt,ParserWorker:()=>yh,ProfilingTask:()=>iu,Reduction:()=>Si,RefResolving:()=>fi,RegExpUtils:()=>uc,RootCstNodeImpl:()=>us,SimpleCache:()=>no,StreamImpl:()=>zt,StreamScope:()=>Ts,TextDocument:()=>ms,TreeStreamImpl:()=>Tr,URI:()=>Ze,UriTrie:()=>ys,UriUtils:()=>ze,VALIDATE_EACH_NODE:()=>oy,ValidationCategory:()=>yl,ValidationRegistry:()=>oo,ValueConverter:()=>Sr,WorkspaceCache:()=>xs,assertCondition:()=>Xh,assertUnreachable:()=>xr,createCompletionParser:()=>bd,createDefaultCoreModule:()=>Th,createDefaultSharedCoreModule:()=>Rh,createGrammarConfig:()=>of,createLangiumParser:()=>Pd,createParser:()=>Ha,delayNextTick:()=>Ud,diagnosticData:()=>hi,eagerLoad:()=>jx,getDiagnosticRange:()=>cy,indentationBuilderDefaultOptions:()=>xh,inject:()=>tu,interruptAndCheck:()=>Oe,isAstNode:()=>_e,isAstNodeDescription:()=>gu,isAstNodeWithComment:()=>jd,isCompositeCstNode:()=>nr,isIMultiModeLexerDefinition:()=>uh,isJSDoc:()=>hh,isLeafCstNode:()=>sn,isLinkingError:()=>On,isMultiReference:()=>qt,isNamed:()=>sy,isOperationCancelled:()=>kr,isReference:()=>Qe,isRootCstNode:()=>Js,isTokenTypeArray:()=>Ql,isTokenTypeDictionary:()=>lh,loadGrammarFromJson:()=>br,parseJSDoc:()=>ph,prepareLangiumParser:()=>Yg,setInterruptionPeriod:()=>ey,startCancelableOperation:()=>hl,stream:()=>ee,toDiagnosticData:()=>ly,toDiagnosticSeverity:()=>Tl});var oc={};rn(oc,{DefaultNameRegexp:()=>ac,RangeComparison:()=>zr,compareRange:()=>Vh,findCommentNode:()=>qu,findDeclarationNodeAtOffset:()=>Nv,findLeafNodeAtOffset:()=>zu,findLeafNodeBeforeOffset:()=>Kh,flattenCst:()=>kv,getDatatypeNode:()=>Sv,getInteriorNodes:()=>Iv,getNextNode:()=>Cv,getPreviousNode:()=>Yh,getStartlineNode:()=>wv,inRange:()=>xu,isChildNode:()=>Uu,isCommentNode:()=>Gu,streamCst:()=>Vn,toDocumentSegment:()=>Kn,tokenToRange:()=>Di});function _e(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}function Qe(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"ref"in t}function qt(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"items"in t}function gu(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}function On(t){return typeof t=="object"&&t!==null&&typeof t.info=="object"&&typeof t.message=="string"}var Pn=class{constructor(){this.subtypes={},this.allSubtypes={}}getAllTypes(){return Object.keys(this.types)}getReferenceType(e){let r=this.types[e.container.$type];if(!r)throw new Error(`Type ${e.container.$type||"undefined"} not found.`);let n=r.properties[e.property]?.referenceType;if(!n)throw new Error(`Property ${e.property||"undefined"} of type ${e.container.$type} is not a reference.`);return n}getTypeMetaData(e){let r=this.types[e];return r||{name:e,properties:{},superTypes:[]}}isInstance(e,r){return _e(e)&&this.isSubtype(e.$type,r)}isSubtype(e,r){if(e===r)return!0;let n=this.subtypes[e];n||(n=this.subtypes[e]={});let i=n[r];if(i!==void 0)return i;{let s=this.types[e],a=s?s.superTypes.some(o=>this.isSubtype(o,r)):!1;return n[r]=a,a}}getAllSubTypes(e){let r=this.allSubtypes[e];if(r)return r;{let n=this.getAllTypes(),i=[];for(let s of n)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}};function nr(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}function sn(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}function Js(t){return nr(t)&&typeof t.fullText=="string"}var zt=class t{constructor(e,r){this.startFn=e,this.nextFn=r}iterator(){let e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){let e=this.iterator(),r=0,n=e.next();for(;!n.done;)r++,n=e.next();return r}toArray(){let e=[],r=this.iterator(),n;do n=r.next(),n.value!==void 0&&e.push(n.value);while(!n.done);return e}toSet(){return new Set(this)}toMap(e,r){let n=this.map(i=>[e?e(i):i,r?r(i):i]);return new Map(n)}toString(){return this.join()}concat(e){return new t(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),r=>{let n;if(!r.firstDone){do if(n=this.nextFn(r.first),!n.done)return n;while(!n.done);r.firstDone=!0}do if(n=r.iterator.next(),!n.done)return n;while(!n.done);return pt})}join(e=","){let r=this.iterator(),n="",i,s=!1;do i=r.next(),i.done||(s&&(n+=e),n+=av(i.value)),s=!0;while(!i.done);return n}indexOf(e,r=0){let n=this.iterator(),i=0,s=n.next();for(;!s.done;){if(i>=r&&s.value===e)return i;s=n.next(),i++}return-1}every(e){let r=this.iterator(),n=r.next();for(;!n.done;){if(!e(n.value))return!1;n=r.next()}return!0}some(e){let r=this.iterator(),n=r.next();for(;!n.done;){if(e(n.value))return!0;n=r.next()}return!1}forEach(e){let r=this.iterator(),n=0,i=r.next();for(;!i.done;)e(i.value,n),i=r.next(),n++}map(e){return new t(this.startFn,r=>{let{done:n,value:i}=this.nextFn(r);return n?pt:{done:!1,value:e(i)}})}filter(e){return new t(this.startFn,r=>{let n;do if(n=this.nextFn(r),!n.done&&e(n.value))return n;while(!n.done);return pt})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,r){let n=this.iterator(),i=r,s=n.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=n.next();return i}reduceRight(e,r){return this.recursiveReduce(this.iterator(),e,r)}recursiveReduce(e,r,n){let i=e.next();if(i.done)return n;let s=this.recursiveReduce(e,r,n);return s===void 0?i.value:r(s,i.value)}find(e){let r=this.iterator(),n=r.next();for(;!n.done;){if(e(n.value))return n.value;n=r.next()}}findIndex(e){let r=this.iterator(),n=0,i=r.next();for(;!i.done;){if(e(i.value))return n;i=r.next(),n++}return-1}includes(e){let r=this.iterator(),n=r.next();for(;!n.done;){if(n.value===e)return!0;n=r.next()}return!1}flatMap(e){return new t(()=>({this:this.startFn()}),r=>{do{if(r.iterator){let s=r.iterator.next();if(s.done)r.iterator=void 0;else return s}let{done:n,value:i}=this.nextFn(r.this);if(!n){let s=e(i);if(Go(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(r.iterator);return pt})}flat(e){if(e===void 0&&(e=1),e<=0)return this;let r=e>1?this.flat(e-1):this;return new t(()=>({this:r.startFn()}),n=>{do{if(n.iterator){let a=n.iterator.next();if(a.done)n.iterator=void 0;else return a}let{done:i,value:s}=r.nextFn(n.this);if(!i)if(Go(s))n.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(n.iterator);return pt})}head(){let r=this.iterator().next();if(!r.done)return r.value}tail(e=1){return new t(()=>{let r=this.startFn();for(let n=0;n<e;n++)if(this.nextFn(r).done)return r;return r},this.nextFn)}limit(e){return new t(()=>({size:0,state:this.startFn()}),r=>(r.size++,r.size>e?pt:this.nextFn(r.state)))}distinct(e){return new t(()=>({set:new Set,internalState:this.startFn()}),r=>{let n;do if(n=this.nextFn(r.internalState),!n.done){let i=e?e(n.value):n.value;if(!r.set.has(i))return r.set.add(i),n}while(!n.done);return pt})}exclude(e,r){let n=new Set;for(let i of e){let s=r?r(i):i;n.add(s)}return this.filter(i=>{let s=r?r(i):i;return!n.has(s)})}};function av(t){return typeof t=="string"?t:typeof t>"u"?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}function Go(t){return!!t&&typeof t[Symbol.iterator]=="function"}var an=new zt(()=>{},()=>pt),pt=Object.freeze({done:!0,value:void 0});function ee(...t){if(t.length===1){let e=t[0];if(e instanceof zt)return e;if(Go(e))return new zt(()=>e[Symbol.iterator](),r=>r.next());if(typeof e.length=="number")return new zt(()=>({index:0}),r=>r.index<e.length?{done:!1,value:e[r.index++]}:pt)}return t.length>1?new zt(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){let r=e.iterator.next();if(!r.done)return r;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){let r=t[e.collIndex++];Go(r)?e.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(e.array=r)}}while(e.iterator||e.array||e.collIndex<t.length);return pt}):an}var Tr=class extends zt{constructor(e,r,n){super(()=>({iterators:n?.includeRoot?[[e][Symbol.iterator]()]:[r(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){let a=i.iterators[i.iterators.length-1].next();if(a.done)i.iterators.pop();else return i.iterators.push(r(a.value)[Symbol.iterator]()),a}return pt})}iterator(){let e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}},Si;(function(t){function e(s){return s.reduce((a,o)=>a+o,0)}t.sum=e;function r(s){return s.reduce((a,o)=>a*o,0)}t.product=r;function n(s){return s.reduce((a,o)=>Math.min(a,o))}t.min=n;function i(s){return s.reduce((a,o)=>Math.max(a,o))}t.max=i})(Si||(Si={}));var qo={};rn(qo,{assignMandatoryProperties:()=>Ru,copyAstNode:()=>Tu,findRootNode:()=>Ni,getContainerOfType:()=>Mr,getDocument:()=>ht,getReferenceNodes:()=>Uo,hasContainerOfType:()=>ov,linkContentToContainer:()=>ki,streamAllContents:()=>ir,streamAst:()=>At,streamContents:()=>Qs,streamReferences:()=>on});function ki(t,e={}){for(let[r,n]of Object.entries(t))r.startsWith("$")||(Array.isArray(n)?n.forEach((i,s)=>{_e(i)&&(i.$container=t,i.$containerProperty=r,i.$containerIndex=s,e.deep&&ki(i,e))}):_e(n)&&(n.$container=t,n.$containerProperty=r,e.deep&&ki(n,e)))}function Mr(t,e){let r=t;for(;r;){if(e(r))return r;r=r.$container}}function ov(t,e){let r=t;for(;r;){if(e(r))return!0;r=r.$container}return!1}function ht(t){let r=Ni(t).$document;if(!r)throw new Error("AST node has no document.");return r}function Ni(t){for(;t.$container;)t=t.$container;return t}function Uo(t){return Qe(t)?t.ref?[t.ref]:[]:qt(t)?t.items.map(e=>e.ref):[]}function Qs(t,e){if(!t)throw new Error("Node must be an AstNode.");let r=e?.range;return new zt(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),n=>{for(;n.keyIndex<n.keys.length;){let i=n.keys[n.keyIndex];if(!i.startsWith("$")){let s=t[i];if(_e(s)){if(n.keyIndex++,yu(s,r))return{done:!1,value:s}}else if(Array.isArray(s)){for(;n.arrayIndex<s.length;){let a=n.arrayIndex++,o=s[a];if(_e(o)&&yu(o,r))return{done:!1,value:o}}n.arrayIndex=0}}n.keyIndex++}return pt})}function ir(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new Tr(t,r=>Qs(r,e))}function At(t,e){if(t){if(e?.range&&!yu(t,e.range))return new Tr(t,()=>[])}else throw new Error("Root node must be an AstNode.");return new Tr(t,r=>Qs(r,e),{includeRoot:!0})}function yu(t,e){if(!e)return!0;let r=t.$cstNode?.range;return r?xu(r,e):!1}function on(t){return new zt(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){let r=e.keys[e.keyIndex];if(!r.startsWith("$")){let n=t[r];if(Qe(n)||qt(n))return e.keyIndex++,{done:!1,value:{reference:n,container:t,property:r}};if(Array.isArray(n)){for(;e.arrayIndex<n.length;){let i=e.arrayIndex++,s=n[i];if(Qe(s)||qt(n))return{done:!1,value:{reference:s,container:t,property:r,index:i}}}e.arrayIndex=0}}e.keyIndex++}return pt})}function Ru(t,e){let r=t.getTypeMetaData(e.$type),n=e;for(let i of Object.values(r.properties))i.defaultValue!==void 0&&n[i.name]===void 0&&(n[i.name]=Bh(i.defaultValue))}function Bh(t){return Array.isArray(t)?[...t.map(Bh)]:t}function Tu(t,e,r){let n={$type:t.$type};r&&(r.set(t,n),r.set(n,t));for(let[i,s]of Object.entries(t))if(!i.startsWith("$"))if(_e(s))n[i]=Tu(s,e,r);else if(Qe(s))n[i]=e(n,i,s.$refNode,s.$refText,s);else if(Array.isArray(s)){let a=[];for(let o of s)_e(o)?a.push(Tu(o,e,r)):Qe(o)?a.push(e(n,i,o.$refNode,o.$refText,o)):a.push(o);n[i]=a}else n[i]=s;return ki(n,{deep:!0}),n}var la={};rn(la,{AbstractElement:()=>Pt,AbstractParserRule:()=>Zs,AbstractRule:()=>Ci,AbstractType:()=>jt,Action:()=>cn,Alternatives:()=>ea,ArrayLiteral:()=>zo,ArrayType:()=>jo,Assignment:()=>ln,BooleanLiteral:()=>Bo,CharacterRange:()=>un,Condition:()=>fn,Conjunction:()=>ta,CrossReference:()=>dn,Disjunction:()=>ra,EndOfFile:()=>Wo,Grammar:()=>Fr,GrammarImport:()=>Vo,Group:()=>Ln,InferredType:()=>Ko,InfixRule:()=>Rr,InfixRuleOperatorList:()=>na,InfixRuleOperators:()=>Ho,Interface:()=>wi,Keyword:()=>Ii,LangiumGrammarAstReflection:()=>Li,LangiumGrammarTerminals:()=>cv,NamedArgument:()=>_i,NegatedToken:()=>Dn,Negation:()=>Yo,NumberLiteral:()=>Xo,Parameter:()=>bi,ParameterReference:()=>Jo,ParserRule:()=>sr,ReferenceType:()=>ia,RegexToken:()=>Mn,ReturnType:()=>Qo,RuleCall:()=>Fn,SimpleType:()=>Pi,StringLiteral:()=>Zo,TerminalAlternatives:()=>Gn,TerminalElement:()=>Ot,TerminalGroup:()=>Un,TerminalRule:()=>Gr,TerminalRuleCall:()=>qn,Type:()=>sa,TypeAttribute:()=>zn,TypeDefinition:()=>jn,UnionType:()=>ec,UnorderedGroup:()=>aa,UntilToken:()=>Bn,ValueLiteral:()=>Wn,Wildcard:()=>Oi,isAbstractElement:()=>oa,isAbstractParserRule:()=>Ur,isAbstractRule:()=>lv,isAbstractType:()=>uv,isAction:()=>qr,isAlternatives:()=>tc,isArrayLiteral:()=>fv,isArrayType:()=>vu,isAssignment:()=>ar,isBooleanLiteral:()=>Eu,isCharacterRange:()=>Au,isCondition:()=>dv,isConjunction:()=>$u,isCrossReference:()=>or,isDisjunction:()=>Su,isEndOfFile:()=>ku,isGrammar:()=>pv,isGrammarImport:()=>hv,isGroup:()=>pn,isInferredType:()=>ca,isInfixRule:()=>hn,isInfixRuleOperatorList:()=>mv,isInfixRuleOperators:()=>gv,isInterface:()=>Nu,isKeyword:()=>Xt,isNamedArgument:()=>yv,isNegatedToken:()=>Cu,isNegation:()=>wu,isNumberLiteral:()=>Tv,isParameter:()=>Rv,isParameterReference:()=>Iu,isParserRule:()=>rt,isReferenceType:()=>_u,isRegexToken:()=>bu,isReturnType:()=>Pu,isRuleCall:()=>cr,isSimpleType:()=>rc,isStringLiteral:()=>xv,isTerminalAlternatives:()=>Ou,isTerminalElement:()=>vv,isTerminalGroup:()=>Lu,isTerminalRule:()=>$t,isTerminalRuleCall:()=>nc,isType:()=>ic,isTypeAttribute:()=>Ev,isTypeDefinition:()=>Av,isUnionType:()=>Du,isUnorderedGroup:()=>sc,isUntilToken:()=>Mu,isValueLiteral:()=>$v,isWildcard:()=>Fu,reflection:()=>j});var cv={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},Pt={$type:"AbstractElement",cardinality:"cardinality"};function oa(t){return j.isInstance(t,Pt.$type)}var Zs={$type:"AbstractParserRule"};function Ur(t){return j.isInstance(t,Zs.$type)}var Ci={$type:"AbstractRule"};function lv(t){return j.isInstance(t,Ci.$type)}var jt={$type:"AbstractType"};function uv(t){return j.isInstance(t,jt.$type)}var cn={$type:"Action",cardinality:"cardinality",feature:"feature",inferredType:"inferredType",operator:"operator",type:"type"};function qr(t){return j.isInstance(t,cn.$type)}var ea={$type:"Alternatives",cardinality:"cardinality",elements:"elements"};function tc(t){return j.isInstance(t,ea.$type)}var zo={$type:"ArrayLiteral",elements:"elements"};function fv(t){return j.isInstance(t,zo.$type)}var jo={$type:"ArrayType",elementType:"elementType"};function vu(t){return j.isInstance(t,jo.$type)}var ln={$type:"Assignment",cardinality:"cardinality",feature:"feature",operator:"operator",predicate:"predicate",terminal:"terminal"};function ar(t){return j.isInstance(t,ln.$type)}var Bo={$type:"BooleanLiteral",true:"true"};function Eu(t){return j.isInstance(t,Bo.$type)}var un={$type:"CharacterRange",cardinality:"cardinality",left:"left",lookahead:"lookahead",parenthesized:"parenthesized",right:"right"};function Au(t){return j.isInstance(t,un.$type)}var fn={$type:"Condition"};function dv(t){return j.isInstance(t,fn.$type)}var ta={$type:"Conjunction",left:"left",right:"right"};function $u(t){return j.isInstance(t,ta.$type)}var dn={$type:"CrossReference",cardinality:"cardinality",deprecatedSyntax:"deprecatedSyntax",isMulti:"isMulti",terminal:"terminal",type:"type"};function or(t){return j.isInstance(t,dn.$type)}var ra={$type:"Disjunction",left:"left",right:"right"};function Su(t){return j.isInstance(t,ra.$type)}var Wo={$type:"EndOfFile",cardinality:"cardinality"};function ku(t){return j.isInstance(t,Wo.$type)}var Fr={$type:"Grammar",imports:"imports",interfaces:"interfaces",isDeclared:"isDeclared",name:"name",rules:"rules",types:"types"};function pv(t){return j.isInstance(t,Fr.$type)}var Vo={$type:"GrammarImport",path:"path"};function hv(t){return j.isInstance(t,Vo.$type)}var Ln={$type:"Group",cardinality:"cardinality",elements:"elements",guardCondition:"guardCondition",predicate:"predicate"};function pn(t){return j.isInstance(t,Ln.$type)}var Ko={$type:"InferredType",name:"name"};function ca(t){return j.isInstance(t,Ko.$type)}var Rr={$type:"InfixRule",call:"call",dataType:"dataType",inferredType:"inferredType",name:"name",operators:"operators",parameters:"parameters",returnType:"returnType"};function hn(t){return j.isInstance(t,Rr.$type)}var na={$type:"InfixRuleOperatorList",associativity:"associativity",operators:"operators"};function mv(t){return j.isInstance(t,na.$type)}var Ho={$type:"InfixRuleOperators",precedences:"precedences"};function gv(t){return j.isInstance(t,Ho.$type)}var wi={$type:"Interface",attributes:"attributes",name:"name",superTypes:"superTypes"};function Nu(t){return j.isInstance(t,wi.$type)}var Ii={$type:"Keyword",cardinality:"cardinality",predicate:"predicate",value:"value"};function Xt(t){return j.isInstance(t,Ii.$type)}var _i={$type:"NamedArgument",calledByName:"calledByName",parameter:"parameter",value:"value"};function yv(t){return j.isInstance(t,_i.$type)}var Dn={$type:"NegatedToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function Cu(t){return j.isInstance(t,Dn.$type)}var Yo={$type:"Negation",value:"value"};function wu(t){return j.isInstance(t,Yo.$type)}var Xo={$type:"NumberLiteral",value:"value"};function Tv(t){return j.isInstance(t,Xo.$type)}var bi={$type:"Parameter",name:"name"};function Rv(t){return j.isInstance(t,bi.$type)}var Jo={$type:"ParameterReference",parameter:"parameter"};function Iu(t){return j.isInstance(t,Jo.$type)}var sr={$type:"ParserRule",dataType:"dataType",definition:"definition",entry:"entry",fragment:"fragment",inferredType:"inferredType",name:"name",parameters:"parameters",returnType:"returnType"};function rt(t){return j.isInstance(t,sr.$type)}var ia={$type:"ReferenceType",isMulti:"isMulti",referenceType:"referenceType"};function _u(t){return j.isInstance(t,ia.$type)}var Mn={$type:"RegexToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",regex:"regex"};function bu(t){return j.isInstance(t,Mn.$type)}var Qo={$type:"ReturnType",name:"name"};function Pu(t){return j.isInstance(t,Qo.$type)}var Fn={$type:"RuleCall",arguments:"arguments",cardinality:"cardinality",predicate:"predicate",rule:"rule"};function cr(t){return j.isInstance(t,Fn.$type)}var Pi={$type:"SimpleType",primitiveType:"primitiveType",stringType:"stringType",typeRef:"typeRef"};function rc(t){return j.isInstance(t,Pi.$type)}var Zo={$type:"StringLiteral",value:"value"};function xv(t){return j.isInstance(t,Zo.$type)}var Gn={$type:"TerminalAlternatives",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function Ou(t){return j.isInstance(t,Gn.$type)}var Ot={$type:"TerminalElement",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"};function vv(t){return j.isInstance(t,Ot.$type)}var Un={$type:"TerminalGroup",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function Lu(t){return j.isInstance(t,Un.$type)}var Gr={$type:"TerminalRule",definition:"definition",fragment:"fragment",hidden:"hidden",name:"name",type:"type"};function $t(t){return j.isInstance(t,Gr.$type)}var qn={$type:"TerminalRuleCall",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",rule:"rule"};function nc(t){return j.isInstance(t,qn.$type)}var sa={$type:"Type",name:"name",type:"type"};function ic(t){return j.isInstance(t,sa.$type)}var zn={$type:"TypeAttribute",defaultValue:"defaultValue",isOptional:"isOptional",name:"name",type:"type"};function Ev(t){return j.isInstance(t,zn.$type)}var jn={$type:"TypeDefinition"};function Av(t){return j.isInstance(t,jn.$type)}var ec={$type:"UnionType",types:"types"};function Du(t){return j.isInstance(t,ec.$type)}var aa={$type:"UnorderedGroup",cardinality:"cardinality",elements:"elements"};function sc(t){return j.isInstance(t,aa.$type)}var Bn={$type:"UntilToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function Mu(t){return j.isInstance(t,Bn.$type)}var Wn={$type:"ValueLiteral"};function $v(t){return j.isInstance(t,Wn.$type)}var Oi={$type:"Wildcard",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"};function Fu(t){return j.isInstance(t,Oi.$type)}var Li=class extends Pn{constructor(){super(...arguments),this.types={AbstractElement:{name:Pt.$type,properties:{cardinality:{name:Pt.cardinality}},superTypes:[]},AbstractParserRule:{name:Zs.$type,properties:{},superTypes:[Ci.$type,jt.$type]},AbstractRule:{name:Ci.$type,properties:{},superTypes:[]},AbstractType:{name:jt.$type,properties:{},superTypes:[]},Action:{name:cn.$type,properties:{cardinality:{name:cn.cardinality},feature:{name:cn.feature},inferredType:{name:cn.inferredType},operator:{name:cn.operator},type:{name:cn.type,referenceType:jt.$type}},superTypes:[Pt.$type]},Alternatives:{name:ea.$type,properties:{cardinality:{name:ea.cardinality},elements:{name:ea.elements,defaultValue:[]}},superTypes:[Pt.$type]},ArrayLiteral:{name:zo.$type,properties:{elements:{name:zo.elements,defaultValue:[]}},superTypes:[Wn.$type]},ArrayType:{name:jo.$type,properties:{elementType:{name:jo.elementType}},superTypes:[jn.$type]},Assignment:{name:ln.$type,properties:{cardinality:{name:ln.cardinality},feature:{name:ln.feature},operator:{name:ln.operator},predicate:{name:ln.predicate},terminal:{name:ln.terminal}},superTypes:[Pt.$type]},BooleanLiteral:{name:Bo.$type,properties:{true:{name:Bo.true,defaultValue:!1}},superTypes:[fn.$type,Wn.$type]},CharacterRange:{name:un.$type,properties:{cardinality:{name:un.cardinality},left:{name:un.left},lookahead:{name:un.lookahead},parenthesized:{name:un.parenthesized,defaultValue:!1},right:{name:un.right}},superTypes:[Ot.$type]},Condition:{name:fn.$type,properties:{},superTypes:[]},Conjunction:{name:ta.$type,properties:{left:{name:ta.left},right:{name:ta.right}},superTypes:[fn.$type]},CrossReference:{name:dn.$type,properties:{cardinality:{name:dn.cardinality},deprecatedSyntax:{name:dn.deprecatedSyntax,defaultValue:!1},isMulti:{name:dn.isMulti,defaultValue:!1},terminal:{name:dn.terminal},type:{name:dn.type,referenceType:jt.$type}},superTypes:[Pt.$type]},Disjunction:{name:ra.$type,properties:{left:{name:ra.left},right:{name:ra.right}},superTypes:[fn.$type]},EndOfFile:{name:Wo.$type,properties:{cardinality:{name:Wo.cardinality}},superTypes:[Pt.$type]},Grammar:{name:Fr.$type,properties:{imports:{name:Fr.imports,defaultValue:[]},interfaces:{name:Fr.interfaces,defaultValue:[]},isDeclared:{name:Fr.isDeclared,defaultValue:!1},name:{name:Fr.name},rules:{name:Fr.rules,defaultValue:[]},types:{name:Fr.types,defaultValue:[]}},superTypes:[]},GrammarImport:{name:Vo.$type,properties:{path:{name:Vo.path}},superTypes:[]},Group:{name:Ln.$type,properties:{cardinality:{name:Ln.cardinality},elements:{name:Ln.elements,defaultValue:[]},guardCondition:{name:Ln.guardCondition},predicate:{name:Ln.predicate}},superTypes:[Pt.$type]},InferredType:{name:Ko.$type,properties:{name:{name:Ko.name}},superTypes:[jt.$type]},InfixRule:{name:Rr.$type,properties:{call:{name:Rr.call},dataType:{name:Rr.dataType},inferredType:{name:Rr.inferredType},name:{name:Rr.name},operators:{name:Rr.operators},parameters:{name:Rr.parameters,defaultValue:[]},returnType:{name:Rr.returnType,referenceType:jt.$type}},superTypes:[Zs.$type]},InfixRuleOperatorList:{name:na.$type,properties:{associativity:{name:na.associativity},operators:{name:na.operators,defaultValue:[]}},superTypes:[]},InfixRuleOperators:{name:Ho.$type,properties:{precedences:{name:Ho.precedences,defaultValue:[]}},superTypes:[]},Interface:{name:wi.$type,properties:{attributes:{name:wi.attributes,defaultValue:[]},name:{name:wi.name},superTypes:{name:wi.superTypes,defaultValue:[],referenceType:jt.$type}},superTypes:[jt.$type]},Keyword:{name:Ii.$type,properties:{cardinality:{name:Ii.cardinality},predicate:{name:Ii.predicate},value:{name:Ii.value}},superTypes:[Pt.$type]},NamedArgument:{name:_i.$type,properties:{calledByName:{name:_i.calledByName,defaultValue:!1},parameter:{name:_i.parameter,referenceType:bi.$type},value:{name:_i.value}},superTypes:[]},NegatedToken:{name:Dn.$type,properties:{cardinality:{name:Dn.cardinality},lookahead:{name:Dn.lookahead},parenthesized:{name:Dn.parenthesized,defaultValue:!1},terminal:{name:Dn.terminal}},superTypes:[Ot.$type]},Negation:{name:Yo.$type,properties:{value:{name:Yo.value}},superTypes:[fn.$type]},NumberLiteral:{name:Xo.$type,properties:{value:{name:Xo.value}},superTypes:[Wn.$type]},Parameter:{name:bi.$type,properties:{name:{name:bi.name}},superTypes:[]},ParameterReference:{name:Jo.$type,properties:{parameter:{name:Jo.parameter,referenceType:bi.$type}},superTypes:[fn.$type]},ParserRule:{name:sr.$type,properties:{dataType:{name:sr.dataType},definition:{name:sr.definition},entry:{name:sr.entry,defaultValue:!1},fragment:{name:sr.fragment,defaultValue:!1},inferredType:{name:sr.inferredType},name:{name:sr.name},parameters:{name:sr.parameters,defaultValue:[]},returnType:{name:sr.returnType,referenceType:jt.$type}},superTypes:[Zs.$type]},ReferenceType:{name:ia.$type,properties:{isMulti:{name:ia.isMulti,defaultValue:!1},referenceType:{name:ia.referenceType}},superTypes:[jn.$type]},RegexToken:{name:Mn.$type,properties:{cardinality:{name:Mn.cardinality},lookahead:{name:Mn.lookahead},parenthesized:{name:Mn.parenthesized,defaultValue:!1},regex:{name:Mn.regex}},superTypes:[Ot.$type]},ReturnType:{name:Qo.$type,properties:{name:{name:Qo.name}},superTypes:[]},RuleCall:{name:Fn.$type,properties:{arguments:{name:Fn.arguments,defaultValue:[]},cardinality:{name:Fn.cardinality},predicate:{name:Fn.predicate},rule:{name:Fn.rule,referenceType:Ci.$type}},superTypes:[Pt.$type]},SimpleType:{name:Pi.$type,properties:{primitiveType:{name:Pi.primitiveType},stringType:{name:Pi.stringType},typeRef:{name:Pi.typeRef,referenceType:jt.$type}},superTypes:[jn.$type]},StringLiteral:{name:Zo.$type,properties:{value:{name:Zo.value}},superTypes:[Wn.$type]},TerminalAlternatives:{name:Gn.$type,properties:{cardinality:{name:Gn.cardinality},elements:{name:Gn.elements,defaultValue:[]},lookahead:{name:Gn.lookahead},parenthesized:{name:Gn.parenthesized,defaultValue:!1}},superTypes:[Ot.$type]},TerminalElement:{name:Ot.$type,properties:{cardinality:{name:Ot.cardinality},lookahead:{name:Ot.lookahead},parenthesized:{name:Ot.parenthesized,defaultValue:!1}},superTypes:[Pt.$type]},TerminalGroup:{name:Un.$type,properties:{cardinality:{name:Un.cardinality},elements:{name:Un.elements,defaultValue:[]},lookahead:{name:Un.lookahead},parenthesized:{name:Un.parenthesized,defaultValue:!1}},superTypes:[Ot.$type]},TerminalRule:{name:Gr.$type,properties:{definition:{name:Gr.definition},fragment:{name:Gr.fragment,defaultValue:!1},hidden:{name:Gr.hidden,defaultValue:!1},name:{name:Gr.name},type:{name:Gr.type}},superTypes:[Ci.$type]},TerminalRuleCall:{name:qn.$type,properties:{cardinality:{name:qn.cardinality},lookahead:{name:qn.lookahead},parenthesized:{name:qn.parenthesized,defaultValue:!1},rule:{name:qn.rule,referenceType:Gr.$type}},superTypes:[Ot.$type]},Type:{name:sa.$type,properties:{name:{name:sa.name},type:{name:sa.type}},superTypes:[jt.$type]},TypeAttribute:{name:zn.$type,properties:{defaultValue:{name:zn.defaultValue},isOptional:{name:zn.isOptional,defaultValue:!1},name:{name:zn.name},type:{name:zn.type}},superTypes:[]},TypeDefinition:{name:jn.$type,properties:{},superTypes:[]},UnionType:{name:ec.$type,properties:{types:{name:ec.types,defaultValue:[]}},superTypes:[jn.$type]},UnorderedGroup:{name:aa.$type,properties:{cardinality:{name:aa.cardinality},elements:{name:aa.elements,defaultValue:[]}},superTypes:[Pt.$type]},UntilToken:{name:Bn.$type,properties:{cardinality:{name:Bn.cardinality},lookahead:{name:Bn.lookahead},parenthesized:{name:Bn.parenthesized,defaultValue:!1},terminal:{name:Bn.terminal}},superTypes:[Ot.$type]},ValueLiteral:{name:Wn.$type,properties:{},superTypes:[]},Wildcard:{name:Oi.$type,properties:{cardinality:{name:Oi.cardinality},lookahead:{name:Oi.lookahead},parenthesized:{name:Oi.parenthesized,defaultValue:!1}},superTypes:[Ot.$type]}}}},j=new Li;function Sv(t){let e=t,r=!1;for(;e;){let n=Mr(e.grammarSource,rt);if(n&&n.dataType)e=e.container,r=!0;else return r?e:void 0}}function Vn(t){return new Tr(t,e=>nr(e)?e.content:[],{includeRoot:!0})}function kv(t){return Vn(t).filter(sn)}function Uu(t,e){for(;t.container;)if(t=t.container,t===e)return!0;return!1}function Di(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function Kn(t){if(!t)return;let{offset:e,end:r,range:n}=t;return{range:n,offset:e,end:r,length:r-e}}var zr=(function(t){return t[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside",t[t.Outside=5]="Outside",t})(zr||{});function Vh(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return zr.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return zr.After;let r=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,n=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return r&&n?zr.Inside:r?zr.OverlapBack:n?zr.OverlapFront:zr.Outside}function xu(t,e){return Vh(t,e)>zr.After}var ac=/^[\w\p{L}]$/u;function Nv(t,e,r=ac){if(t){if(e>0){let n=e-t.offset,i=t.text.charAt(n);r.test(i)||e--}return zu(t,e)}}function qu(t,e){if(t){let r=Yh(t,!0);if(r&&Gu(r,e))return r;if(Js(t)){let n=t.content.findIndex(i=>!i.hidden);for(let i=n-1;i>=0;i--){let s=t.content[i];if(Gu(s,e))return s}}}}function Gu(t,e){return sn(t)&&e.includes(t.tokenType.name)}function zu(t,e){if(sn(t))return t;if(nr(t)){let r=Hh(t,e,!1);if(r)return zu(r,e)}}function Kh(t,e){if(sn(t))return t;if(nr(t)){let r=Hh(t,e,!0);if(r)return Kh(r,e)}}function Hh(t,e,r){let n=0,i=t.content.length-1,s;for(;n<=i;){let a=Math.floor((n+i)/2),o=t.content[a];if(o.offset<=e&&o.end>e)return o;o.end<=e?(s=r?o:void 0,n=a+1):i=a-1}return s}function Yh(t,e=!0){for(;t.container;){let r=t.container,n=r.content.indexOf(t);for(;n>0;){n--;let i=r.content[n];if(e||!i.hidden)return i}t=r}}function Cv(t,e=!0){for(;t.container;){let r=t.container,n=r.content.indexOf(t),i=r.content.length-1;for(;n<i;){n++;let s=r.content[n];if(e||!s.hidden)return s}t=r}}function wv(t){if(t.range.start.character===0)return t;let e=t.range.start.line,r=t,n;for(;t.container;){let i=t.container,s=n??i.content.indexOf(t);if(s===0?(t=i,n=void 0):(n=s-1,t=i.content[n]),t.range.start.line!==e)break;r=t}return r}function Iv(t,e){let r=_v(t,e);return r?r.parent.content.slice(r.a+1,r.b):[]}function _v(t,e){let r=Wh(t),n=Wh(e),i;for(let s=0;s<r.length&&s<n.length;s++){let a=r[s],o=n[s];if(a.parent===o.parent)i={parent:a.parent,a:a.index,b:o.index};else break}return i}function Wh(t){let e=[];for(;t.container;){let r=t.container,n=r.content.indexOf(t);e.push({parent:r,index:n}),t=r}return e.reverse()}var pc={};rn(pc,{findAssignment:()=>nf,findNameAssignment:()=>fc,findNodeForKeyword:()=>tf,findNodeForProperty:()=>ma,findNodesForKeyword:()=>Dv,findNodesForKeywordInternal:()=>rf,findNodesForProperty:()=>Zu,getActionAtElement:()=>im,getActionType:()=>am,getAllReachableRules:()=>ha,getAllRulesUsedForCrossReferences:()=>Lv,getCrossReferenceTerminal:()=>Ju,getEntryRule:()=>em,getExplicitRuleType:()=>dc,getHiddenRules:()=>tm,getRuleType:()=>sf,getRuleTypeName:()=>qv,getTypeName:()=>gn,isArrayCardinality:()=>Fv,isArrayOperator:()=>Gv,isCommentTerminal:()=>Qu,isDataType:()=>Uv,isDataTypeRule:()=>ga,isOptionalCardinality:()=>Mv,terminalRegex:()=>Fi});var Hn=class extends Error{constructor(e,r){super(e?`${r} at ${e.range.start.line}:${e.range.start.character}`:r)}};function xr(t,e="Error: Got unexpected value."){throw new Error(e)}function Xh(t,e="Error: Condition is violated."){if(!t)throw new Error(e)}var uc={};rn(uc,{NEWLINE_REGEXP:()=>Vu,escapeRegExp:()=>mn,getTerminalParts:()=>Ov,isMultilineComment:()=>Ku,isWhitespace:()=>pa,partialMatches:()=>Hu,partialRegExp:()=>Zh,whitespaceCharacters:()=>Qh});function W(t){return t.charCodeAt(0)}function cc(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function Mi(t,e){if(t[e]===!0)throw"duplicate flag "+e;let r=t[e];t[e]=!0}function Yn(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function ua(){throw Error("Internal Error - Should never get here!")}function ju(t){return t.type==="Character"}var fa=[];for(let t=W("0");t<=W("9");t++)fa.push(t);var da=[W("_")].concat(fa);for(let t=W("a");t<=W("z");t++)da.push(t);for(let t=W("A");t<=W("Z");t++)da.push(t);var Bu=[W(" "),W("\f"),W(`
`),W("\r"),W("	"),W("\v"),W("	"),W("\xA0"),W("\u1680"),W("\u2000"),W("\u2001"),W("\u2002"),W("\u2003"),W("\u2004"),W("\u2005"),W("\u2006"),W("\u2007"),W("\u2008"),W("\u2009"),W("\u200A"),W("\u2028"),W("\u2029"),W("\u202F"),W("\u205F"),W("\u3000"),W("\uFEFF")];var bv=/[0-9a-fA-F]/,lc=/[0-9]/,Pv=/[1-9]/,Xn=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Mi(n,"global");break;case"i":Mi(n,"ignoreCase");break;case"m":Mi(n,"multiLine");break;case"u":Mi(n,"unicode");break;case"y":Mi(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){let e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){let e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}Yn(r);let n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return ua()}quantifier(e=!1){let r,n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),r={atLeast:i,atMost:s}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;Yn(r);break}if(!(e===!0&&r===void 0)&&Yn(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let e,r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Yn(e)?(e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):ua()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[W(`
`),W("\r"),W("\u2028"),W("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=fa;break;case"D":e=fa,r=!0;break;case"s":e=Bu;break;case"S":e=Bu,r=!0;break;case"w":e=da;break;case"W":e=da,r=!0;break}return Yn(e)?{type:"Set",value:e,complement:r}:ua()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=W("\f");break;case"n":e=W(`
`);break;case"r":e=W("\r");break;case"t":e=W("	");break;case"v":e=W("\v");break}return Yn(e)?{type:"Character",value:e}:ua()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:W("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:W(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:W(e)}}}characterClass(){let e=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let n=this.classAtom(),i=n.type==="Character";if(ju(n)&&this.isRangeDash()){this.consumeChar("-");let s=this.classAtom(),a=s.type==="Character";if(ju(s)){if(s.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:s.value})}else cc(n.value,e),e.push(W("-")),cc(s.value,e)}else cc(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:W("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;let r=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(Pv.test(e)===!1)throw Error("Expecting a positive integer");for(;lc.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(lc.test(e)===!1)throw Error("Expecting an integer");for(;lc.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:W(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return lc.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let i=0;i<e;i++){let s=this.popChar();if(bv.test(s)===!1)throw Error("Expecting a HexDecimal digits");r+=s}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var vr=class{visitChildren(e){for(let r in e){let n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Vu=/\r?\n/gm,Jh=new Xn,Wu=class extends vr{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){let r=String.fromCharCode(e.value);if(!this.multiline&&r===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let n=mn(r);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitSet(e){if(!this.multiline){let r=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(r);this.multiline=!!`
`.match(n)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let r=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}},Jn=new Wu;function Ov(t){try{typeof t!="string"&&(t=t.source),t=`/${t}/`;let e=Jh.pattern(t),r=[];for(let n of e.value.value)Jn.reset(t),Jn.visit(n),r.push({start:Jn.startRegexp,end:Jn.endRegex});return r}catch{return[]}}function Ku(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),Jn.reset(t),Jn.visit(Jh.pattern(t)),Jn.multiline}catch{return!1}}var Qh=`\f
\r	\v \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`.split("");function pa(t){let e=typeof t=="string"?new RegExp(t):t;return Qh.some(r=>e.test(r))}function mn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hu(t,e){let r=Zh(t),n=e.match(r);return!!n&&n[0].length>0}function Zh(t){typeof t=="string"&&(t=new RegExp(t));let e=t,r=t.source,n=0;function i(){let s="",a;function o(l){s+=r.substr(n,l),n+=l}function c(l){s+="(?:"+r.substr(n,l)+"|$)",n+=l}for(;n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":c(3);break;case"x":c(4);break;case"u":e.unicode?r[n+2]==="{"?c(r.indexOf("}",n)-n+1):c(6):c(2);break;case"p":case"P":e.unicode?c(r.indexOf("}",n)-n+1):c(2);break;case"k":c(r.indexOf(">",n)-n+1);break;default:c(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=n,a=a.exec(r)||[],c(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=n,a=a.exec(r),a?o(a[0].length):c(1);break;case"(":if(r[n+1]==="?")switch(r[n+2]){case":":s+="(?:",n+=3,s+=i()+"|$)";break;case"=":s+="(?=",n+=3,s+=i()+")";break;case"!":a=n,n+=3,i(),s+=r.substr(a,n-a);break;case"<":switch(r[n+3]){case"=":case"!":a=n,n+=4,i(),s+=r.substr(a,n-a);break;default:o(r.indexOf(">",n)-n+1),s+=i()+"|$)";break}break}else o(1),s+=i()+"|$)";break;case")":return++n,s;default:c(1);break}return s}return new RegExp(i(),t.flags)}function em(t){return t.rules.find(e=>rt(e)&&e.entry)}function tm(t){return t.rules.filter(e=>$t(e)&&e.hidden)}function ha(t,e){let r=new Set,n=em(t);if(!n)return new Set(t.rules);let i=[n].concat(tm(t));for(let a of i)rm(a,r,e);let s=new Set;for(let a of t.rules)(r.has(a.name)||$t(a)&&a.hidden)&&s.add(a);return s}function rm(t,e,r){e.add(t.name),ir(t).forEach(n=>{if(cr(n)||r&&nc(n)){let i=n.rule.ref;i&&!e.has(i.name)&&rm(i,e,r)}})}function Lv(t){let e=new Set;return ir(t).forEach(r=>{or(r)&&(rt(r.type.ref)&&e.add(r.type.ref),ca(r.type.ref)&&rt(r.type.ref.$container)&&e.add(r.type.ref.$container))}),e}function Ju(t){if(t.terminal)return t.terminal;if(t.type.ref)return fc(t.type.ref)?.terminal}function Qu(t){return t.hidden&&!pa(Fi(t))}function Zu(t,e){return!t||!e?[]:ef(t,e,t.astNode,!0)}function ma(t,e,r){if(!t||!e)return;let n=ef(t,e,t.astNode,!0);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function ef(t,e,r,n){if(!n){let i=Mr(t.grammarSource,ar);if(i&&i.feature===e)return[t]}return nr(t)&&t.astNode===r?t.content.flatMap(i=>ef(i,e,r,!1)):[]}function Dv(t,e){return t?rf(t,e,t?.astNode):[]}function tf(t,e,r){if(!t)return;let n=rf(t,e,t?.astNode);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function rf(t,e,r){if(t.astNode!==r)return[];if(Xt(t.grammarSource)&&t.grammarSource.value===e)return[t];let n=Vn(t).iterator(),i,s=[];do if(i=n.next(),!i.done){let a=i.value;a.astNode===r?Xt(a.grammarSource)&&a.grammarSource.value===e&&s.push(a):n.prune()}while(!i.done);return s}function nf(t){let e=t.astNode;for(;e===t.container?.astNode;){let r=Mr(t.grammarSource,ar);if(r)return r;t=t.container}}function fc(t){let e=t;return ca(e)&&(qr(e.$container)?e=e.$container.$container:Ur(e.$container)?e=e.$container:xr(e.$container)),nm(t,e,new Map)}function nm(t,e,r){function n(i,s){let a;return Mr(i,ar)||(a=nm(s,s,r)),r.set(t,a),a}if(r.has(t))return r.get(t);r.set(t,void 0);for(let i of ir(e)){if(ar(i)&&i.feature.toLowerCase()==="name")return r.set(t,i),i;if(cr(i)&&rt(i.rule.ref))return n(i,i.rule.ref);if(rc(i)&&i.typeRef?.ref)return n(i,i.typeRef.ref)}}function im(t){let e=t.$container;if(pn(e)){let r=e.elements,n=r.indexOf(t);for(let i=n-1;i>=0;i--){let s=r[i];if(qr(s))return s;{let a=ir(r[i]).find(qr);if(a)return a}}}if(oa(e))return im(e)}function Mv(t,e){return t==="?"||t==="*"||pn(e)&&!!e.guardCondition}function Fv(t){return t==="*"||t==="+"}function Gv(t){return t==="+="}function ga(t){return sm(t,new Set)}function sm(t,e){if(e.has(t))return!0;e.add(t);for(let r of ir(t))if(cr(r)){if(!r.rule.ref||rt(r.rule.ref)&&!sm(r.rule.ref,e)||hn(r.rule.ref))return!1}else{if(ar(r))return!1;if(qr(r))return!1}return!!t.definition}function Uv(t){return Xu(t.type,new Set)}function Xu(t,e){if(e.has(t))return!0;if(e.add(t),vu(t))return!1;if(_u(t))return!1;if(Du(t))return t.types.every(r=>Xu(r,e));if(rc(t)){if(t.primitiveType!==void 0)return!0;if(t.stringType!==void 0)return!0;if(t.typeRef!==void 0){let r=t.typeRef.ref;return ic(r)?Xu(r.type,e):!1}else return!1}else return!1}function dc(t){if(!$t(t)){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){let e=t.returnType.ref;if(e)return e.name}}}function gn(t){if(Ur(t))return rt(t)&&ga(t)?t.name:dc(t)??t.name;if(Nu(t)||ic(t)||Pu(t))return t.name;if(qr(t)){let e=am(t);if(e)return e}else if(ca(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function am(t){if(t.inferredType)return t.inferredType.name;if(t.type?.ref)return gn(t.type.ref)}function qv(t){return $t(t)?t.type?.name??"string":rt(t)&&ga(t)?t.name:dc(t)??t.name}function sf(t){return $t(t)?t.type?.name??"string":dc(t)??t.name}function Fi(t){let e={s:!1,i:!1,u:!1},r=Gi(t.definition,e),n=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(r,n)}var af=/[\s\S]/.source;function Gi(t,e){if(Ou(t))return zv(t);if(Lu(t))return jv(t);if(Au(t))return Vv(t);if(nc(t)){let r=t.rule.ref;if(!r)throw new Error("Missing rule reference.");return jr(Gi(r.definition),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}else{if(Cu(t))return Wv(t);if(Mu(t))return Bv(t);if(bu(t)){let r=t.regex.lastIndexOf("/"),n=t.regex.substring(1,r),i=t.regex.substring(r+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),jr(n,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}else{if(Fu(t))return jr(af,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized});throw new Error(`Invalid terminal element: ${t?.$type}, ${t?.$cstNode?.text}`)}}}function zv(t){return jr(t.elements.map(e=>Gi(e)).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function jv(t){return jr(t.elements.map(e=>Gi(e)).join(""),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Bv(t){return jr(`${af}*?${Gi(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function Wv(t){return jr(`(?!${Gi(t.terminal)})${af}*?`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function Vv(t){return t.right?jr(`[${Yu(t.left)}-${Yu(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1}):jr(Yu(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Yu(t){return mn(t.value)}function jr(t,e){return(e.parenthesized||e.lookahead||e.wrap!==!1)&&(t=`(${e.lookahead??(e.parenthesized?"":"?:")}${t})`),e.cardinality?`${t}${e.cardinality}`:t}function of(t){let e=[],r=t.Grammar;for(let n of r.rules)$t(n)&&Qu(n)&&Ku(Fi(n))&&e.push(n.name);return{multilineCommentRules:e,nameRegexp:ac}}function Ui(t){console&&console.error&&console.error(`Error: ${t}`)}function ya(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Ta(t){let e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function Ra(t){function e(){}e.prototype=t;let r=new e;function n(){return typeof r.bar}return n(),n(),t;(0,eval)(t)}function Kv(t){return Hv(t)?t.LABEL:t.name}function Hv(t){return dt(t.LABEL)&&t.LABEL!==""}var Bt=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),O(this.definition,r=>{r.accept(e)})}},de=class extends Bt{constructor(e){super([]),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},St=class extends Bt{constructor(e){super(e.definition),this.orgText="",lt(this,Ut(e,r=>r!==void 0))}},Re=class extends Bt{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,lt(this,Ut(e,r=>r!==void 0))}},pe=class extends Bt{constructor(e){super(e.definition),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}},xe=class extends Bt{constructor(e){super(e.definition),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}},ve=class extends Bt{constructor(e){super(e.definition),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}},se=class extends Bt{constructor(e){super(e.definition),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}},ye=class extends Bt{constructor(e){super(e.definition),this.idx=1,lt(this,Ut(e,r=>r!==void 0))}},Te=class extends Bt{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,lt(this,Ut(e,r=>r!==void 0))}},te=class{constructor(e){this.idx=1,lt(this,Ut(e,r=>r!==void 0))}accept(e){e.visit(this)}};function hc(t){return I(t,qi)}function qi(t){function e(r){return I(r,qi)}if(t instanceof de){let r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return dt(t.label)&&(r.label=t.label),r}else{if(t instanceof Re)return{type:"Alternative",definition:e(t.definition)};if(t instanceof pe)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof xe)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof ve)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:qi(new te({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ye)return{type:"RepetitionWithSeparator",idx:t.idx,separator:qi(new te({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof se)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Te)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof te){let r={type:"Terminal",name:t.terminalType.name,label:Kv(t.terminalType),idx:t.idx};dt(t.label)&&(r.terminalLabel=t.label);let n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=rr(n)?n.source:n),r}else{if(t instanceof St)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var kt=class{visit(e){let r=e;switch(r.constructor){case de:return this.visitNonTerminal(r);case Re:return this.visitAlternative(r);case pe:return this.visitOption(r);case xe:return this.visitRepetitionMandatory(r);case ve:return this.visitRepetitionMandatoryWithSeparator(r);case ye:return this.visitRepetitionWithSeparator(r);case se:return this.visitRepetition(r);case Te:return this.visitAlternation(r);case te:return this.visitTerminal(r);case St:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function cf(t){return t instanceof Re||t instanceof pe||t instanceof se||t instanceof xe||t instanceof ve||t instanceof ye||t instanceof te||t instanceof St}function Qn(t,e=[]){return t instanceof pe||t instanceof se||t instanceof ye?!0:t instanceof Te?Fo(t.definition,n=>Qn(n,e)):t instanceof de&&Ie(e,t)?!1:t instanceof Bt?(t instanceof de&&e.push(t),vt(t.definition,n=>Qn(n,e))):!1}function lf(t){return t instanceof Te}function Lt(t){if(t instanceof de)return"SUBRULE";if(t instanceof pe)return"OPTION";if(t instanceof Te)return"OR";if(t instanceof xe)return"AT_LEAST_ONE";if(t instanceof ve)return"AT_LEAST_ONE_SEP";if(t instanceof ye)return"MANY_SEP";if(t instanceof se)return"MANY";if(t instanceof te)return"CONSUME";throw Error("non exhaustive match")}var Br=class{walk(e,r=[]){O(e.definition,(n,i)=>{let s=We(e.definition,i+1);if(n instanceof de)this.walkProdRef(n,s,r);else if(n instanceof te)this.walkTerminal(n,s,r);else if(n instanceof Re)this.walkFlat(n,s,r);else if(n instanceof pe)this.walkOption(n,s,r);else if(n instanceof xe)this.walkAtLeastOne(n,s,r);else if(n instanceof ve)this.walkAtLeastOneSep(n,s,r);else if(n instanceof ye)this.walkManySep(n,s,r);else if(n instanceof se)this.walkMany(n,s,r);else if(n instanceof Te)this.walkOr(n,s,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){let i=r.concat(n);this.walk(e,i)}walkOption(e,r,n){let i=r.concat(n);this.walk(e,i)}walkAtLeastOne(e,r,n){let i=[new pe({definition:e.definition})].concat(r,n);this.walk(e,i)}walkAtLeastOneSep(e,r,n){let i=om(e,r,n);this.walk(e,i)}walkMany(e,r,n){let i=[new pe({definition:e.definition})].concat(r,n);this.walk(e,i)}walkManySep(e,r,n){let i=om(e,r,n);this.walk(e,i)}walkOr(e,r,n){let i=r.concat(n);O(e.definition,s=>{let a=new Re({definition:[s]});this.walk(a,i)})}};function om(t,e,r){return[new pe({definition:[new te({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function Zn(t){if(t instanceof de)return Zn(t.referencedRule);if(t instanceof te)return Jv(t);if(cf(t))return Yv(t);if(lf(t))return Xv(t);throw Error("non exhaustive match")}function Yv(t){let e=[],r=t.definition,n=0,i=r.length>n,s,a=!0;for(;i&&a;)s=r[n],a=Qn(s),e=e.concat(Zn(s)),n=n+1,i=r.length>n;return Xs(e)}function Xv(t){let e=I(t.definition,r=>Zn(r));return Xs(Be(e))}function Jv(t){return[t.terminalType]}var mc="_~IN~_";var uf=class extends Br{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){let i=Qv(e.referencedRule,e.idx)+this.topProd.name,s=r.concat(n),a=new Re({definition:s}),o=Zn(a);this.follows[i]=o}};function cm(t){let e={};return O(t,r=>{let n=new uf(r).startWalking();lt(e,n)}),e}function Qv(t,e){return t.name+e+mc}var gc={},Zv=new Xn;function zi(t){let e=t.toString();if(gc.hasOwnProperty(e))return gc[e];{let r=Zv.pattern(e);return gc[e]=r,r}}function lm(){gc={}}var fm="Complement Sets are not supported for first char optimization",xa=`Unable to use "first char" lexer optimizations:
`;function dm(t,e=!1){try{let r=zi(t);return ff(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===fm)e&&ya(`${xa}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ui(`${xa}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function ff(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)ff(t.value[i],e,r);break;case"Alternative":let n=t.value;for(let i=0;i<n.length;i++){let s=n[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=s;switch(a.type){case"Character":yc(a.value,e,r);break;case"Set":if(a.complement===!0)throw Error(fm);O(a.value,c=>{if(typeof c=="number")yc(c,e,r);else{let l=c;if(r===!0)for(let u=l.from;u<=l.to;u++)yc(u,e,r);else{for(let u=l.from;u<=l.to&&u<ji;u++)yc(u,e,r);if(l.to>=ji){let u=l.from>=ji?l.from:ji,p=l.to,h=Er(u),g=Er(p);for(let N=h;N<=g;N++)e[N]=N}}}});break;case"Group":ff(a.value,e,r);break;default:throw Error("Non Exhaustive Match")}let o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&df(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return Se(e)}function yc(t,e,r){let n=Er(t);e[n]=n,r===!0&&eE(t,e)}function eE(t,e){let r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){let i=Er(n.charCodeAt(0));e[i]=i}else{let i=r.toLowerCase();if(i!==r){let s=Er(i.charCodeAt(0));e[s]=s}}}function um(t,e){return Dr(t.value,r=>{if(typeof r=="number")return Ie(e,r);{let n=r;return Dr(e,i=>n.from<=i&&i<=n.to)!==void 0}})}function df(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?Je(t.value)?vt(t.value,df):df(t.value):!1}var pf=class extends vr{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){Ie(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?um(e,this.targetCharCodes)===void 0&&(this.found=!0):um(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Tc(t,e){if(e instanceof RegExp){let r=zi(e),n=new pf(t);return n.visit(r),n.found}else return Dr(e,r=>Ie(t,r.charCodeAt(0)))!==void 0}var ei="PATTERN",Bi="defaultMode",Rc="modes",mf=typeof new RegExp("(?:)").sticky=="boolean";function mm(t,e){e=Ys(e,{useSticky:mf,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(D,x)=>x()});let r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{RE()});let n;r("Reject Lexer.NA",()=>{n=bn(t,D=>D[ei]===Ve.NA)});let i=!1,s;r("Transform Patterns",()=>{i=!1,s=I(n,D=>{let x=D[ei];if(rr(x)){let z=x.source;return z.length===1&&z!=="^"&&z!=="$"&&z!=="."&&!x.ignoreCase?z:z.length===2&&z[0]==="\\"&&!Ie(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],z[1])?z[1]:e.useSticky?hm(x):pm(x)}else{if(gr(x))return i=!0,{exec:x};if(typeof x=="object")return i=!0,x;if(typeof x=="string"){if(x.length===1)return x;{let z=x.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),H=new RegExp(z);return e.useSticky?hm(H):pm(H)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;r("misc mapping",()=>{a=I(n,D=>D.tokenTypeIdx),o=I(n,D=>{let x=D.GROUP;if(x!==Ve.SKIPPED){if(dt(x))return x;if(Et(x))return!1;throw Error("non exhaustive match")}}),c=I(n,D=>{let x=D.LONGER_ALT;if(x)return Je(x)?I(x,H=>mu(n,H)):[mu(n,x)]}),l=I(n,D=>D.PUSH_MODE),u=I(n,D=>G(D,"POP_MODE"))});let p;r("Line Terminator Handling",()=>{let D=Am(e.lineTerminatorCharacters);p=I(n,x=>!1),e.positionTracking!=="onlyOffset"&&(p=I(n,x=>G(x,"LINE_BREAKS")?!!x.LINE_BREAKS:Em(x,D)===!1&&Tc(D,x.PATTERN)))});let h,g,N,k;r("Misc Mapping #2",()=>{h=I(n,xm),g=I(s,yE),N=Me(n,(D,x)=>{let z=x.GROUP;return dt(z)&&z!==Ve.SKIPPED&&(D[z]=[]),D},{}),k=I(s,(D,x)=>({pattern:s[x],longerAlt:c[x],canLineTerminator:p[x],isCustom:h[x],short:g[x],group:o[x],push:l[x],pop:u[x],tokenTypeIdx:a[x],tokenType:n[x]}))});let F=!0,L=[];return e.safeMode||r("First Char Optimization",()=>{L=Me(n,(D,x,z)=>{if(typeof x.PATTERN=="string"){let H=x.PATTERN.charCodeAt(0),J=Er(H);hf(D,J,k[z])}else if(Je(x.START_CHARS_HINT)){let H;O(x.START_CHARS_HINT,J=>{let Ht=typeof J=="string"?J.charCodeAt(0):J,wt=Er(Ht);H!==wt&&(H=wt,hf(D,wt,k[z]))})}else if(rr(x.PATTERN))if(x.PATTERN.unicode)F=!1,e.ensureOptimizations&&Ui(`${xa}	Unable to analyze < ${x.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let H=dm(x.PATTERN,e.ensureOptimizations);Z(H)&&(F=!1),O(H,J=>{hf(D,J,k[z])})}else e.ensureOptimizations&&Ui(`${xa}	TokenType: <${x.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),F=!1;return D},[])}),{emptyGroups:N,patternIdxToConfig:k,charCodeToPatternIdxToConfig:L,hasCustom:i,canBeOptimized:F}}function gm(t,e){let r=[],n=rE(t);r=r.concat(n.errors);let i=nE(n.valid),s=i.valid;return r=r.concat(i.errors),r=r.concat(tE(s)),r=r.concat(fE(s)),r=r.concat(dE(s,e)),r=r.concat(pE(s)),r}function tE(t){let e=[],r=at(t,n=>rr(n[ei]));return e=e.concat(sE(r)),e=e.concat(cE(r)),e=e.concat(lE(r)),e=e.concat(uE(r)),e=e.concat(aE(r)),e}function rE(t){let e=at(t,i=>!G(i,ei)),r=I(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:be.MISSING_PATTERN,tokenTypes:[i]})),n=_n(t,e);return{errors:r,valid:n}}function nE(t){let e=at(t,i=>{let s=i[ei];return!rr(s)&&!gr(s)&&!G(s,"exec")&&!dt(s)}),r=I(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:be.INVALID_PATTERN,tokenTypes:[i]})),n=_n(t,e);return{errors:r,valid:n}}var iE=/[^\\][$]/;function sE(t){class e extends vr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}let r=at(t,i=>{let s=i.PATTERN;try{let a=zi(s),o=new e;return o.visit(a),o.found}catch{return iE.test(s.source)}});return I(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:be.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function aE(t){let e=at(t,n=>n.PATTERN.test(""));return I(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:be.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}var oE=/[^\\[][\^]|^\^/;function cE(t){class e extends vr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}let r=at(t,i=>{let s=i.PATTERN;try{let a=zi(s),o=new e;return o.visit(a),o.found}catch{return oE.test(s.source)}});return I(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:be.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function lE(t){let e=at(t,n=>{let i=n[ei];return i instanceof RegExp&&(i.multiline||i.global)});return I(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:be.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function uE(t){let e=[],r=I(t,s=>Me(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Ie(e,o)&&o.PATTERN!==Ve.NA&&(e.push(o),a.push(o)),a),[]));r=Lr(r);let n=at(r,s=>s.length>1);return I(n,s=>{let a=I(s,c=>c.name);return{message:`The same RegExp pattern ->${ut(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:be.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function fE(t){let e=at(t,n=>{if(!G(n,"GROUP"))return!1;let i=n.GROUP;return i!==Ve.SKIPPED&&i!==Ve.NA&&!dt(i)});return I(e,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:be.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function dE(t,e){let r=at(t,i=>i.PUSH_MODE!==void 0&&!Ie(e,i.PUSH_MODE));return I(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:be.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function pE(t){let e=[],r=Me(t,(n,i,s)=>{let a=i.PATTERN;return a===Ve.NA||(dt(a)?n.push({str:a,idx:s,tokenType:i}):rr(a)&&mE(a)&&n.push({str:a.source,idx:s,tokenType:i})),n},[]);return O(t,(n,i)=>{O(r,({str:s,idx:a,tokenType:o})=>{if(i<a&&hE(s,n.PATTERN)){let c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:be.UNREACHABLE_PATTERN,tokenTypes:[n,o]})}})}),e}function hE(t,e){if(rr(e)){if(gE(e))return!1;let r=e.exec(t);return r!==null&&r.index===0}else{if(gr(e))return e(t,0,[],{});if(G(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function mE(t){return Dr([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>t.source.indexOf(r)!==-1)===void 0}function gE(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function pm(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function hm(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function ym(t,e,r){let n=[];return G(t,Bi)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Bi+`> property in its definition
`,type:be.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),G(t,Rc)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Rc+`> property in its definition
`,type:be.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),G(t,Rc)&&G(t,Bi)&&!G(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Bi}: <${t.defaultMode}>which does not exist
`,type:be.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),G(t,Rc)&&O(t.modes,(i,s)=>{O(i,(a,o)=>{if(Et(a))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:be.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(G(a,"LONGER_ALT")){let c=Je(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];O(c,l=>{!Et(l)&&!Ie(i,l)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:be.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function Tm(t,e,r){let n=[],i=!1,s=Lr(Be(Se(t.modes))),a=bn(s,c=>c[ei]===Ve.NA),o=Am(r);return e&&O(a,c=>{let l=Em(c,o);if(l!==!1){let p={message:TE(c,l),type:l.issue,tokenType:c};n.push(p)}else G(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Tc(o,c.PATTERN)&&(i=!0)}),e&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:be.NO_LINE_BREAKS_FLAGS}),n}function Rm(t){let e={},r=Or(t);return O(r,n=>{let i=t[n];if(Je(i))e[n]=[];else throw Error("non exhaustive match")}),e}function xm(t){let e=t.PATTERN;if(rr(e))return!1;if(gr(e))return!0;if(G(e,"exec"))return!0;if(dt(e))return!1;throw Error("non exhaustive match")}function yE(t){return dt(t)&&t.length===1?t.charCodeAt(0):!1}var vm={test:function(t){let e=t.length;for(let r=this.lastIndex;r<e;r++){let n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Em(t,e){if(G(t,"LINE_BREAKS"))return!1;if(rr(t.PATTERN)){try{Tc(e,t.PATTERN)}catch(r){return{issue:be.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(dt(t.PATTERN))return!1;if(xm(t))return{issue:be.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function TE(t,e){if(e.issue===be.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===be.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Am(t){return I(t,r=>dt(r)?r.charCodeAt(0):r)}function hf(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}var ji=256,xc=[];function Er(t){return t<ji?t:xc[t]}function RE(){if(Z(xc)){xc=new Array(65536);for(let t=0;t<65536;t++)xc[t]=t>255?255+~~(t/255):t}}function Wr(t,e){let r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function Wi(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var $m=1,km={};function Vr(t){let e=xE(t);vE(e),AE(e),EE(e),O(e,r=>{r.isParent=r.categoryMatches.length>0})}function xE(t){let e=$e(t),r=t,n=!0;for(;n;){r=Lr(Be(I(r,s=>s.CATEGORIES)));let i=_n(r,e);e=e.concat(i),Z(i)?n=!1:r=i}return e}function vE(t){O(t,e=>{gf(e)||(km[$m]=e,e.tokenTypeIdx=$m++),Sm(e)&&!Je(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Sm(e)||(e.CATEGORIES=[]),$E(e)||(e.categoryMatches=[]),SE(e)||(e.categoryMatchesMap={})})}function EE(t){O(t,e=>{e.categoryMatches=[],O(e.categoryMatchesMap,(r,n)=>{e.categoryMatches.push(km[n].tokenTypeIdx)})})}function AE(t){O(t,e=>{Nm([],e)})}function Nm(t,e){O(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),O(e.CATEGORIES,r=>{let n=t.concat(e);Ie(n,r)||Nm(n,r)})}function gf(t){return G(t,"tokenTypeIdx")}function Sm(t){return G(t,"CATEGORIES")}function $E(t){return G(t,"categoryMatches")}function SE(t){return G(t,"categoryMatchesMap")}function Cm(t){return G(t,"tokenTypeIdx")}var Vi={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,n,i,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var be=(function(t){return t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE",t})(be||{}),va={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Vi,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(va);var Ve=(()=>{class t{constructor(r,n=va){if(this.lexerDefinition=r,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(s,a)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${o}--> <${s}>`);let{time:c,value:l}=Ta(a),u=c>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${o}<-- <${s}> time: ${c}ms`),this.traceInitIndent--,l}else return a()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=lt({},va,n);let i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let s,a=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===va.lineTerminatorsPattern)this.config.lineTerminatorsPattern=vm;else if(this.config.lineTerminatorCharacters===va.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Je(r)?s={modes:{defaultMode:$e(r)},defaultMode:Bi}:(a=!1,s=$e(r))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(ym(s,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Tm(s,this.trackStartLines,this.config.lineTerminatorCharacters))})),s.modes=s.modes?s.modes:{},O(s.modes,(c,l)=>{s.modes[l]=bn(c,u=>Et(u))});let o=Or(s.modes);if(O(s.modes,(c,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(gm(c,o))}),Z(this.lexerDefinitionErrors)){Vr(c);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=mm(c,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=lt({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=s.defaultMode,!Z(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let l=I(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}O(this.lexerDefinitionWarning,c=>{ya(c.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(mf?(this.chopInput=hu,this.match=this.matchWithTest):(this.updateLastIndex=je,this.match=this.matchWithExec),a&&(this.handleModes=je),this.trackStartLines===!1&&(this.computeNewColumn=hu),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=je),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let c=Me(this.canModeBeOptimized,(l,u,p)=>(u===!1&&l.push(p),l),[]);if(n.ensureOptimizations&&!Z(c))throw Error(`Lexer Modes: < ${c.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{lm()}),this.TRACE_INIT("toFastProperties",()=>{Ra(this)})})}tokenize(r,n=this.defaultMode){if(!Z(this.lexerDefinitionErrors)){let s=I(this.lexerDefinitionErrors,a=>a.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+s)}return this.tokenizeInternal(r,n)}tokenizeInternal(r,n){let i,s,a,o,c,l,u,p,h,g,N,k,F,L,D,x,z=r,H=z.length,J=0,Ht=0,wt=this.hasCustom?0:Math.floor(r.length/10),It=new Array(wt),pr=[],S=this.trackStartLines?1:void 0,y=this.trackStartLines?1:void 0,b=Rm(this.emptyGroups),P=this.trackStartLines,T=this.config.lineTerminatorsPattern,E=0,A=[],_=[],M=[],C=[];Object.freeze(C);let K;function Q(){return A}function Ue(et){let bt=Er(et),tn=_[bt];return tn===void 0?C:tn}let fe=et=>{if(M.length===1&&et.tokenType.PUSH_MODE===void 0){let bt=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(et);pr.push({offset:et.startOffset,line:et.startLine,column:et.startColumn,length:et.image.length,message:bt})}else{M.pop();let bt=yr(M);A=this.patternIdxToConfig[bt],_=this.charCodeToPatternIdxToConfig[bt],E=A.length;let tn=this.canModeBeOptimized[bt]&&this.config.safeMode===!1;_&&tn?K=Ue:K=Q}};function _t(et){M.push(et),_=this.charCodeToPatternIdxToConfig[et],A=this.patternIdxToConfig[et],E=A.length,E=A.length;let bt=this.canModeBeOptimized[et]&&this.config.safeMode===!1;_&&bt?K=Ue:K=Q}_t.call(this,n);let Ye,Mo=this.config.recoveryEnabled;for(;J<H;){l=null;let et=z.charCodeAt(J),bt=K(et),tn=bt.length;for(i=0;i<tn;i++){Ye=bt[i];let Rt=Ye.pattern;u=null;let tt=Ye.short;if(tt!==!1?et===tt&&(l=Rt):Ye.isCustom===!0?(x=Rt.exec(z,J,It,b),x!==null?(l=x[0],x.payload!==void 0&&(u=x.payload)):l=null):(this.updateLastIndex(Rt,J),l=this.match(Rt,r,J)),l!==null){if(c=Ye.longerAlt,c!==void 0){let hr=c.length;for(a=0;a<hr;a++){let er=A[c[a]],Yt=er.pattern;if(p=null,er.isCustom===!0?(x=Yt.exec(z,J,It,b),x!==null?(o=x[0],x.payload!==void 0&&(p=x.payload)):o=null):(this.updateLastIndex(Yt,J),o=this.match(Yt,r,J)),o&&o.length>l.length){l=o,u=p,Ye=er;break}}}break}}if(l!==null){if(h=l.length,g=Ye.group,g!==void 0&&(N=Ye.tokenTypeIdx,k=this.createTokenInstance(l,J,N,Ye.tokenType,S,y,h),this.handlePayload(k,u),g===!1?Ht=this.addToken(It,Ht,k):b[g].push(k)),r=this.chopInput(r,h),J=J+h,y=this.computeNewColumn(y,h),P===!0&&Ye.canLineTerminator===!0){let Rt=0,tt,hr;T.lastIndex=0;do tt=T.test(l),tt===!0&&(hr=T.lastIndex-1,Rt++);while(tt===!0);Rt!==0&&(S=S+Rt,y=h-hr,this.updateTokenEndLineColumnLocation(k,g,hr,Rt,S,y,h))}this.handleModes(Ye,fe,_t,k)}else{let Rt=J,tt=S,hr=y,er=Mo===!1;for(;er===!1&&J<H;)for(r=this.chopInput(r,1),J++,s=0;s<E;s++){let Yt=A[s],Vs=Yt.pattern,Ei=Yt.short;if(Ei!==!1?z.charCodeAt(J)===Ei&&(er=!0):Yt.isCustom===!0?er=Vs.exec(z,J,It,b)!==null:(this.updateLastIndex(Vs,J),er=Vs.exec(r)!==null),er===!0)break}if(F=J-Rt,y=this.computeNewColumn(y,F),D=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(z,Rt,F,tt,hr,yr(M)),pr.push({offset:Rt,line:tt,column:hr,length:F,message:D}),Mo===!1)break}}return this.hasCustom||(It.length=Ht),{tokens:It,groups:b,errors:pr}}handleModes(r,n,i,s){if(r.pop===!0){let a=r.push;n(s),a!==void 0&&i.call(this,a)}else r.push!==void 0&&i.call(this,r.push)}chopInput(r,n){return r.substring(n)}updateLastIndex(r,n){r.lastIndex=n}updateTokenEndLineColumnLocation(r,n,i,s,a,o,c){let l,u;n!==void 0&&(l=i===c-1,u=l?-1:0,s===1&&l===!0||(r.endLine=a+u,r.endColumn=o-1+-u))}computeNewColumn(r,n){return r+n}createOffsetOnlyToken(r,n,i,s){return{image:r,startOffset:n,tokenTypeIdx:i,tokenType:s}}createStartOnlyToken(r,n,i,s,a,o){return{image:r,startOffset:n,startLine:a,startColumn:o,tokenTypeIdx:i,tokenType:s}}createFullToken(r,n,i,s,a,o,c){return{image:r,startOffset:n,endOffset:n+c-1,startLine:a,endLine:a,startColumn:o,endColumn:o+c-1,tokenTypeIdx:i,tokenType:s}}addTokenUsingPush(r,n,i){return r.push(i),n}addTokenUsingMemberAccess(r,n,i){return r[n]=i,n++,n}handlePayloadNoCustom(r,n){}handlePayloadWithCustom(r,n){n!==null&&(r.payload=n)}matchWithTest(r,n,i){return r.test(n)===!0?n.substring(i,r.lastIndex):null}matchWithExec(r,n){let i=r.exec(n);return i!==null?i[0]:null}}return t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t})();function Kr(t){return yf(t)?t.LABEL:t.name}function yf(t){return dt(t.LABEL)&&t.LABEL!==""}var kE="parent",wm="categories",Im="label",_m="group",bm="push_mode",Pm="pop_mode",Om="longer_alt",Lm="line_breaks",Dm="start_chars_hint";function yn(t){return NE(t)}function NE(t){let e=t.pattern,r={};if(r.name=t.name,Et(e)||(r.PATTERN=e),G(t,kE))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return G(t,wm)&&(r.CATEGORIES=t[wm]),Vr([r]),G(t,Im)&&(r.LABEL=t[Im]),G(t,_m)&&(r.GROUP=t[_m]),G(t,Pm)&&(r.POP_MODE=t[Pm]),G(t,bm)&&(r.PUSH_MODE=t[bm]),G(t,Om)&&(r.LONGER_ALT=t[Om]),G(t,Lm)&&(r.LINE_BREAKS=t[Lm]),G(t,Dm)&&(r.START_CHARS_HINT=t[Dm]),r}var Wt=yn({name:"EOF",pattern:Ve.NA});Vr([Wt]);function Hr(t,e,r,n,i,s,a,o){return{image:e,startOffset:r,endOffset:n,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function Ea(t,e){return Wr(t,e)}var Yr={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:n}){return`Expecting ${yf(t)?`--> ${Kr(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:i}){let s="Expecting: ",o=`
but found: '`+ut(e).image+"'";if(n)return s+n+o;{let c=Me(t,(h,g)=>h.concat(g),[]),l=I(c,h=>`[${I(h,g=>Kr(g)).join(", ")}]`),p=`one of these possible Token sequences:
${I(l,(h,g)=>`  ${g+1}. ${h}`).join(`
`)}`;return s+p+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){let i="Expecting: ",a=`
but found: '`+ut(e).image+"'";if(r)return i+r+a;{let c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${I(t,l=>`[${I(l,u=>Kr(u)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(Yr);var Mm={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},lr={buildDuplicateFoundError(t,e){function r(u){return u instanceof te?u.terminalType.name:u instanceof de?u.nonTerminalName:""}let n=t.name,i=ut(e),s=i.idx,a=Lt(i),o=r(i),c=s>0,l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=I(t.prefixPath,i=>Kr(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=I(t.prefixPath,i=>Kr(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx,n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Lt(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,r=I(t.leftRecursionPath,s=>s.name),n=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof St?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function Fm(t,e){let r=new Tf(t,e);return r.resolveRefs(),r.errors}var Tf=class extends kt{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){O(Se(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:nt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var Rf=class extends Br{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=$e(this.path.ruleStack).reverse(),this.occurrenceStack=$e(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){Z(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},vc=class extends Rf{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=r.concat(n),s=new Re({definition:i});this.possibleTokTypes=Zn(s),this.found=!0}}},Ki=class extends Br{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Ec=class extends Ki{walkMany(e,r,n){if(e.idx===this.occurrence){let i=ut(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof te&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,r,n)}},Aa=class extends Ki{walkManySep(e,r,n){if(e.idx===this.occurrence){let i=ut(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof te&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,r,n)}},Ac=class extends Ki{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){let i=ut(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof te&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,r,n)}},$a=class extends Ki{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){let i=ut(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof te&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,r,n)}};function $c(t,e,r=[]){r=$e(r);let n=[],i=0;function s(o){return o.concat(We(t,i+1))}function a(o){let c=$c(s(o),e,r);return n.concat(c)}for(;r.length<e&&i<t.length;){let o=t[i];if(o instanceof Re)return a(o.definition);if(o instanceof de)return a(o.definition);if(o instanceof pe)n=a(o.definition);else if(o instanceof xe){let c=o.definition.concat([new se({definition:o.definition})]);return a(c)}else if(o instanceof ve){let c=[new Re({definition:o.definition}),new se({definition:[new te({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof ye){let c=o.definition.concat([new se({definition:[new te({terminalType:o.separator})].concat(o.definition)})]);n=a(c)}else if(o instanceof se){let c=o.definition.concat([new se({definition:o.definition})]);n=a(c)}else{if(o instanceof Te)return O(o.definition,c=>{Z(c.definition)===!1&&(n=a(c.definition))}),n;if(o instanceof te)r.push(o.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:We(t,i)}),n}function Sc(t,e,r,n){let i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE",o=!1,c=e.length,l=c-n-1,u=[],p=[];for(p.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Z(p);){let h=p.pop();if(h===a){o&&yr(p).idx<=l&&p.pop();continue}let g=h.def,N=h.idx,k=h.ruleStack,F=h.occurrenceStack;if(Z(g))continue;let L=g[0];if(L===i){let D={idx:N,def:We(g),ruleStack:nn(k),occurrenceStack:nn(F)};p.push(D)}else if(L instanceof te)if(N<c-1){let D=N+1,x=e[D];if(r(x,L.terminalType)){let z={idx:D,def:We(g),ruleStack:k,occurrenceStack:F};p.push(z)}}else if(N===c-1)u.push({nextTokenType:L.terminalType,nextTokenOccurrence:L.idx,ruleStack:k,occurrenceStack:F}),o=!0;else throw Error("non exhaustive match");else if(L instanceof de){let D=$e(k);D.push(L.nonTerminalName);let x=$e(F);x.push(L.idx);let z={idx:N,def:L.definition.concat(s,We(g)),ruleStack:D,occurrenceStack:x};p.push(z)}else if(L instanceof pe){let D={idx:N,def:We(g),ruleStack:k,occurrenceStack:F};p.push(D),p.push(a);let x={idx:N,def:L.definition.concat(We(g)),ruleStack:k,occurrenceStack:F};p.push(x)}else if(L instanceof xe){let D=new se({definition:L.definition,idx:L.idx}),x=L.definition.concat([D],We(g)),z={idx:N,def:x,ruleStack:k,occurrenceStack:F};p.push(z)}else if(L instanceof ve){let D=new te({terminalType:L.separator}),x=new se({definition:[D].concat(L.definition),idx:L.idx}),z=L.definition.concat([x],We(g)),H={idx:N,def:z,ruleStack:k,occurrenceStack:F};p.push(H)}else if(L instanceof ye){let D={idx:N,def:We(g),ruleStack:k,occurrenceStack:F};p.push(D),p.push(a);let x=new te({terminalType:L.separator}),z=new se({definition:[x].concat(L.definition),idx:L.idx}),H=L.definition.concat([z],We(g)),J={idx:N,def:H,ruleStack:k,occurrenceStack:F};p.push(J)}else if(L instanceof se){let D={idx:N,def:We(g),ruleStack:k,occurrenceStack:F};p.push(D),p.push(a);let x=new se({definition:L.definition,idx:L.idx}),z=L.definition.concat([x],We(g)),H={idx:N,def:z,ruleStack:k,occurrenceStack:F};p.push(H)}else if(L instanceof Te)for(let D=L.definition.length-1;D>=0;D--){let x=L.definition[D],z={idx:N,def:x.definition.concat(We(g)),ruleStack:k,occurrenceStack:F};p.push(z),p.push(a)}else if(L instanceof Re)p.push({idx:N,def:L.definition.concat(We(g)),ruleStack:k,occurrenceStack:F});else if(L instanceof St)p.push(CE(L,N,k,F));else throw Error("non exhaustive match")}return u}function CE(t,e,r,n){let i=$e(r);i.push(t.name);let s=$e(n);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var Pe=(function(t){return t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION",t})(Pe||{});function Sa(t){if(t instanceof pe||t==="Option")return Pe.OPTION;if(t instanceof se||t==="Repetition")return Pe.REPETITION;if(t instanceof xe||t==="RepetitionMandatory")return Pe.REPETITION_MANDATORY;if(t instanceof ve||t==="RepetitionMandatoryWithSeparator")return Pe.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof ye||t==="RepetitionWithSeparator")return Pe.REPETITION_WITH_SEPARATOR;if(t instanceof Te||t==="Alternation")return Pe.ALTERNATION;throw Error("non exhaustive match")}function Nc(t){let{occurrence:e,rule:r,prodType:n,maxLookahead:i}=t,s=Sa(n);return s===Pe.ALTERNATION?Hi(e,r,i):Yi(e,r,s,i)}function Um(t,e,r,n,i,s){let a=Hi(t,e,r),o=Vm(a)?Wi:Wr;return s(a,n,o,i)}function qm(t,e,r,n,i,s){let a=Yi(t,e,i,r),o=Vm(a)?Wi:Wr;return s(a[0],o,n)}function zm(t,e,r,n){let i=t.length,s=vt(t,a=>vt(a,o=>o.length===1));if(e)return function(a){let o=I(a,c=>c.GATE);for(let c=0;c<i;c++){let l=t[c],u=l.length,p=o[c];if(!(p!==void 0&&p.call(this)===!1))e:for(let h=0;h<u;h++){let g=l[h],N=g.length;for(let k=0;k<N;k++){let F=this.LA(k+1);if(r(F,g[k])===!1)continue e}return c}}};if(s&&!n){let a=I(t,c=>Be(c)),o=Me(a,(c,l,u)=>(O(l,p=>{G(c,p.tokenTypeIdx)||(c[p.tokenTypeIdx]=u),O(p.categoryMatches,h=>{G(c,h)||(c[h]=u)})}),c),{});return function(){let c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){let o=t[a],c=o.length;e:for(let l=0;l<c;l++){let u=o[l],p=u.length;for(let h=0;h<p;h++){let g=this.LA(h+1);if(r(g,u[h])===!1)continue e}return a}}}}function jm(t,e,r){let n=vt(t,s=>s.length===1),i=t.length;if(n&&!r){let s=Be(t);if(s.length===1&&Z(s[0].categoryMatches)){let o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{let a=Me(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,O(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){let o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){let a=t[s],o=a.length;for(let c=0;c<o;c++){let l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}var vf=class extends Br{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,i){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(e,r,n){this.checkIsTarget(e,Pe.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,Pe.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,Pe.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,Pe.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,Pe.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}},kc=class extends kt{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Pe.OPTION)}visitRepetition(e){this.checkIsTarget(e,Pe.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Pe.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Pe.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Pe.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Pe.ALTERNATION)}};function Gm(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function xf(t){let e=[""];for(let r=0;r<t.length;r++){let n=t[r],i=[];for(let s=0;s<e.length;s++){let a=e[s];i.push(a+"_"+n.tokenTypeIdx);for(let o=0;o<n.categoryMatches.length;o++){let c="_"+n.categoryMatches[o];i.push(a+c)}}e=i}return e}function wE(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;let i=t[n];for(let s=0;s<e.length;s++){let a=e[s];if(i[a]===!0)return!1}}return!0}function Bm(t,e){let r=I(t,a=>$c([a],1)),n=Gm(r.length),i=I(r,a=>{let o={};return O(a,c=>{let l=xf(c.partialPath);O(l,u=>{o[u]=!0})}),o}),s=r;for(let a=1;a<=e;a++){let o=s;s=Gm(o.length);for(let c=0;c<o.length;c++){let l=o[c];for(let u=0;u<l.length;u++){let p=l[u].partialPath,h=l[u].suffixDef,g=xf(p);if(wE(i,g,c)||Z(h)||p.length===e){let k=n[c];if(Cc(k,p)===!1){k.push(p);for(let F=0;F<g.length;F++){let L=g[F];i[c][L]=!0}}}else{let k=$c(h,a+1,p);s[c]=s[c].concat(k),O(k,F=>{let L=xf(F.partialPath);O(L,D=>{i[c][D]=!0})})}}}}return n}function Hi(t,e,r,n){let i=new kc(t,Pe.ALTERNATION,n);return e.accept(i),Bm(i.result,r)}function Yi(t,e,r,n){let i=new kc(t,r);e.accept(i);let s=i.result,o=new vf(e,t,r).startWalking(),c=new Re({definition:s}),l=new Re({definition:o});return Bm([c,l],n)}function Cc(t,e){e:for(let r=0;r<t.length;r++){let n=t[r];if(n.length===e.length){for(let i=0;i<n.length;i++){let s=e[i],a=n[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Wm(t,e){return t.length<e.length&&vt(t,(r,n)=>{let i=e[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Vm(t){return vt(t,e=>vt(e,r=>vt(r,n=>Z(n.categoryMatches))))}function Km(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return I(e,r=>Object.assign({type:nt.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Hm(t,e,r,n){let i=ft(t,c=>IE(c,r)),s=DE(t,e,r),a=ft(t,c=>PE(c,r)),o=ft(t,c=>bE(c,t,n,r));return i.concat(s,a,o)}function IE(t,e){let r=new Ef;t.accept(r);let n=r.allProductions,i=qh(n,_E),s=Ut(i,o=>o.length>1);return I(Se(s),o=>{let c=ut(o),l=e.buildDuplicateFoundError(t,o),u=Lt(c),p={message:l,type:nt.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:u,occurrence:c.idx},h=Ym(c);return h&&(p.parameter=h),p})}function _E(t){return`${Lt(t)}_#_${t.idx}_#_${Ym(t)}`}function Ym(t){return t instanceof te?t.terminalType.name:t instanceof de?t.nonTerminalName:""}var Ef=class extends kt{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function bE(t,e,r,n){let i=[];if(Me(e,(a,o)=>o.name===t.name?a+1:a,0)>1){let a=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});i.push({message:a,type:nt.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function Xm(t,e,r){let n=[],i;return Ie(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:nt.INVALID_RULE_OVERRIDE,ruleName:t})),n}function $f(t,e,r,n=[]){let i=[],s=wc(e.definition);if(Z(s))return[];{let a=t.name;Ie(s,t)&&i.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:nt.LEFT_RECURSION,ruleName:a});let c=_n(s,n.concat([t])),l=ft(c,u=>{let p=$e(n);return p.push(u),$f(t,u,r,p)});return i.concat(l)}}function wc(t){let e=[];if(Z(t))return e;let r=ut(t);if(r instanceof de)e.push(r.referencedRule);else if(r instanceof Re||r instanceof pe||r instanceof xe||r instanceof ve||r instanceof ye||r instanceof se)e=e.concat(wc(r.definition));else if(r instanceof Te)e=Be(I(r.definition,s=>wc(s.definition)));else if(!(r instanceof te))throw Error("non exhaustive match");let n=Qn(r),i=t.length>1;if(n&&i){let s=We(t);return e.concat(wc(s))}else return e}var ka=class extends kt{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function Jm(t,e){let r=new ka;t.accept(r);let n=r.alternations;return ft(n,s=>{let a=nn(s.definition);return ft(a,(o,c)=>{let l=Sc([o],[],Wr,1);return Z(l)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:c}),type:nt.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:c+1}]:[]})})}function Qm(t,e,r){let n=new ka;t.accept(n);let i=n.alternations;return i=bn(i,a=>a.ignoreAmbiguities===!0),ft(i,a=>{let o=a.idx,c=a.maxLookahead||e,l=Hi(o,t,c,a),u=OE(l,a,t,r),p=LE(l,a,t,r);return u.concat(p)})}var Af=class extends kt{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function PE(t,e){let r=new ka;t.accept(r);let n=r.alternations;return ft(n,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:nt.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function Zm(t,e,r){let n=[];return O(t,i=>{let s=new Af;i.accept(s);let a=s.allProductions;O(a,o=>{let c=Sa(o),l=o.maxLookahead||e,u=o.idx,h=Yi(u,i,c,l)[0];if(Z(Be(h))){let g=r.buildEmptyRepetitionError({topLevelRule:i,repetition:o});n.push({message:g,type:nt.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function OE(t,e,r,n){let i=[],s=Me(t,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||O(c,u=>{let p=[l];O(t,(h,g)=>{l!==g&&Cc(h,u)&&e.definition[g].ignoreAmbiguities!==!0&&p.push(g)}),p.length>1&&!Cc(i,u)&&(i.push(u),o.push({alts:p,path:u}))}),o),[]);return I(s,o=>{let c=I(o.alts,u=>u+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:nt.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:o.alts}})}function LE(t,e,r,n){let i=Me(t,(a,o,c)=>{let l=I(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return Lr(ft(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];let c=a.idx,l=a.path,u=at(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<c&&Wm(h.path,l));return I(u,h=>{let g=[h.idx+1,c+1],N=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:g,prefixPath:h.path}),type:nt.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:N,alternatives:g}})}))}function DE(t,e,r){let n=[],i=I(e,s=>s.name);return O(t,s=>{let a=s.name;if(Ie(i,a)){let o=r.buildNamespaceConflictError(s);n.push({message:o,type:nt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),n}function eg(t){let e=Ys(t,{errMsgProvider:Mm}),r={};return O(t.rules,n=>{r[n.name]=n}),Fm(r,e.errMsgProvider)}function tg(t){return t=Ys(t,{errMsgProvider:lr}),Hm(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var rg="MismatchedTokenException",ng="NoViableAltException",ig="EarlyExitException",sg="NotAllInputParsedException",ag=[rg,ng,ig,sg];Object.freeze(ag);function Tn(t){return Ie(ag,t.name)}var Xi=class extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},ti=class extends Xi{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=rg}},Na=class extends Xi{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=ng}},Ca=class extends Xi{constructor(e,r){super(e,r),this.name=sg}},wa=class extends Xi{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=ig}};var Sf={},Nf="InRuleRecoveryException",kf=class extends Error{constructor(e){super(e),this.name=Nf}},Ic=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=G(e,"recoveryEnabled")?e.recoveryEnabled:Nt.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=ME)}getTokenToInsert(e){let r=Hr(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,i){let s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[],c=!1,l=this.LA(1),u=this.LA(1),p=()=>{let h=this.LA(0),g=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:h,ruleName:this.getCurrRuleFullName()}),N=new ti(g,l,this.LA(0));N.resyncedTokens=nn(o),this.SAVE_ERROR(N)};for(;!c;)if(this.tokenMatcher(u,i)){p();return}else if(n.call(this)){p(),e.apply(this,r);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){let n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new kf("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||Z(r))return!1;let n=this.LA(1);return Dr(r,s=>this.tokenMatcher(n,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return Ie(n,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),r=this.LA(1),n=2;for(;;){let i=Dr(e,s=>Ea(r,s));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Sf;let e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return I(e,(n,i)=>i===0?Sf:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=I(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return Be(e)}getFollowSetFromFollowKey(e){if(e===Sf)return[Wt];let r=e.ruleName+e.idxInCallingRule+mc+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,Wt)||r.push(e),r}reSyncTo(e){let r=[],n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return nn(r)}attemptInRepetitionRecovery(e,r,n,i,s,a,o){}getCurrentGrammarPath(e,r){let n=this.getHumanReadableRuleStack(),i=$e(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return I(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function ME(t,e,r,n,i,s,a){let o=this.getKeyForAutomaticLookahead(n,i),c=this.firstAfterRepMap[o];if(c===void 0){let h=this.getCurrRuleFullName(),g=this.getGAstProductions()[h];c=new s(g,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence,p=c.isEndOfRule;this.RULE_STACK.length===1&&p&&l===void 0&&(l=Wt,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(t,e,r,l)}function _c(t,e,r){return r|e|t}var Xr=class{constructor(e){var r;this.maxLookahead=(r=e?.maxLookahead)!==null&&r!==void 0?r:Nt.maxLookahead}validate(e){let r=this.validateNoLeftRecursion(e.rules);if(Z(r)){let n=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...i,...s]}return r}validateNoLeftRecursion(e){return ft(e,r=>$f(r,r,lr))}validateEmptyOrAlternatives(e){return ft(e,r=>Jm(r,lr))}validateAmbiguousAlternationAlternatives(e,r){return ft(e,n=>Qm(n,r,lr))}validateSomeNonEmptyLookaheadPath(e,r){return Zm(e,r,lr)}buildLookaheadForAlternation(e){return Um(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,zm)}buildLookaheadForOptional(e){return qm(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Sa(e.prodType),jm)}};var Pc=class{initLooksAhead(e){this.dynamicTokensEnabled=G(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Nt.dynamicTokensEnabled,this.maxLookahead=G(e,"maxLookahead")?e.maxLookahead:Nt.maxLookahead,this.lookaheadStrategy=G(e,"lookaheadStrategy")?e.lookaheadStrategy:new Xr({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){O(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:n,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=FE(r);O(n,l=>{let u=l.idx===0?"":l.idx;this.TRACE_INIT(`${Lt(l)}${u}`,()=>{let p=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=_c(this.fullRuleNameToShort[r.name],256,l.idx);this.setLaFuncCache(h,p)})}),O(i,l=>{this.computeLookaheadFunc(r,l.idx,768,"Repetition",l.maxLookahead,Lt(l))}),O(s,l=>{this.computeLookaheadFunc(r,l.idx,512,"Option",l.maxLookahead,Lt(l))}),O(a,l=>{this.computeLookaheadFunc(r,l.idx,1024,"RepetitionMandatory",l.maxLookahead,Lt(l))}),O(o,l=>{this.computeLookaheadFunc(r,l.idx,1536,"RepetitionMandatoryWithSeparator",l.maxLookahead,Lt(l))}),O(c,l=>{this.computeLookaheadFunc(r,l.idx,1280,"RepetitionWithSeparator",l.maxLookahead,Lt(l))})})})}computeLookaheadFunc(e,r,n,i,s,a){this.TRACE_INIT(`${a}${r===0?"":r}`,()=>{let o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=_c(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,r){let n=this.getLastExplicitRuleShortName();return _c(n,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}},Cf=class extends kt{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},bc=new Cf;function FE(t){bc.reset(),t.accept(bc);let e=bc.dslMethods;return bc.reset(),e}function _f(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function bf(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function og(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function cg(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}var GE="name";function Pf(t,e){Object.defineProperty(t,GE,{enumerable:!1,configurable:!0,writable:!1,value:e})}function UE(t,e){let r=Or(t),n=r.length;for(let i=0;i<n;i++){let s=r[i],a=t[s],o=a.length;for(let c=0;c<o;c++){let l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function lg(t,e){let r=function(){};Pf(r,t+"BaseSemantics");let n={visit:function(i,s){if(Je(i)&&(i=i[0]),!Et(i))return this[i.name](i.children,s)},validateVisitor:function(){let i=qE(this,e);if(!Z(i)){let s=I(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function ug(t,e,r){let n=function(){};Pf(n,t+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return O(e,s=>{i[s]=UE}),n.prototype=i,n.prototype.constructor=n,n}var fg=(function(t){return t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD",t})(fg||{});function qE(t,e){return zE(t,e)}function zE(t,e){let r=at(e,i=>gr(t[i])===!1),n=I(r,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:fg.MISSING_METHOD,methodName:i}));return Lr(n)}var Mc=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=G(e,"nodeLocationTracking")?e.nodeLocationTracking:Nt.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=je,this.cstFinallyStateUpdate=je,this.cstPostTerminal=je,this.cstPostNonTerminal=je,this.cstPostRule=je;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=bf,this.setNodeLocationFromNode=bf,this.cstPostRule=je,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=je,this.setNodeLocationFromNode=je,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=_f,this.setNodeLocationFromNode=_f,this.cstPostRule=je,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=je,this.setNodeLocationFromNode=je,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=je,this.setNodeLocationFromNode=je,this.cstPostRule=je,this.setInitialNodeLocation=je;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];og(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];cg(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(Et(this.baseCstVisitorConstructor)){let e=lg(this.className,Or(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Et(this.baseCstVisitorWithDefaultsConstructor)){let e=ug(this.className,Or(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var Fc=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Ji}LA(e){let r=this.currIdx+e;return r<0||this.tokVectorLength<=r?Ji:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var Gc=class{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=Qi){if(Ie(this.definedRulesNames,e)){let a={message:lr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:nt.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);let i=this.defineRule(e,r,n);return this[e]=i,i}OVERRIDE_RULE(e,r,n=Qi){let i=Xm(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let s=this.defineRule(e,r,n);return this[e]=s,s}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return e.apply(this,r),!0}catch(i){if(Tn(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return hc(Se(this.gastProductionsCache))}};var Uc=class{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Wi,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},G(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Je(e)){if(Z(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Je(e))this.tokensMap=Me(e,(s,a)=>(s[a.name]=a,s),{});else if(G(e,"modes")&&vt(Be(Se(e.modes)),Cm)){let s=Be(Se(e.modes)),a=Xs(s);this.tokensMap=Me(a,(o,c)=>(o[c.name]=c,o),{})}else if(Uh(e))this.tokensMap=$e(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Wt;let n=G(e,"modes")?Be(Se(e.modes)):Se(e),i=vt(n,s=>Z(s.categoryMatches));this.tokenMatcher=i?Wi:Wr,Vr(Se(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=G(n,"resyncEnabled")?n.resyncEnabled:Qi.resyncEnabled,s=G(n,"recoveryValueFunc")?n.recoveryValueFunc:Qi.recoveryValueFunc,a=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),r.apply(this,u);let p=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(p),p}catch(p){return this.invokeRuleCatch(p,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),r.apply(this,u)}catch(p){return this.invokeRuleCatch(p,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){let i=this.RULE_STACK.length===1,s=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Tn(e)){let a=e;if(s){let o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){let c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return n(e);else{if(this.outputCst){let c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),n(e);throw a}}else throw e}optionInternal(e,r){let n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof e!="function"){s=e.DEF;let a=e.GATE;if(a!==void 0){let o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,r){let n=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;let a=r.GATE;if(a!==void 0){let o=i;i=()=>a.call(this)&&o.call(this)}}else s=r;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Pe.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],i,1024,e,Ac)}atLeastOneSepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){let i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,$a],o,1536,e,$a)}else throw this.raiseEarlyExitException(e,Pe.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){let n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;let o=r.GATE;if(o!==void 0){let c=i;i=()=>o.call(this)&&c.call(this)}}else s=r;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],i,768,e,Ec,a)}manySepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){let i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,Aa],o,1280,e,Aa)}}repetitionSepSecondInternal(e,r,n,i,s){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,i,s],n,1536,e,s)}doSingleRepetition(e){let r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){let n=this.getKeyForAutomaticLookahead(256,r),i=Je(e)?e:e.DEF,a=this.getLaFuncFromCache(n).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Ca(r,e))}}subruleInternal(e,r,n){let i;try{let s=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=e.apply(this,s),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,n,e.ruleName)}}subruleInternalError(e,r,n){throw Tn(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let i;try{let s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,n)}catch(s){i=this.consumeInternalRecovery(e,r,s)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,i),i}consumeInternalError(e,r,n){let i,s=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ti(i,r,s))}consumeInternalRecovery(e,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Nf?n:s}}else throw n}saveRecogState(){let e=this.errors,r=$e(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Wt)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var qc=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=G(e,"errorMessageProvider")?e.errorMessageProvider:Nt.errorMessageProvider}SAVE_ERROR(e){if(Tn(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:$e(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return $e(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){let i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=Yi(e,s,r,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));let l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new wa(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){let n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],s=Hi(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));let o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Na(c,this.LA(1),o))}};var zc=class{initContentAssist(){}computeContentAssist(e,r){let n=this.gastProductionsCache[e];if(Et(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Sc([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let r=ut(e.ruleStack),i=this.getGAstProductions()[r];return new vc(i,e).startWalking()}};var Wc={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Wc);var dg=!0,pg=Math.pow(2,8)-1,mg=yn({name:"RECORDING_PHASE_TOKEN",pattern:Ve.NA});Vr([mg]);var gg=Hr(mg,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(gg);var BE={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},jc=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let r=e>0?e:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,e,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,e,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let r=0;r<10;r++){let n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return Ji}topLevelRuleRecord(e,r){try{let n=new St({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return _a.call(this,pe,e,r)}atLeastOneInternalRecord(e,r){_a.call(this,xe,r,e)}atLeastOneSepFirstInternalRecord(e,r){_a.call(this,ve,r,e,dg)}manyInternalRecord(e,r){_a.call(this,se,r,e)}manySepFirstInternalRecord(e,r){_a.call(this,ye,r,e,dg)}orInternalRecord(e,r){return WE.call(this,e,r)}subruleInternalRecord(e,r,n){if(Bc(r),!e||G(e,"ruleName")===!1){let o=new Error(`<SUBRULE${hg(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}let i=yr(this.recordingProdStack),s=e.ruleName,a=new de({idx:r,nonTerminalName:s,label:n?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?BE:Wc}consumeInternalRecord(e,r,n){if(Bc(r),!gf(e)){let a=new Error(`<CONSUME${hg(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let i=yr(this.recordingProdStack),s=new te({idx:r,terminalType:e,label:n?.LABEL});return i.definition.push(s),gg}};function _a(t,e,r,n=!1){Bc(r);let i=yr(this.recordingProdStack),s=gr(e)?e:e.DEF,a=new t({definition:[],idx:r});return n&&(a.separator=e.SEP),G(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),Wc}function WE(t,e){Bc(e);let r=yr(this.recordingProdStack),n=Je(t)===!1,i=n===!1?t:t.DEF,s=new Te({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});G(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);let a=Fo(i,o=>gr(o.GATE));return s.hasPredicates=a,r.definition.push(s),O(i,o=>{let c=new Re({definition:[]});s.definition.push(c),G(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:G(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),Wc}function hg(t){return t===0?"":`${t}`}function Bc(t){if(t<0||t>pg){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${pg+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var Vc=class{initPerformanceTracer(e){if(G(e,"traceInitPerf")){let r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=Nt.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);let{time:i,value:s}=Ta(r),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${n}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return r()}};function yg(t,e){e.forEach(r=>{let n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;let s=Object.getOwnPropertyDescriptor(n,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=r.prototype[i]})})}var Ji=Hr(Wt,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Ji);var Nt=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Yr,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Qi=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),nt=(function(t){return t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION",t})(nt||{});function Kc(t=void 0){return function(){return t}}var Tg=(()=>{class t{static performSelfAnalysis(r){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let r;this.selfAnalysisDone=!0;let n=this.className;this.TRACE_INIT("toFastProps",()=>{Ra(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),O(this.definedRulesNames,s=>{let o=this[s].originalGrammarAction,c;this.TRACE_INIT(`${s} Rule`,()=>{c=this.topLevelRuleRecord(s,o)}),this.gastProductionsCache[s]=c})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=eg({rules:Se(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(Z(i)&&this.skipValidations===!1){let s=tg({rules:Se(this.gastProductionsCache),tokenTypes:Se(this.tokensMap),errMsgProvider:lr,grammarName:n}),a=Km({lookaheadStrategy:this.lookaheadStrategy,rules:Se(this.gastProductionsCache),tokenTypes:Se(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(s,a)}}),Z(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let s=cm(Se(this.gastProductionsCache));this.resyncFollows=s}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var s,a;(a=(s=this.lookaheadStrategy).initialize)===null||a===void 0||a.call(s,{rules:Se(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Se(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!Z(this.definitionErrors))throw r=I(this.definitionErrors,s=>s.message),new Error(`Parser Definition Errors detected:
 ${r.join(`
-------------------------------
`)}`)})}constructor(r,n){this.definitionErrors=[],this.selfAnalysisDone=!1;let i=this;if(i.initErrorHandler(n),i.initLexerAdapter(),i.initLooksAhead(n),i.initRecognizerEngine(r,n),i.initRecoverable(n),i.initTreeBuilder(n),i.initContentAssist(),i.initGastRecorder(n),i.initPerformanceTracer(n),G(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=G(n,"skipValidations")?n.skipValidations:Nt.skipValidations}}return t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t})();yg(Tg,[Ic,Pc,Mc,Fc,Uc,Gc,qc,zc,jc,Vc]);var ba=class extends Tg{constructor(e,r=Nt){let n=$e(r);n.outputCst=!1,super(e,n)}};function ri(t,e,r){return`${t.name}_${e}_${r}`}var Rn=1,KE=2,Rg=4,xg=5;var ts=7,HE=8,YE=9,XE=10,JE=11,vg=12,Pa=class{constructor(e){this.target=e}isEpsilon(){return!1}},Zi=class extends Pa{constructor(e,r){super(e),this.tokenType=r}},Oa=class extends Pa{constructor(e){super(e)}isEpsilon(){return!0}},es=class extends Pa{constructor(e,r,n){super(e),this.rule=r,this.followState=n}isEpsilon(){return!0}};function Eg(t){let e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};QE(e,t);let r=t.length;for(let n=0;n<r;n++){let i=t[n],s=ni(e,i,i);s!==void 0&&lA(e,i,s)}return e}function QE(t,e){let r=e.length;for(let n=0;n<r;n++){let i=e[n],s=it(t,i,void 0,{type:KE}),a=it(t,i,void 0,{type:ts});s.stop=a,t.ruleToStartState.set(i,s),t.ruleToStopState.set(i,a)}}function Ag(t,e,r){return r instanceof te?Lf(t,e,r.terminalType,r):r instanceof de?cA(t,e,r):r instanceof Te?nA(t,e,r):r instanceof pe?iA(t,e,r):r instanceof se?ZE(t,e,r):r instanceof ye?eA(t,e,r):r instanceof xe?tA(t,e,r):r instanceof ve?rA(t,e,r):ni(t,e,r)}function ZE(t,e,r){let n=it(t,e,r,{type:xg});xn(t,n);let i=rs(t,e,n,r,ni(t,e,r));return Sg(t,e,r,i)}function eA(t,e,r){let n=it(t,e,r,{type:xg});xn(t,n);let i=rs(t,e,n,r,ni(t,e,r)),s=Lf(t,e,r.separator,r);return Sg(t,e,r,i,s)}function tA(t,e,r){let n=it(t,e,r,{type:Rg});xn(t,n);let i=rs(t,e,n,r,ni(t,e,r));return $g(t,e,r,i)}function rA(t,e,r){let n=it(t,e,r,{type:Rg});xn(t,n);let i=rs(t,e,n,r,ni(t,e,r)),s=Lf(t,e,r.separator,r);return $g(t,e,r,i,s)}function nA(t,e,r){let n=it(t,e,r,{type:Rn});xn(t,n);let i=I(r.definition,a=>Ag(t,e,a));return rs(t,e,n,r,...i)}function iA(t,e,r){let n=it(t,e,r,{type:Rn});xn(t,n);let i=rs(t,e,n,r,ni(t,e,r));return sA(t,e,r,i)}function ni(t,e,r){let n=at(I(r.definition,i=>Ag(t,e,i)),i=>i!==void 0);return n.length===1?n[0]:n.length===0?void 0:oA(t,n)}function $g(t,e,r,n,i){let s=n.left,a=n.right,o=it(t,e,r,{type:JE});xn(t,o);let c=it(t,e,r,{type:vg});return s.loopback=o,c.loopback=o,t.decisionMap[ri(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=o,Ke(a,o),i===void 0?(Ke(o,s),Ke(o,c)):(Ke(o,c),Ke(o,i.left),Ke(i.right,s)),{left:s,right:c}}function Sg(t,e,r,n,i){let s=n.left,a=n.right,o=it(t,e,r,{type:XE});xn(t,o);let c=it(t,e,r,{type:vg}),l=it(t,e,r,{type:YE});return o.loopback=l,c.loopback=l,Ke(o,s),Ke(o,c),Ke(a,l),i!==void 0?(Ke(l,c),Ke(l,i.left),Ke(i.right,s)):Ke(l,o),t.decisionMap[ri(e,i?"RepetitionWithSeparator":"Repetition",r.idx)]=o,{left:o,right:c}}function sA(t,e,r,n){let i=n.left,s=n.right;return Ke(i,s),t.decisionMap[ri(e,"Option",r.idx)]=i,n}function xn(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function rs(t,e,r,n,...i){let s=it(t,e,n,{type:HE,start:r});r.end=s;for(let o of i)o!==void 0?(Ke(r,o.left),Ke(o.right,s)):Ke(r,s);let a={left:r,right:s};return t.decisionMap[ri(e,aA(n),n.idx)]=r,a}function aA(t){if(t instanceof Te)return"Alternation";if(t instanceof pe)return"Option";if(t instanceof se)return"Repetition";if(t instanceof ye)return"RepetitionWithSeparator";if(t instanceof xe)return"RepetitionMandatory";if(t instanceof ve)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function oA(t,e){let r=e.length;for(let s=0;s<r-1;s++){let a=e[s],o;a.left.transitions.length===1&&(o=a.left.transitions[0]);let c=o instanceof es,l=o,u=e[s+1].left;a.left.type===Rn&&a.right.type===Rn&&o!==void 0&&(c&&l.followState===a.right||o.target===a.right)?(c?l.followState=u:o.target=u,uA(t,a.right)):Ke(a.right,u)}let n=e[0],i=e[r-1];return{left:n.left,right:i.right}}function Lf(t,e,r,n){let i=it(t,e,n,{type:Rn}),s=it(t,e,n,{type:Rn});return Df(i,new Zi(s,r)),{left:i,right:s}}function cA(t,e,r){let n=r.referencedRule,i=t.ruleToStartState.get(n),s=it(t,e,r,{type:Rn}),a=it(t,e,r,{type:Rn}),o=new es(i,n,a);return Df(s,o),{left:s,right:a}}function lA(t,e,r){let n=t.ruleToStartState.get(e);Ke(n,r.left);let i=t.ruleToStopState.get(e);return Ke(r.right,i),{left:n,right:i}}function Ke(t,e){let r=new Oa(e);Df(t,r)}function it(t,e,r,n){let i=Object.assign({atn:t,production:r,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},n);return t.states.push(i),i}function Df(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function uA(t,e){t.states.splice(t.states.indexOf(e),1)}var La={},ns=class{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){let r=Mf(e);r in this.map||(this.map[r]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return I(this.configs,e=>e.alt)}get key(){let e="";for(let r in this.map)e+=r+":";return e}};function Mf(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map(r=>r.stateNumber.toString()).join("_")}`}function fA(t,e){let r={};return n=>{let i=n.toString(),s=r[i];return s!==void 0||(s={atnStartState:t,decision:e,states:{}},r[i]=s),s}}var Hc=class{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,r){this.predicates[e]=r}toString(){let e="",r=this.predicates.length;for(let n=0;n<r;n++)e+=this.predicates[n]===!0?"1":"0";return e}},kg=new Hc,Da=class extends Xr{constructor(e){var r;super(),this.logging=(r=e?.logging)!==null&&r!==void 0?r:n=>console.log(n)}initialize(e){this.atn=Eg(e.rules),this.dfas=dA(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){let{prodOccurrence:r,rule:n,hasPredicates:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=ri(n,"Alternation",r),u=this.atn.decisionMap[c].decision,p=I(Nc({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),h=>I(h,g=>g[0]));if(Ng(p,!1)&&!s){let h=Me(p,(g,N,k)=>(O(N,F=>{F&&(g[F.tokenTypeIdx]=k,O(F.categoryMatches,L=>{g[L]=k}))}),g),{});return i?function(g){var N;let k=this.LA(1),F=h[k.tokenTypeIdx];if(g!==void 0&&F!==void 0){let L=(N=g[F])===null||N===void 0?void 0:N.GATE;if(L!==void 0&&L.call(this)===!1)return}return F}:function(){let g=this.LA(1);return h[g.tokenTypeIdx]}}else return i?function(h){let g=new Hc,N=h===void 0?0:h.length;for(let F=0;F<N;F++){let L=h?.[F].GATE;g.set(F,L===void 0||L.call(this))}let k=Ff.call(this,a,u,g,o);return typeof k=="number"?k:void 0}:function(){let h=Ff.call(this,a,u,kg,o);return typeof h=="number"?h:void 0}}buildLookaheadForOptional(e){let{prodOccurrence:r,rule:n,prodType:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=ri(n,i,r),u=this.atn.decisionMap[c].decision,p=I(Nc({maxLookahead:1,occurrence:r,prodType:i,rule:n}),h=>I(h,g=>g[0]));if(Ng(p)&&p[0][0]&&!s){let h=p[0],g=Be(h);if(g.length===1&&Z(g[0].categoryMatches)){let k=g[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===k}}else{let N=Me(g,(k,F)=>(F!==void 0&&(k[F.tokenTypeIdx]=!0,O(F.categoryMatches,L=>{k[L]=!0})),k),{});return function(){let k=this.LA(1);return N[k.tokenTypeIdx]===!0}}}return function(){let h=Ff.call(this,a,u,kg,o);return typeof h=="object"?!1:h===0}}};function Ng(t,e=!0){let r=new Set;for(let n of t){let i=new Set;for(let s of n){if(s===void 0){if(e)break;return!1}let a=[s.tokenTypeIdx].concat(s.categoryMatches);for(let o of a)if(r.has(o)){if(!i.has(o))return!1}else r.add(o),i.add(o)}}return!0}function dA(t){let e=t.decisionStates.length,r=Array(e);for(let n=0;n<e;n++)r[n]=fA(t.decisionStates[n],n);return r}function Ff(t,e,r,n){let i=t[e](r),s=i.start;if(s===void 0){let o=AA(i.atnStartState);s=Ig(i,wg(o)),i.start=s}return pA.apply(this,[i,s,r,n])}function pA(t,e,r,n){let i=e,s=1,a=[],o=this.LA(s++);for(;;){let c=RA(i,o);if(c===void 0&&(c=hA.apply(this,[t,i,o,s,r,n])),c===La)return TA(a,i,o);if(c.isAcceptState===!0)return c.prediction;i=c,a.push(o),o=this.LA(s++)}}function hA(t,e,r,n,i,s){let a=xA(e.configs,r,i);if(a.size===0)return Cg(t,e,r,La),La;let o=wg(a),c=EA(a,i);if(c!==void 0)o.isAcceptState=!0,o.prediction=c,o.configs.uniqueAlt=c;else if(NA(a)){let l=zh(a.alts);o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l,mA.apply(this,[t,n,a.alts,s])}return o=Cg(t,e,r,o),o}function mA(t,e,r,n){let i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);let s=t.atnStartState,a=s.rule,o=s.production,c=gA({topLevelRule:a,ambiguityIndices:r,production:o,prefixPath:i});n(c)}function gA(t){let e=I(t.prefixPath,i=>Kr(i)).join(", "),r=t.production.idx===0?"":t.production.idx,n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${yA(t.production)}${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n}function yA(t){if(t instanceof de)return"SUBRULE";if(t instanceof pe)return"OPTION";if(t instanceof Te)return"OR";if(t instanceof xe)return"AT_LEAST_ONE";if(t instanceof ve)return"AT_LEAST_ONE_SEP";if(t instanceof ye)return"MANY_SEP";if(t instanceof se)return"MANY";if(t instanceof te)return"CONSUME";throw Error("non exhaustive match")}function TA(t,e,r){let n=ft(e.configs.elements,s=>s.state.transitions),i=jh(n.filter(s=>s instanceof Zi).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:i,tokenPath:t}}function RA(t,e){return t.edges[e.tokenTypeIdx]}function xA(t,e,r){let n=new ns,i=[];for(let a of t.elements){if(r.is(a.alt)===!1)continue;if(a.state.type===ts){i.push(a);continue}let o=a.state.transitions.length;for(let c=0;c<o;c++){let l=a.state.transitions[c],u=vA(l,e);u!==void 0&&n.add({state:u,alt:a.alt,stack:a.stack})}}let s;if(i.length===0&&n.size===1&&(s=n),s===void 0){s=new ns;for(let a of n.elements)Yc(a,s)}if(i.length>0&&!SA(s))for(let a of i)s.add(a);return s}function vA(t,e){if(t instanceof Zi&&Ea(e,t.tokenType))return t.target}function EA(t,e){let r;for(let n of t.elements)if(e.is(n.alt)===!0){if(r===void 0)r=n.alt;else if(r!==n.alt)return}return r}function wg(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function Cg(t,e,r,n){return n=Ig(t,n),e.edges[r.tokenTypeIdx]=n,n}function Ig(t,e){if(e===La)return e;let r=e.configs.key,n=t.states[r];return n!==void 0?n:(e.configs.finalize(),t.states[r]=e,e)}function AA(t){let e=new ns,r=t.transitions.length;for(let n=0;n<r;n++){let s={state:t.transitions[n].target,alt:n,stack:[]};Yc(s,e)}return e}function Yc(t,e){let r=t.state;if(r.type===ts){if(t.stack.length>0){let i=[...t.stack],a={state:i.pop(),alt:t.alt,stack:i};Yc(a,e)}else e.add(t);return}r.epsilonOnlyTransitions||e.add(t);let n=r.transitions.length;for(let i=0;i<n;i++){let s=r.transitions[i],a=$A(t,s);a!==void 0&&Yc(a,e)}}function $A(t,e){if(e instanceof Oa)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof es){let r=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:r}}}function SA(t){for(let e of t.elements)if(e.state.type===ts)return!0;return!1}function kA(t){for(let e of t.elements)if(e.state.type!==ts)return!1;return!0}function NA(t){if(kA(t))return!0;let e=CA(t.elements);return wA(e)&&!IA(e)}function CA(t){let e=new Map;for(let r of t){let n=Mf(r,!1),i=e.get(n);i===void 0&&(i={},e.set(n,i)),i[r.alt]=!0}return e}function wA(t){for(let e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function IA(t){for(let e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}ls();var ja=class{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]??this.rootNode}buildRootNode(e){return this.rootNode=new us(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){let r=new oi;return r.grammarSource=e,r.root=this.rootNode,this.current.content.push(r),this.nodeStack.push(r),r}buildLeafNode(e,r){let n=new ai(e.startOffset,e.image.length,Di(e),e.tokenType,!r);return n.grammarSource=r,n.root=this.rootNode,this.current.content.push(n),n}removeNode(e){let r=e.container;if(r){let n=r.content.indexOf(e);n>=0&&r.content.splice(n,1)}}addHiddenNodes(e){let r=[];for(let s of e){let a=new ai(s.startOffset,s.image.length,Di(s),s.tokenType,!0);a.root=this.rootNode,r.push(a)}let n=this.current,i=!1;if(n.content.length>0){n.content.push(...r);return}for(;n.container;){let s=n.container.content.indexOf(n);if(s>0){n.container.content.splice(s,0,...r),i=!0;break}n=n.container}i||this.rootNode.content.unshift(...r)}construct(e){let r=this.current;typeof e.$type=="string"&&!e.$infixName&&(this.current.astNode=e),e.$cstNode=r;let n=this.nodeStack.pop();n?.content.length===0&&this.removeNode(n)}},Ba=class{get hidden(){return!1}get astNode(){let e=typeof this._astNode?.$type=="string"?this._astNode:this.container?.astNode;if(!e)throw new Error("This node has no associated AST element");return e}set astNode(e){this._astNode=e}get text(){return this.root.fullText.substring(this.offset,this.end)}},ai=class extends Ba{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,r,n,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=r,this._range=n}},oi=class extends Ba{constructor(){super(...arguments),this.content=new Nd(this)}get offset(){return this.firstNonHiddenNode?.offset??0}get length(){return this.end-this.offset}get end(){return this.lastNonHiddenNode?.end??0}get range(){let e=this.firstNonHiddenNode,r=this.lastNonHiddenNode;if(e&&r){if(this._rangeCache===void 0){let{range:n}=e,{range:i}=r;this._rangeCache={start:n.start,end:i.end.line<n.start.line?n.start:i.end}}return this._rangeCache}else return{start:ce.create(0,0),end:ce.create(0,0)}}get firstNonHiddenNode(){for(let e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let r=this.content[e];if(!r.hidden)return r}return this.content[this.content.length-1]}},Nd=class t extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,t.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,r,...n){return this.addParents(n),super.splice(e,r,...n)}addParents(e){for(let r of e)r.container=this.parent}},us=class extends oi{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}};var al=Symbol("Datatype");function Cd(t){return t.$type===al}var Wg="\u200B",Vg=t=>t.endsWith(Wg)?t:t+Wg,Wa=class{constructor(e){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;let r=this.lexer.definition,n=e.LanguageMetaData.mode==="production";e.shared.profilers.LangiumProfiler?.isActive("parsing")?this.wrapper=new wd(r,tr(me({},e.parser.ParserConfig),{skipValidations:n,errorMessageProvider:e.parser.ParserErrorMessageProvider}),e.shared.profilers.LangiumProfiler.createTask("parsing",e.LanguageMetaData.languageId)):this.wrapper=new cl(r,tr(me({},e.parser.ParserConfig),{skipValidations:n,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,r){this.wrapper.wrapOr(e,r)}optional(e,r){this.wrapper.wrapOption(e,r)}many(e,r){this.wrapper.wrapMany(e,r)}atLeastOne(e,r){this.wrapper.wrapAtLeastOne(e,r)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},Va=class extends Wa{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new ja,this.stack=[],this.assignmentMap=new Map,this.operatorPrecedence=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,r){let n=this.computeRuleType(e),i;hn(e)&&(i=e.name,this.registerPrecedenceMap(e));let s=this.wrapper.DEFINE_RULE(Vg(e.name),this.startImplementation(n,i,r).bind(this));return this.allRules.set(e.name,s),rt(e)&&e.entry&&(this.mainRule=s),s}registerPrecedenceMap(e){let r=e.name,n=new Map;for(let i=0;i<e.operators.precedences.length;i++){let s=e.operators.precedences[i];for(let a of s.operators)n.set(a.value,{precedence:i,rightAssoc:s.associativity==="right"})}this.operatorPrecedence.set(r,n)}computeRuleType(e){return hn(e)?gn(e):e.fragment?void 0:ga(e)?al:gn(e)}parse(e,r={}){this.nodeBuilder.buildRootNode(e);let n=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=n.tokens;let i=r.rule?this.allRules.get(r.rule):this.mainRule;if(!i)throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.");let s=this.doParse(i);return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,ki(s,{deep:!0}),{value:s,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}doParse(e){let r=this.wrapper.rule(e);if(this.stack.length>0&&(r=this.construct()),r===void 0)throw new Error("No result from parser");if(this.stack.length>0)throw new Error("Parser stack is not empty after parsing");return r}startImplementation(e,r,n){return i=>{let s=!this.isRecording()&&e!==void 0;if(s){let a={$type:e};this.stack.push(a),e===al?a.value="":r!==void 0&&(a.$infixName=r)}return n(i),s?this.construct():void 0}}extractHiddenTokens(e){let r=this.lexerResult.hidden;if(!r.length)return[];let n=e.startOffset;for(let i=0;i<r.length;i++)if(r[i].startOffset>n)return r.splice(0,i);return r.splice(0,r.length)}consume(e,r,n){let i=this.wrapper.wrapConsume(e,r);if(!this.isRecording()&&this.isValidToken(i)){let s=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(s);let a=this.nodeBuilder.buildLeafNode(i,n),{assignment:o,crossRef:c}=this.getAssignment(n),l=this.current;if(o){let u=Xt(n)?i.image:this.converter.convert(i.image,a);this.assign(o.operator,o.feature,u,a,c)}else if(Cd(l)){let u=i.image;Xt(n)||(u=this.converter.convert(u,a).toString()),l.value+=u}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,r,n,i,s){let a;!this.isRecording()&&!n&&(a=this.nodeBuilder.buildCompositeNode(i));let o;try{o=this.wrapper.wrapSubrule(e,r,s)}finally{this.isRecording()||(o===void 0&&!n&&(o=this.construct()),o!==void 0&&a&&a.length>0&&this.performSubruleAssignment(o,i,a))}}performSubruleAssignment(e,r,n){let{assignment:i,crossRef:s}=this.getAssignment(r);if(i)this.assign(i.operator,i.feature,e,n,s);else if(!i){let a=this.current;if(Cd(a))a.value+=e.toString();else if(typeof e=="object"&&e){let c=this.assignWithoutOverride(e,a);this.stack.pop(),this.stack.push(c)}}}action(e,r){if(!this.isRecording()){let n=this.current;if(r.feature&&r.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode),this.nodeBuilder.buildCompositeNode(r).content.push(n.$cstNode);let s={$type:e};this.stack.push(s),this.assign(r.operator,r.feature,n,n.$cstNode)}else n.$type=e}}construct(){if(this.isRecording())return;let e=this.stack.pop();return this.nodeBuilder.construct(e),"$infixName"in e?this.constructInfix(e,this.operatorPrecedence.get(e.$infixName)):Cd(e)?this.converter.convert(e.value,e.$cstNode):(Ru(this.astReflection,e),e)}constructInfix(e,r){let n=e.parts;if(!Array.isArray(n)||n.length===0)return;let i=e.operators;if(!Array.isArray(i)||n.length<2)return n[0];let s=0,a=-1;for(let k=0;k<i.length;k++){let F=i[k],L=r.get(F)??{precedence:1/0,rightAssoc:!1};L.precedence>a?(a=L.precedence,s=k):L.precedence===a&&(L.rightAssoc||(s=k))}let o=i.slice(0,s),c=i.slice(s+1),l=n.slice(0,s+1),u=n.slice(s+1),p={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:l,operators:o},h={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:u,operators:c},g=this.constructInfix(p,r),N=this.constructInfix(h,r);return{$type:e.$type,$cstNode:e.$cstNode,left:g,operator:i[s],right:N}}getAssignment(e){if(!this.assignmentMap.has(e)){let r=Mr(e,ar);this.assignmentMap.set(e,{assignment:r,crossRef:r&&or(r.terminal)?r.terminal.isMulti?"multi":"single":void 0})}return this.assignmentMap.get(e)}assign(e,r,n,i,s){let a=this.current,o;switch(s==="single"&&typeof n=="string"?o=this.linker.buildReference(a,r,i,n):s==="multi"&&typeof n=="string"?o=this.linker.buildMultiReference(a,r,i,n):o=n,e){case"=":{a[r]=o;break}case"?=":{a[r]=!0;break}case"+=":Array.isArray(a[r])||(a[r]=[]),a[r].push(o)}}assignWithoutOverride(e,r){for(let[i,s]of Object.entries(r)){let a=e[i];a===void 0?e[i]=s:Array.isArray(a)&&Array.isArray(s)&&(s.push(...a),e[i]=s)}let n=e.$cstNode;return n&&(n.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}},ol=class{buildMismatchTokenMessage(e){return Yr.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Yr.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Yr.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Yr.buildEarlyExitMessage(e)}},fs=class extends ol{buildMismatchTokenMessage({expected:e,actual:r}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${r.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},Ka=class extends Wa{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();let r=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=r.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,r){let n=this.wrapper.DEFINE_RULE(Vg(e.name),this.startImplementation(r).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return r=>{let n=this.keepStackSize();try{e(r)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){let e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,r,n){this.wrapper.wrapConsume(e,r),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(e,r,n,i,s){this.before(i),this.wrapper.wrapSubrule(e,r,s),this.after(i)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let r=this.elementStack.lastIndexOf(e);r>=0&&this.elementStack.splice(r)}}get currIdx(){return this.wrapper.currIdx}},bA={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new fs},cl=class extends ba{constructor(e,r){let n=r&&"maxLookahead"in r;super(e,me(tr(me({},bA),{lookaheadStrategy:n?new Xr({maxLookahead:r.maxLookahead}):new Da({logging:r.skipValidations?()=>{}:void 0})}),r))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,r,n){return this.RULE(e,r,n)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,r){return this.consume(e,r,void 0)}wrapSubrule(e,r,n){return this.subrule(e,r,{ARGS:[n]})}wrapOr(e,r){this.or(e,r)}wrapOption(e,r){this.option(e,r)}wrapMany(e,r){this.many(e,r)}wrapAtLeastOne(e,r){this.atLeastOne(e,r)}rule(e){return e.call(this,{})}},wd=class extends cl{constructor(e,r,n){super(e,r),this.task=n}rule(e){this.task.start(),this.task.startSubTask(this.ruleName(e));try{return super.rule(e)}finally{this.task.stopSubTask(this.ruleName(e)),this.task.stop()}}ruleName(e){return e.ruleName}subrule(e,r,n){this.task.startSubTask(this.ruleName(r));try{return super.subrule(e,r,n)}finally{this.task.stopSubTask(this.ruleName(r))}}};function Ha(t,e,r){return PA({parser:e,tokens:r,ruleNames:new Map},t),e}function PA(t,e){let r=ha(e,!1),n=ee(e.rules).filter(rt).filter(s=>r.has(s));for(let s of n){let a=tr(me({},t),{consume:1,optional:1,subrule:1,many:1,or:1});t.parser.rule(s,ci(a,s.definition))}let i=ee(e.rules).filter(hn).filter(s=>r.has(s));for(let s of i)t.parser.rule(s,OA(t,s))}function OA(t,e){let r=e.call.rule.ref;if(!r)throw new Error("Could not resolve reference to infix operator rule: "+e.call.rule.$refText);if($t(r))throw new Error("Cannot use terminal rule in infix expression");let n=e.operators.precedences.flatMap(g=>g.operators),i={$type:"Group",elements:[]},s={$container:i,$type:"Assignment",feature:"parts",operator:"+=",terminal:e.call},a={$container:i,$type:"Group",elements:[],cardinality:"*"};i.elements.push(s,a);let c={$container:a,$type:"Assignment",feature:"operators",operator:"+=",terminal:{$type:"Alternatives",elements:n}},l=tr(me({},s),{$container:a});a.elements.push(c,l);let p=n.map(g=>t.tokens[g.value]).map((g,N)=>({ALT:()=>t.parser.consume(N,g,c)})),h;return g=>{h??(h=_d(t,r)),t.parser.subrule(0,h,!1,s,g),t.parser.many(0,{DEF:()=>{t.parser.alternatives(0,p),t.parser.subrule(1,h,!1,l,g)}})}}function ci(t,e,r=!1){let n;if(Xt(e))n=qA(t,e);else if(qr(e))n=LA(t,e);else if(ar(e))n=ci(t,e.terminal);else if(or(e))n=Kg(t,e);else if(cr(e))n=DA(t,e);else if(tc(e))n=FA(t,e);else if(sc(e))n=GA(t,e);else if(pn(e))n=UA(t,e);else if(ku(e)){let i=t.consume++;n=()=>t.parser.consume(i,Wt,e)}else throw new Hn(e.$cstNode,`Unexpected element type: ${e.$type}`);return Hg(t,r?void 0:ll(e),n,e.cardinality)}function LA(t,e){let r=gn(e);return()=>t.parser.action(r,e)}function DA(t,e){let r=e.rule.ref;if(Ur(r)){let n=t.subrule++,i=rt(r)&&r.fragment,s=e.arguments.length>0?MA(r,e.arguments):()=>({}),a;return o=>{a??(a=_d(t,r)),t.parser.subrule(n,a,i,e,s(o))}}else if($t(r)){let n=t.consume++,i=Id(t,r.name);return()=>t.parser.consume(n,i,e)}else if(r)xr(r);else throw new Hn(e.$cstNode,`Undefined rule: ${e.rule.$refText}`)}function MA(t,e){if(e.some(n=>n.calledByName)){let n=e.map(i=>({parameterName:i.parameter?.ref?.name,predicate:$r(i.value)}));return i=>{let s={};for(let{parameterName:a,predicate:o}of n)a&&(s[a]=o(i));return s}}else{let n=e.map(i=>$r(i.value));return i=>{let s={};for(let a=0;a<n.length;a++)if(a<t.parameters.length){let o=t.parameters[a].name,c=n[a];s[o]=c(i)}return s}}}function $r(t){if(Su(t)){let e=$r(t.left),r=$r(t.right);return n=>e(n)||r(n)}else if($u(t)){let e=$r(t.left),r=$r(t.right);return n=>e(n)&&r(n)}else if(wu(t)){let e=$r(t.value);return r=>!e(r)}else if(Iu(t)){let e=t.parameter.ref.name;return r=>r!==void 0&&r[e]===!0}else if(Eu(t)){let e=!!t.true;return()=>e}xr(t)}function FA(t,e){if(e.elements.length===1)return ci(t,e.elements[0]);{let r=[];for(let i of e.elements){let s={ALT:ci(t,i,!0)},a=ll(i);a&&(s.GATE=$r(a)),r.push(s)}let n=t.or++;return i=>t.parser.alternatives(n,r.map(s=>{let a={ALT:()=>s.ALT(i)},o=s.GATE;return o&&(a.GATE=()=>o(i)),a}))}}function GA(t,e){if(e.elements.length===1)return ci(t,e.elements[0]);let r=[];for(let o of e.elements){let c={ALT:ci(t,o,!0)},l=ll(o);l&&(c.GATE=$r(l)),r.push(c)}let n=t.or++,i=(o,c)=>{let l=c.getRuleStack().join("-");return`uGroup_${o}_${l}`},s=o=>t.parser.alternatives(n,r.map((c,l)=>{let u={ALT:()=>!0},p=t.parser;u.ALT=()=>{if(c.ALT(o),!p.isRecording()){let g=i(n,p);p.unorderedGroups.get(g)||p.unorderedGroups.set(g,[]);let N=p.unorderedGroups.get(g);typeof N?.[l]>"u"&&(N[l]=!0)}};let h=c.GATE;return h?u.GATE=()=>h(o):u.GATE=()=>!p.unorderedGroups.get(i(n,p))?.[l],u})),a=Hg(t,ll(e),s,"*");return o=>{a(o),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(n,t.parser))}}function UA(t,e){let r=e.elements.map(n=>ci(t,n));return n=>r.forEach(i=>i(n))}function ll(t){if(pn(t))return t.guardCondition}function Kg(t,e,r=e.terminal){if(r)if(cr(r)&&rt(r.rule.ref)){let n=r.rule.ref,i=t.subrule++,s;return a=>{s??(s=_d(t,n)),t.parser.subrule(i,s,!1,e,a)}}else if(cr(r)&&$t(r.rule.ref)){let n=t.consume++,i=Id(t,r.rule.ref.name);return()=>t.parser.consume(n,i,e)}else if(Xt(r)){let n=t.consume++,i=Id(t,r.value);return()=>t.parser.consume(n,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);let i=fc(e.type.ref)?.terminal;if(!i)throw new Error("Could not find name assignment for type: "+gn(e.type.ref));return Kg(t,e,i)}}function qA(t,e){let r=t.consume++,n=t.tokens[e.value];if(!n)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(r,n,e)}function Hg(t,e,r,n){let i=e&&$r(e);if(!n)if(i){let s=t.or++;return a=>t.parser.alternatives(s,[{ALT:()=>r(a),GATE:()=>i(a)},{ALT:Kc(),GATE:()=>!i(a)}])}else return r;if(n==="*"){let s=t.many++;return a=>t.parser.many(s,{DEF:()=>r(a),GATE:i?()=>i(a):void 0})}else if(n==="+"){let s=t.many++;if(i){let a=t.or++;return o=>t.parser.alternatives(a,[{ALT:()=>t.parser.atLeastOne(s,{DEF:()=>r(o)}),GATE:()=>i(o)},{ALT:Kc(),GATE:()=>!i(o)}])}else return a=>t.parser.atLeastOne(s,{DEF:()=>r(a)})}else if(n==="?"){let s=t.optional++;return a=>t.parser.optional(s,{DEF:()=>r(a),GATE:i?()=>i(a):void 0})}else xr(n)}function _d(t,e){let r=zA(t,e),n=t.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function zA(t,e){if(Ur(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let r=e,n=r.$container,i=e.$type;for(;!rt(n);)(pn(n)||tc(n)||sc(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,t.ruleNames.set(e,i),i}}function Id(t,e){let r=t.tokens[e];if(!r)throw new Error(`Token "${e}" not found."`);return r}function bd(t){let e=t.Grammar,r=t.parser.Lexer,n=new Ka(t);return Ha(e,n,r.definition),n.finalize(),n}function Pd(t){let e=Yg(t);return e.finalize(),e}function Yg(t){let e=t.Grammar,r=t.parser.Lexer,n=new Va(t);return Ha(e,n,r.definition)}var Qr=class{constructor(){this.diagnostics=[]}buildTokens(e,r){let n=ee(ha(e,!1)),i=this.buildTerminalTokens(n),s=this.buildKeywordTokens(n,i,r);return s.push(...i),s}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){let e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter($t).filter(r=>!r.fragment).map(r=>this.buildTerminalToken(r)).toArray()}buildTerminalToken(e){let r=Fi(e),n=this.requiresCustomPattern(r)?this.regexPatternFunction(r):r,i={name:e.name,PATTERN:n};return typeof n=="function"&&(i.LINE_BREAKS=!0),e.hidden&&(i.GROUP=pa(r)?Ve.SKIPPED:"hidden"),i}requiresCustomPattern(e){return!!(e.flags.includes("u")||e.flags.includes("s"))}regexPatternFunction(e){let r=new RegExp(e,e.flags+"y");return(n,i)=>(r.lastIndex=i,r.exec(n))}buildKeywordTokens(e,r,n){return e.filter(Ur).flatMap(i=>ir(i).filter(Xt)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,r,!!n?.caseInsensitive))}buildKeywordToken(e,r,n){let i=this.buildKeywordPattern(e,n),s={name:e.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(e,r)};return typeof i=="function"&&(s.LINE_BREAKS=!0),s}buildKeywordPattern(e,r){return r?new RegExp(mn(e.value),"i"):e.value}findLongerAlt(e,r){return r.reduce((n,i)=>{let s=i?.PATTERN;return s?.source&&Hu("^"+s.source+"$",e.value)&&n.push(i),n},[])}};var li=class{convert(e,r){let n=r.grammarSource;if(or(n)&&(n=Ju(n)),cr(n)){let i=n.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,r)}return e}runConverter(e,r,n){switch(e.name.toUpperCase()){case"INT":return Sr.convertInt(r);case"STRING":return Sr.convertString(r);case"ID":return Sr.convertID(r)}switch(sf(e)?.toLowerCase()){case"number":return Sr.convertNumber(r);case"boolean":return Sr.convertBoolean(r);case"bigint":return Sr.convertBigint(r);case"date":return Sr.convertDate(r);default:return r}}},Sr;(function(t){function e(l){let u="";for(let p=1;p<l.length-1;p++){let h=l.charAt(p);if(h==="\\"){let g=l.charAt(++p);u+=r(g)}else u+=h}return u}t.convertString=e;function r(l){switch(l){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return l}}function n(l){return l.charAt(0)==="^"?l.substring(1):l}t.convertID=n;function i(l){return parseInt(l)}t.convertInt=i;function s(l){return BigInt(l)}t.convertBigint=s;function a(l){return new Date(l)}t.convertDate=a;function o(l){return Number(l)}t.convertNumber=o;function c(l){return l.toLowerCase()==="true"}t.convertBoolean=c})(Sr||(Sr={}));var B={};ae(B,du(Ya(),1));function Ud(){return new Promise(t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)})}var pl=0,Zg=10;function hl(){return pl=performance.now(),new B.CancellationTokenSource}function ey(t){Zg=t}var Jt=Symbol("OperationCancelled");function kr(t){return t===Jt}async function Oe(t){if(t===B.CancellationToken.None)return;let e=performance.now();if(e-pl>=Zg&&(pl=e,await Ud(),pl=performance.now()),t.isCancellationRequested)throw Jt}var Ct=class{constructor(){this.promise=new Promise((e,r)=>{this.resolve=n=>(e(n),this),this.reject=n=>(r(n),this)})}};var ml=class t{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=ny(n.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(a,this._content.length);let o=Math.max(i.start.line,0),c=Math.max(i.end.line,0),l=this._lineOffsets,u=ty(n.text,!1,s);if(c-o===u.length)for(let h=0,g=u.length;h<g;h++)l[h+o+1]=u[h];else u.length<1e4?l.splice(o+1,c-o,...u):this._lineOffsets=l=l.slice(0,o+1).concat(u,l.slice(c+1));let p=n.text.length-(a-s);if(p!==0)for(let h=o+1+u.length,g=l.length;h<g;h++)l[h]=l[h]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ty(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,i);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&ry(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},ms;(function(t){function e(i,s,a,o){return new ml(i,s,a,o)}t.create=e;function r(i,s,a){if(i instanceof ml)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=r;function n(i,s){let a=i.getText(),o=qd(s.map(QA),(u,p)=>{let h=u.range.start.line-p.range.start.line;return h===0?u.range.start.character-p.range.start.character:h}),c=0,l=[];for(let u of o){let p=i.offsetAt(u.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&l.push(a.substring(c,p)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end)}return l.push(a.substr(c)),l.join("")}t.applyEdits=n})(ms||(ms={}));function qd(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);qd(n,e),qd(i,e);let s=0,a=0,o=0;for(;s<n.length&&a<i.length;)e(n[s],i[a])<=0?t[o++]=n[s++]:t[o++]=i[a++];for(;s<n.length;)t[o++]=n[s++];for(;a<i.length;)t[o++]=i[a++];return t}function ty(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);ry(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function ry(t){return t===13||t===10}function ny(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function QA(t){let e=ny(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var iy;(()=>{"use strict";var t={975:S=>{function y(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function b(T,E){for(var A,_="",M=0,C=-1,K=0,Q=0;Q<=T.length;++Q){if(Q<T.length)A=T.charCodeAt(Q);else{if(A===47)break;A=47}if(A===47){if(!(C===Q-1||K===1))if(C!==Q-1&&K===2){if(_.length<2||M!==2||_.charCodeAt(_.length-1)!==46||_.charCodeAt(_.length-2)!==46){if(_.length>2){var Ue=_.lastIndexOf("/");if(Ue!==_.length-1){Ue===-1?(_="",M=0):M=(_=_.slice(0,Ue)).length-1-_.lastIndexOf("/"),C=Q,K=0;continue}}else if(_.length===2||_.length===1){_="",M=0,C=Q,K=0;continue}}E&&(_.length>0?_+="/..":_="..",M=2)}else _.length>0?_+="/"+T.slice(C+1,Q):_=T.slice(C+1,Q),M=Q-C-1;C=Q,K=0}else A===46&&K!==-1?++K:K=-1}return _}var P={resolve:function(){for(var T,E="",A=!1,_=arguments.length-1;_>=-1&&!A;_--){var M;_>=0?M=arguments[_]:(T===void 0&&(T=process.cwd()),M=T),y(M),M.length!==0&&(E=M+"/"+E,A=M.charCodeAt(0)===47)}return E=b(E,!A),A?E.length>0?"/"+E:"/":E.length>0?E:"."},normalize:function(T){if(y(T),T.length===0)return".";var E=T.charCodeAt(0)===47,A=T.charCodeAt(T.length-1)===47;return(T=b(T,!E)).length!==0||E||(T="."),T.length>0&&A&&(T+="/"),E?"/"+T:T},isAbsolute:function(T){return y(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,E=0;E<arguments.length;++E){var A=arguments[E];y(A),A.length>0&&(T===void 0?T=A:T+="/"+A)}return T===void 0?".":P.normalize(T)},relative:function(T,E){if(y(T),y(E),T===E||(T=P.resolve(T))===(E=P.resolve(E)))return"";for(var A=1;A<T.length&&T.charCodeAt(A)===47;++A);for(var _=T.length,M=_-A,C=1;C<E.length&&E.charCodeAt(C)===47;++C);for(var K=E.length-C,Q=M<K?M:K,Ue=-1,fe=0;fe<=Q;++fe){if(fe===Q){if(K>Q){if(E.charCodeAt(C+fe)===47)return E.slice(C+fe+1);if(fe===0)return E.slice(C+fe)}else M>Q&&(T.charCodeAt(A+fe)===47?Ue=fe:fe===0&&(Ue=0));break}var _t=T.charCodeAt(A+fe);if(_t!==E.charCodeAt(C+fe))break;_t===47&&(Ue=fe)}var Ye="";for(fe=A+Ue+1;fe<=_;++fe)fe!==_&&T.charCodeAt(fe)!==47||(Ye.length===0?Ye+="..":Ye+="/..");return Ye.length>0?Ye+E.slice(C+Ue):(C+=Ue,E.charCodeAt(C)===47&&++C,E.slice(C))},_makeLong:function(T){return T},dirname:function(T){if(y(T),T.length===0)return".";for(var E=T.charCodeAt(0),A=E===47,_=-1,M=!0,C=T.length-1;C>=1;--C)if((E=T.charCodeAt(C))===47){if(!M){_=C;break}}else M=!1;return _===-1?A?"/":".":A&&_===1?"//":T.slice(0,_)},basename:function(T,E){if(E!==void 0&&typeof E!="string")throw new TypeError('"ext" argument must be a string');y(T);var A,_=0,M=-1,C=!0;if(E!==void 0&&E.length>0&&E.length<=T.length){if(E.length===T.length&&E===T)return"";var K=E.length-1,Q=-1;for(A=T.length-1;A>=0;--A){var Ue=T.charCodeAt(A);if(Ue===47){if(!C){_=A+1;break}}else Q===-1&&(C=!1,Q=A+1),K>=0&&(Ue===E.charCodeAt(K)?--K==-1&&(M=A):(K=-1,M=Q))}return _===M?M=Q:M===-1&&(M=T.length),T.slice(_,M)}for(A=T.length-1;A>=0;--A)if(T.charCodeAt(A)===47){if(!C){_=A+1;break}}else M===-1&&(C=!1,M=A+1);return M===-1?"":T.slice(_,M)},extname:function(T){y(T);for(var E=-1,A=0,_=-1,M=!0,C=0,K=T.length-1;K>=0;--K){var Q=T.charCodeAt(K);if(Q!==47)_===-1&&(M=!1,_=K+1),Q===46?E===-1?E=K:C!==1&&(C=1):E!==-1&&(C=-1);else if(!M){A=K+1;break}}return E===-1||_===-1||C===0||C===1&&E===_-1&&E===A+1?"":T.slice(E,_)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return(function(E,A){var _=A.dir||A.root,M=A.base||(A.name||"")+(A.ext||"");return _?_===A.root?_+M:_+"/"+M:M})(0,T)},parse:function(T){y(T);var E={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return E;var A,_=T.charCodeAt(0),M=_===47;M?(E.root="/",A=1):A=0;for(var C=-1,K=0,Q=-1,Ue=!0,fe=T.length-1,_t=0;fe>=A;--fe)if((_=T.charCodeAt(fe))!==47)Q===-1&&(Ue=!1,Q=fe+1),_===46?C===-1?C=fe:_t!==1&&(_t=1):C!==-1&&(_t=-1);else if(!Ue){K=fe+1;break}return C===-1||Q===-1||_t===0||_t===1&&C===Q-1&&C===K+1?Q!==-1&&(E.base=E.name=K===0&&M?T.slice(1,Q):T.slice(K,Q)):(K===0&&M?(E.name=T.slice(1,C),E.base=T.slice(1,Q)):(E.name=T.slice(K,C),E.base=T.slice(K,Q)),E.ext=T.slice(C,Q)),K>0?E.dir=T.slice(0,K-1):M&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};P.posix=P,S.exports=P}},e={};function r(S){var y=e[S];if(y!==void 0)return y.exports;var b=e[S]={exports:{}};return t[S](b,b.exports,r),b.exports}r.d=(S,y)=>{for(var b in y)r.o(y,b)&&!r.o(S,b)&&Object.defineProperty(S,b,{enumerable:!0,get:y[b]})},r.o=(S,y)=>Object.prototype.hasOwnProperty.call(S,y),r.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>h,Utils:()=>pr}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,a=/^\//,o=/^\/\//;function c(S,y){if(!S.scheme&&y)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${S.authority}", path: "${S.path}", query: "${S.query}", fragment: "${S.fragment}"}`);if(S.scheme&&!s.test(S.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(S.path){if(S.authority){if(!a.test(S.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(S.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static isUri(y){return y instanceof h||!!y&&typeof y.authority=="string"&&typeof y.fragment=="string"&&typeof y.path=="string"&&typeof y.query=="string"&&typeof y.scheme=="string"&&typeof y.fsPath=="string"&&typeof y.with=="function"&&typeof y.toString=="function"}scheme;authority;path;query;fragment;constructor(y,b,P,T,E,A=!1){typeof y=="object"?(this.scheme=y.scheme||l,this.authority=y.authority||l,this.path=y.path||l,this.query=y.query||l,this.fragment=y.fragment||l):(this.scheme=(function(_,M){return _||M?_:"file"})(y,A),this.authority=b||l,this.path=(function(_,M){switch(_){case"https":case"http":case"file":M?M[0]!==u&&(M=u+M):M=u}return M})(this.scheme,P||l),this.query=T||l,this.fragment=E||l,c(this,A))}get fsPath(){return D(this,!1)}with(y){if(!y)return this;let{scheme:b,authority:P,path:T,query:E,fragment:A}=y;return b===void 0?b=this.scheme:b===null&&(b=l),P===void 0?P=this.authority:P===null&&(P=l),T===void 0?T=this.path:T===null&&(T=l),E===void 0?E=this.query:E===null&&(E=l),A===void 0?A=this.fragment:A===null&&(A=l),b===this.scheme&&P===this.authority&&T===this.path&&E===this.query&&A===this.fragment?this:new N(b,P,T,E,A)}static parse(y,b=!1){let P=p.exec(y);return P?new N(P[2]||l,J(P[4]||l),J(P[5]||l),J(P[7]||l),J(P[9]||l),b):new N(l,l,l,l,l)}static file(y){let b=l;if(i&&(y=y.replace(/\\/g,u)),y[0]===u&&y[1]===u){let P=y.indexOf(u,2);P===-1?(b=y.substring(2),y=u):(b=y.substring(2,P),y=y.substring(P)||u)}return new N("file",b,y,l,l)}static from(y){let b=new N(y.scheme,y.authority,y.path,y.query,y.fragment);return c(b,!0),b}toString(y=!1){return x(this,y)}toJSON(){return this}static revive(y){if(y){if(y instanceof h)return y;{let b=new N(y);return b._formatted=y.external,b._fsPath=y._sep===g?y.fsPath:null,b}}return y}}let g=i?1:void 0;class N extends h{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=D(this,!1)),this._fsPath}toString(y=!1){return y?x(this,!0):(this._formatted||(this._formatted=x(this,!1)),this._formatted)}toJSON(){let y={$mid:1};return this._fsPath&&(y.fsPath=this._fsPath,y._sep=g),this._formatted&&(y.external=this._formatted),this.path&&(y.path=this.path),this.scheme&&(y.scheme=this.scheme),this.authority&&(y.authority=this.authority),this.query&&(y.query=this.query),this.fragment&&(y.fragment=this.fragment),y}}let k={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(S,y,b){let P,T=-1;for(let E=0;E<S.length;E++){let A=S.charCodeAt(E);if(A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57||A===45||A===46||A===95||A===126||y&&A===47||b&&A===91||b&&A===93||b&&A===58)T!==-1&&(P+=encodeURIComponent(S.substring(T,E)),T=-1),P!==void 0&&(P+=S.charAt(E));else{P===void 0&&(P=S.substr(0,E));let _=k[A];_!==void 0?(T!==-1&&(P+=encodeURIComponent(S.substring(T,E)),T=-1),P+=_):T===-1&&(T=E)}}return T!==-1&&(P+=encodeURIComponent(S.substring(T))),P!==void 0?P:S}function L(S){let y;for(let b=0;b<S.length;b++){let P=S.charCodeAt(b);P===35||P===63?(y===void 0&&(y=S.substr(0,b)),y+=k[P]):y!==void 0&&(y+=S[b])}return y!==void 0?y:S}function D(S,y){let b;return b=S.authority&&S.path.length>1&&S.scheme==="file"?`//${S.authority}${S.path}`:S.path.charCodeAt(0)===47&&(S.path.charCodeAt(1)>=65&&S.path.charCodeAt(1)<=90||S.path.charCodeAt(1)>=97&&S.path.charCodeAt(1)<=122)&&S.path.charCodeAt(2)===58?y?S.path.substr(1):S.path[1].toLowerCase()+S.path.substr(2):S.path,i&&(b=b.replace(/\//g,"\\")),b}function x(S,y){let b=y?L:F,P="",{scheme:T,authority:E,path:A,query:_,fragment:M}=S;if(T&&(P+=T,P+=":"),(E||T==="file")&&(P+=u,P+=u),E){let C=E.indexOf("@");if(C!==-1){let K=E.substr(0,C);E=E.substr(C+1),C=K.lastIndexOf(":"),C===-1?P+=b(K,!1,!1):(P+=b(K.substr(0,C),!1,!1),P+=":",P+=b(K.substr(C+1),!1,!0)),P+="@"}E=E.toLowerCase(),C=E.lastIndexOf(":"),C===-1?P+=b(E,!1,!0):(P+=b(E.substr(0,C),!1,!0),P+=E.substr(C))}if(A){if(A.length>=3&&A.charCodeAt(0)===47&&A.charCodeAt(2)===58){let C=A.charCodeAt(1);C>=65&&C<=90&&(A=`/${String.fromCharCode(C+32)}:${A.substr(3)}`)}else if(A.length>=2&&A.charCodeAt(1)===58){let C=A.charCodeAt(0);C>=65&&C<=90&&(A=`${String.fromCharCode(C+32)}:${A.substr(2)}`)}P+=b(A,!0,!1)}return _&&(P+="?",P+=b(_,!1,!1)),M&&(P+="#",P+=y?M:F(M,!1,!1)),P}function z(S){try{return decodeURIComponent(S)}catch{return S.length>3?S.substr(0,3)+z(S.substr(3)):S}}let H=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function J(S){return S.match(H)?S.replace(H,y=>z(y)):S}var Ht=r(975);let wt=Ht.posix||Ht,It="/";var pr;(function(S){S.joinPath=function(y,...b){return y.with({path:wt.join(y.path,...b)})},S.resolvePath=function(y,...b){let P=y.path,T=!1;P[0]!==It&&(P=It+P,T=!0);let E=wt.resolve(P,...b);return T&&E[0]===It&&!y.authority&&(E=E.substring(1)),y.with({path:E})},S.dirname=function(y){if(y.path.length===0||y.path===It)return y;let b=wt.dirname(y.path);return b.length===1&&b.charCodeAt(0)===46&&(b=""),y.with({path:b})},S.basename=function(y){return wt.basename(y.path)},S.extname=function(y){return wt.extname(y.path)}})(pr||(pr={})),iy=n})();var{URI:Ze,Utils:gs}=iy;var ze;(function(t){t.basename=gs.basename,t.dirname=gs.dirname,t.extname=gs.extname,t.joinPath=gs.joinPath,t.resolvePath=gs.resolvePath;let e=typeof process=="object"&&process?.platform==="win32";function r(a,o){return a?.toString()===o?.toString()}t.equals=r;function n(a,o){let c=typeof a=="string"?Ze.parse(a).path:a.path,l=typeof o=="string"?Ze.parse(o).path:o.path,u=c.split("/").filter(k=>k.length>0),p=l.split("/").filter(k=>k.length>0);if(e){let k=/^[A-Z]:$/;if(u[0]&&k.test(u[0])&&(u[0]=u[0].toLowerCase()),p[0]&&k.test(p[0])&&(p[0]=p[0].toLowerCase()),u[0]!==p[0])return l.substring(1)}let h=0;for(;h<u.length&&u[h]===p[h];h++);let g="../".repeat(u.length-h),N=p.slice(h).join("/");return g+N}t.relative=n;function i(a){return Ze.parse(a.toString()).toString()}t.normalize=i;function s(a,o){let c=typeof a=="string"?a:a.path,l=typeof o=="string"?o:o.path;return l.charAt(l.length-1)==="/"&&(l=l.slice(0,-1)),c.charAt(c.length-1)==="/"&&(c=c.slice(0,-1)),l===c?!0:l.length<c.length||l.charAt(c.length)!=="/"?!1:l.startsWith(c)}t.contains=s})(ze||(ze={}));var ys=class{constructor(){this.root={name:"",children:new Map}}normalizeUri(e){return ze.normalize(e)}clear(){this.root.children.clear()}insert(e,r){let n=this.getNode(this.normalizeUri(e),!0);n.element=r}delete(e){let r=this.getNode(this.normalizeUri(e),!1);r?.parent&&r.parent.children.delete(r.name)}has(e){return this.getNode(this.normalizeUri(e),!1)?.element!==void 0}hasNode(e){return this.getNode(this.normalizeUri(e),!1)!==void 0}find(e){return this.getNode(this.normalizeUri(e),!1)?.element}findNode(e){let r=this.normalizeUri(e),n=this.getNode(r,!1);if(n)return{name:n.name,uri:ze.joinPath(Ze.parse(r),n.name).toString(),element:n.element}}findChildren(e){let r=this.normalizeUri(e),n=this.getNode(r,!1);return n?Array.from(n.children.values()).map(i=>({name:i.name,uri:ze.joinPath(Ze.parse(r),i.name).toString(),element:i.element})):[]}all(){return this.collectValues(this.root)}findAll(e){let r=this.getNode(ze.normalize(e),!1);return r?this.collectValues(r):[]}getNode(e,r){let n=e.split("/");e.charAt(e.length-1)==="/"&&n.pop();let i=this.root;for(let s of n){let a=i.children.get(s);if(!a)if(r)a={name:s,children:new Map,parent:i},i.children.set(s,a);else return;i=a}return i}collectValues(e){let r=[];e.element&&r.push(e.element);for(let n of e.children.values())r.push(...this.collectValues(n));return r}};var re=(function(t){return t[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated",t})(re||{}),Xa=class{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,r=B.CancellationToken.None){let n=await this.fileSystemProvider.readFile(e);return this.createAsync(e,n,r)}fromTextDocument(e,r,n){return r=r??Ze.parse(e.uri),B.CancellationToken.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromString(e,r,n){return B.CancellationToken.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromModel(e,r){return this.create(r,{$model:e})}create(e,r,n){if(typeof r=="string"){let i=this.parse(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else if("$model"in r){let i={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,e)}else{let i=this.parse(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}async createAsync(e,r,n){if(typeof r=="string"){let i=await this.parseAsync(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else{let i=await this.parseAsync(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}createLangiumDocument(e,r,n,i){let s;if(n)s={parseResult:e,uri:r,state:re.Parsed,references:[],textDocument:n};else{let a=this.createTextDocumentGetter(r,i);s={parseResult:e,uri:r,state:re.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=s,s}async update(e,r){let n=e.parseResult.value.$cstNode?.root.fullText,i=this.textDocuments?.get(e.uri.toString()),s=i?i.getText():await this.fileSystemProvider.readFile(e.uri);if(i)Object.defineProperty(e,"textDocument",{value:i});else{let a=this.createTextDocumentGetter(e.uri,s);Object.defineProperty(e,"textDocument",{get:a})}return n!==s&&(e.parseResult=await this.parseAsync(e.uri,s,r),e.parseResult.value.$document=e),e.state=re.Parsed,e}parse(e,r,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(r,n)}parseAsync(e,r,n){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(r,n)}createTextDocumentGetter(e,r){let n=this.serviceRegistry,i;return()=>i??(i=ms.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,r??""))}},Ja=class{constructor(e){this.documentTrie=new ys,this.services=e,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.documentBuilder=()=>e.workspace.DocumentBuilder}get all(){return ee(this.documentTrie.all())}addDocument(e){let r=e.uri.toString();if(this.documentTrie.has(r))throw new Error(`A document with the URI '${r}' is already present.`);this.documentTrie.insert(r,e)}getDocument(e){let r=e.toString();return this.documentTrie.find(r)}getDocuments(e){let r=e.toString();return this.documentTrie.findAll(r)}async getOrCreateDocument(e,r){let n=this.getDocument(e);return n||(n=await this.langiumDocumentFactory.fromUri(e,r),this.addDocument(n),n)}createDocument(e,r,n){if(n)return this.langiumDocumentFactory.fromString(r,e,n).then(i=>(this.addDocument(i),i));{let i=this.langiumDocumentFactory.fromString(r,e);return this.addDocument(i),i}}hasDocument(e){return this.documentTrie.has(e.toString())}invalidateDocument(e){let r=e.toString(),n=this.documentTrie.find(r);return n&&this.documentBuilder().resetToState(n,re.Changed),n}deleteDocument(e){let r=e.toString(),n=this.documentTrie.find(r);return n&&(n.state=re.Changed,this.documentTrie.delete(r)),n}deleteDocuments(e){let r=e.toString(),n=this.documentTrie.findAll(r);for(let i of n)i.state=re.Changed;return this.documentTrie.delete(r),n}};var fi=Symbol("RefResolving"),Qa=class{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async link(e,r=B.CancellationToken.None){if(this.profiler?.isActive("linking")){let n=this.profiler.createTask("linking",this.languageId);n.start();try{for(let i of At(e.parseResult.value))await Oe(r),on(i).forEach(s=>{let a=`${i.$type}:${s.property}`;n.startSubTask(a);try{this.doLink(s,e)}finally{n.stopSubTask(a)}})}finally{n.stop()}}else for(let n of At(e.parseResult.value))await Oe(r),on(n).forEach(i=>this.doLink(i,e))}doLink(e,r){let n=e.reference;if("_ref"in n&&n._ref===void 0){n._ref=fi;try{let i=this.getCandidate(e);if(On(i))n._ref=i;else{n._nodeDescription=i;let s=this.loadAstNode(i);n._ref=s??this.createLinkingError(e,i)}}catch(i){console.error(`An error occurred while resolving reference to '${n.$refText}':`,i);let s=i.message??String(i);n._ref={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${s}`}}r.references.push(n)}else if("_items"in n&&n._items===void 0){n._items=fi;try{let i=this.getCandidates(e),s=[];if(On(i))n._linkingError=i;else for(let a of i){let o=this.loadAstNode(a);o&&s.push({ref:o,$nodeDescription:a})}n._items=s}catch(i){n._linkingError={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${i}`},n._items=[]}r.references.push(n)}}unlink(e){for(let r of e.references)"_ref"in r?(r._ref=void 0,delete r._nodeDescription):"_items"in r&&(r._items=void 0,delete r._linkingError);e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}getCandidates(e){let n=this.scopeProvider.getScope(e).getElements(e.reference.$refText).distinct(i=>`${i.documentUri}#${i.path}`).toArray();return n.length>0?n:this.createLinkingError(e)}buildReference(e,r,n,i){let s=this,a={$refNode:n,$refText:i,_ref:void 0,get ref(){if(_e(this._ref))return this._ref;if(gu(this._nodeDescription)){let o=s.loadAstNode(this._nodeDescription);this._ref=o??s.createLinkingError({reference:a,container:e,property:r},this._nodeDescription)}else if(this._ref===void 0){this._ref=fi;let o=Ni(e).$document,c=s.getLinkedNode({reference:a,container:e,property:r});if(c.error&&o&&o.state<re.ComputedScopes)return this._ref=void 0;this._ref=c.node??c.error,this._nodeDescription=c.descr,o?.references.push(this)}else this._ref===fi&&s.throwCyclicReferenceError(e,r,i);return _e(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return On(this._ref)?this._ref:void 0}};return a}buildMultiReference(e,r,n,i){let s=this,a={$refNode:n,$refText:i,_items:void 0,get items(){if(Array.isArray(this._items))return this._items;if(this._items===void 0){this._items=fi;let o=Ni(e).$document,c=s.getCandidates({reference:a,container:e,property:r}),l=[];if(On(c))this._linkingError=c;else for(let u of c){let p=s.loadAstNode(u);p&&l.push({ref:p,$nodeDescription:u})}this._items=l,o?.references.push(this)}else this._items===fi&&s.throwCyclicReferenceError(e,r,i);return Array.isArray(this._items)?this._items:[]},get error(){if(this._linkingError)return this._linkingError;if(!(this.items.length>0))return this._linkingError=s.createLinkingError({reference:a,container:e,property:r})}};return a}throwCyclicReferenceError(e,r,n){throw new Error(`Cyclic reference resolution detected: ${this.astNodeLocator.getAstNodePath(e)}/${r} (symbol '${n}')`)}getLinkedNode(e){try{let r=this.getCandidate(e);if(On(r))return{error:r};let n=this.loadAstNode(r);return n?{node:n,descr:r}:{descr:r,error:this.createLinkingError(e,r)}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);let n=r.message??String(r);return{error:{info:e,message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`}}}}loadAstNode(e){if(e.node)return e.node;let r=this.langiumDocuments().getDocument(e.documentUri);if(r)return this.astNodeLocator.getAstNode(r.parseResult.value,e.path)}createLinkingError(e,r){let n=Ni(e.container).$document;n&&n.state<re.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${n.uri}).`);let i=this.reflection.getReferenceType(e);return{info:e,message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:r}}};function sy(t){return typeof t.name=="string"}var Za=class{getName(e){if(sy(e))return e.name}getNameNode(e){return ma(e.$cstNode,"name")}};var eo=class{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator,this.documents=e.shared.workspace.LangiumDocuments,this.hasMultiReference=At(e.Grammar).some(r=>or(r)&&r.isMulti)}findDeclarations(e){if(e){let r=nf(e),n=e.astNode;if(r&&n){let i=n[r.feature];if(Qe(i)||qt(i))return Uo(i);if(Array.isArray(i)){for(let s of i)if((Qe(s)||qt(s))&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return Uo(s)}}if(n){let i=this.nameProvider.getNameNode(n);if(i&&(i===e||Uu(e,i)))return this.getSelfNodes(n)}}return[]}getSelfNodes(e){if(this.hasMultiReference){let r=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e)),n=this.getNodeFromReferenceDescription(r.head());if(n){for(let i of on(n))if(qt(i.reference)&&i.reference.items.some(s=>s.ref===e))return i.reference.items.map(s=>s.ref)}return[e]}else return[e]}getNodeFromReferenceDescription(e){if(!e)return;let r=this.documents.getDocument(e.sourceUri);if(r)return this.nodeLocator.getAstNode(r.parseResult.value,e.sourcePath)}findDeclarationNodes(e){let r=this.findDeclarations(e),n=[];for(let i of r){let s=this.nameProvider.getNameNode(i)??i.$cstNode;s&&n.push(s)}return n}findReferences(e,r){let n=[];r.includeDeclaration&&n.push(...this.getSelfReferences(e));let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return r.documentUri&&(i=i.filter(s=>ze.equals(s.sourceUri,r.documentUri))),n.push(...i),ee(n)}getSelfReferences(e){let r=this.getSelfNodes(e),n=[];for(let i of r){let s=this.nameProvider.getNameNode(i);if(s){let a=ht(i),o=this.nodeLocator.getAstNodePath(i);n.push({sourceUri:a.uri,sourcePath:o,targetUri:a.uri,targetPath:o,segment:Kn(s),local:!0})}}return n}};var gt=class{constructor(e){if(this.map=new Map,e)for(let[r,n]of e)this.add(r,n)}get size(){return Si.sum(ee(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,r){if(r===void 0)return this.map.delete(e);{let n=this.map.get(e);if(n){let i=n.indexOf(r);if(i>=0)return n.length===1?this.map.delete(e):n.splice(i,1),!0}return!1}}get(e){return this.map.get(e)??[]}getStream(e){let r=this.map.get(e);return r?ee(r):an}has(e,r){if(r===void 0)return this.map.has(e);{let n=this.map.get(e);return n?n.indexOf(r)>=0:!1}}add(e,r){return this.map.has(e)?this.map.get(e).push(r):this.map.set(e,[r]),this}addAll(e,r){return this.map.has(e)?this.map.get(e).push(...r):this.map.set(e,Array.from(r)),this}forEach(e){this.map.forEach((r,n)=>r.forEach(i=>e(i,n,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return ee(this.map.entries()).flatMap(([e,r])=>r.map(n=>[e,n]))}keys(){return ee(this.map.keys())}values(){return ee(this.map.values()).flat()}entriesGroupedByKey(){return ee(this.map.entries())}},di=class{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(let[r,n]of e)this.set(r,n)}clear(){this.map.clear(),this.inverse.clear()}set(e,r){return this.map.set(e,r),this.inverse.set(r,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){let r=this.map.get(e);return r!==void 0?(this.map.delete(e),this.inverse.delete(r),!0):!1}};var to=class{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async collectExportedSymbols(e,r=B.CancellationToken.None){return this.collectExportedSymbolsForNode(e.parseResult.value,e,void 0,r)}async collectExportedSymbolsForNode(e,r,n=Qs,i=B.CancellationToken.None){let s=[];this.addExportedSymbol(e,s,r);for(let a of n(e))await Oe(i),this.addExportedSymbol(a,s,r);return s}addExportedSymbol(e,r,n){let i=this.nameProvider.getName(e);i&&r.push(this.descriptions.createDescription(e,i,n))}async collectLocalSymbols(e,r=B.CancellationToken.None){let n=e.parseResult.value,i=new gt;for(let s of ir(n))await Oe(r),this.addLocalSymbol(s,e,i);return i}addLocalSymbol(e,r,n){let i=e.$container;if(i){let s=this.nameProvider.getName(e);s&&n.add(i,this.descriptions.createDescription(e,s,r))}}};var Ts=class{constructor(e,r,n){this.elements=e,this.outerScope=r,this.caseInsensitive=n?.caseInsensitive??!1,this.concatOuterScope=n?.concatOuterScope??!0}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.find(i=>i.name.toLowerCase()===r):this.elements.find(i=>i.name===e);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.filter(i=>i.name.toLowerCase()===r):this.elements.filter(i=>i.name===e);return(this.concatOuterScope||n.isEmpty())&&this.outerScope?n.concat(this.outerScope.getElements(e)):n}},zd=class{constructor(e,r,n){this.elements=new Map,this.caseInsensitive=n?.caseInsensitive??!1,this.concatOuterScope=n?.concatOuterScope??!0;for(let i of e){let s=this.caseInsensitive?i.name.toLowerCase():i.name;this.elements.set(s,i)}this.outerScope=r}getElement(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r),i=n?[n]:[];return(this.concatOuterScope||i.length>0)&&this.outerScope?ee(i).concat(this.outerScope.getElements(e)):ee(i)}getAllElements(){let e=ee(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},ro=class{constructor(e,r,n){this.elements=new gt,this.caseInsensitive=n?.caseInsensitive??!1,this.concatOuterScope=n?.concatOuterScope??!0;for(let i of e){let s=this.caseInsensitive?i.name.toLowerCase():i.name;this.elements.add(s,i)}this.outerScope=r}getElement(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r)[0];if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){let r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r);return(this.concatOuterScope||n.length===0)&&this.outerScope?ee(n).concat(this.outerScope.getElements(e)):ee(n)}getAllElements(){let e=ee(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},ZA={getElement(){},getElements(){return an},getAllElements(){return an}};var Rs=class{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},no=class extends Rs{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,r){this.throwIfDisposed(),this.cache.set(e,r)}get(e,r){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(r){let n=r();return this.cache.set(e,n),n}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},pi=class extends Rs{constructor(e){super(),this.cache=new Map,this.converter=e??(r=>r)}has(e,r){return this.throwIfDisposed(),this.cacheForContext(e).has(r)}set(e,r,n){this.throwIfDisposed(),this.cacheForContext(e).set(r,n)}get(e,r,n){this.throwIfDisposed();let i=this.cacheForContext(e);if(i.has(r))return i.get(r);if(n){let s=n();return i.set(r,s),s}else return}delete(e,r){return this.throwIfDisposed(),this.cacheForContext(e).delete(r)}clear(e){if(this.throwIfDisposed(),e){let r=this.converter(e);this.cache.delete(r)}else this.cache.clear()}cacheForContext(e){let r=this.converter(e),n=this.cache.get(r);return n||(n=new Map,this.cache.set(r,n)),n}},gl=class extends pi{constructor(e,r){super(n=>n.toString()),r?(this.toDispose.push(e.workspace.DocumentBuilder.onDocumentPhase(r,n=>{this.clear(n.uri.toString())})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((n,i)=>{for(let s of i)this.clear(s)}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((n,i)=>{let s=n.concat(i);for(let a of s)this.clear(a)}))}},xs=class extends no{constructor(e,r){super(),r?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(r,()=>{this.clear()})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((n,i)=>{i.length>0&&this.clear()}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}};var io=class{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new xs(e.shared)}getScope(e){let r=[],n=this.reflection.getReferenceType(e),i=ht(e.container).localSymbols;if(i){let a=e.container;do i.has(a)&&r.push(i.getStream(a).filter(o=>this.reflection.isSubtype(o.type,n))),a=a.$container;while(a)}let s=this.getGlobalScope(n,e);for(let a=r.length-1;a>=0;a--)s=this.createScope(r[a],s);return s}createScope(e,r,n){return new Ts(ee(e),r,n)}createScopeForNodes(e,r,n){let i=ee(e).map(s=>{let a=this.nameProvider.getName(s);if(a)return this.descriptions.createDescription(s,a)}).nonNullable();return new Ts(i,r,n)}getGlobalScope(e,r){return this.globalScopeCache.get(e,()=>new ro(this.indexManager.allElements(e)))}};function jd(t){return typeof t.$comment=="string"}function ay(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}var so=class{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,r){let n=r??{},i=r?.replacer,s=(o,c)=>this.replacer(o,c,n),a=i?(o,c)=>i(o,c,s):s;try{return this.currentDocument=ht(e),JSON.stringify(e,a,r?.space)}finally{this.currentDocument=void 0}}deserialize(e,r){let n=r??{},i=JSON.parse(e);return this.linkNode(i,i,n),i}replacer(e,r,{refText:n,sourceText:i,textRegions:s,comments:a,uriConverter:o}){if(!this.ignoreProperties.has(e))if(Qe(r)){let c=r.ref,l=n?r.$refText:void 0;if(c){let u=ht(c),p="";this.currentDocument&&this.currentDocument!==u&&(o?p=o(u.uri,c):p=u.uri.toString());let h=this.astNodeLocator.getAstNodePath(c);return{$ref:`${p}#${h}`,$refText:l}}else return{$error:r.error?.message??"Could not resolve reference",$refText:l}}else if(qt(r)){let c=n?r.$refText:void 0,l=[];for(let u of r.items){let p=u.ref,h=ht(u.ref),g="";this.currentDocument&&this.currentDocument!==h&&(o?g=o(h.uri,p):g=h.uri.toString());let N=this.astNodeLocator.getAstNodePath(p);l.push(`${g}#${N}`)}return{$refs:l,$refText:c}}else if(_e(r)){let c;if(s&&(c=this.addAstNodeRegionWithAssignmentsTo(me({},r)),(!e||r.$document)&&c?.$textRegion&&(c.$textRegion.documentURI=this.currentDocument?.uri.toString())),i&&!e&&(c??(c=me({},r)),c.$sourceText=r.$cstNode?.text),a){c??(c=me({},r));let l=this.commentProvider.getComment(r);l&&(c.$comment=l.replace(/\r/g,""))}return c??r}else return r}addAstNodeRegionWithAssignmentsTo(e){let r=n=>({offset:n.offset,end:n.end,length:n.length,range:n.range});if(e.$cstNode){let n=e.$textRegion=r(e.$cstNode),i=n.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{let a=Zu(e.$cstNode,s).map(r);a.length!==0&&(i[s]=a)}),e}}linkNode(e,r,n,i,s,a){for(let[c,l]of Object.entries(e))if(Array.isArray(l))for(let u=0;u<l.length;u++){let p=l[u];ay(p)?l[u]=this.reviveReference(e,c,r,p,n):_e(p)&&this.linkNode(p,r,n,e,c,u)}else ay(l)?e[c]=this.reviveReference(e,c,r,l,n):_e(l)&&this.linkNode(l,r,n,e,c);let o=e;o.$container=i,o.$containerProperty=s,o.$containerIndex=a}reviveReference(e,r,n,i,s){let a=i.$refText,o=i.$error,c;if(i.$ref){let l=this.getRefNode(n,i.$ref,s.uriConverter);if(_e(l))return a||(a=this.nameProvider.getName(l)),{$refText:a??"",ref:l};o=l}else if(i.$refs){let l=[];for(let u of i.$refs){let p=this.getRefNode(n,u,s.uriConverter);_e(p)&&l.push({ref:p})}if(l.length===0)c={$refText:a??"",items:l},o??(o="Could not resolve multi-reference");else return{$refText:a??"",items:l}}if(o)return c??(c={$refText:a??"",ref:void 0}),c.error={info:{container:e,property:r,reference:c},message:o},c}getRefNode(e,r,n){try{let i=r.indexOf("#");if(i===0){let c=this.astNodeLocator.getAstNode(e,r.substring(1));return c||"Could not resolve path: "+r}if(i<0){let c=n?n(r):Ze.parse(r),l=this.langiumDocuments.getDocument(c);return l?l.parseResult.value:"Could not find document for URI: "+r}let s=n?n(r.substring(0,i)):Ze.parse(r.substring(0,i)),a=this.langiumDocuments.getDocument(s);if(!a)return"Could not find document for URI: "+r;if(i===r.length-1)return a.parseResult.value;let o=this.astNodeLocator.getAstNode(a.parseResult.value,r.substring(i+1));return o||"Could not resolve URI: "+r}catch(i){return String(i)}}};var ao=class{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.fileNameMap=new Map,this.textDocuments=e?.workspace.TextDocuments}register(e){let r=e.LanguageMetaData;for(let n of r.fileExtensions)this.fileExtensionMap.has(n)&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileExtensionMap.set(n,e);if(r.fileNames)for(let n of r.fileNames)this.fileNameMap.has(n)&&console.warn(`The file name ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileNameMap.set(n,e);this.languageIdMap.set(r.languageId,e)}getServices(e){if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");let r=this.textDocuments?.get(e)?.languageId;if(r!==void 0){let a=this.languageIdMap.get(r);if(a)return a}let n=ze.extname(e),i=ze.basename(e),s=this.fileNameMap.get(i)??this.fileExtensionMap.get(n);if(!s)throw r?new Error(`The service registry contains no services for the extension '${n}' for language '${r}'.`):new Error(`The service registry contains no services for the extension '${n}'.`);return s}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}};function hi(t){return{code:t}}var yl;(function(t){t.defaults=["fast","slow","built-in"],t.all=t.defaults})(yl||(yl={}));var oo=class{constructor(e){this.entries=new gt,this.knownCategories=new Set(yl.defaults),this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,r=this,n="fast"){if(n==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");this.knownCategories.add(n);for(let[i,s]of Object.entries(e)){let a=s;if(Array.isArray(a))for(let o of a){let c={check:this.wrapValidationException(o,r),category:n};this.addEntry(i,c)}else if(typeof a=="function"){let o={check:this.wrapValidationException(a,r),category:n};this.addEntry(i,o)}else xr(a)}}wrapValidationException(e,r){return async(n,i,s)=>{await this.handleException(()=>e.call(r,n,i,s),"An error occurred during validation",i,n)}}async handleException(e,r,n,i){try{await e()}catch(s){if(kr(s))throw s;console.error(`${r}:`,s),s instanceof Error&&s.stack&&console.error(s.stack);let a=s instanceof Error?s.message:String(s);n("error",`${r}: ${a}`,{node:i})}}addEntry(e,r){if(e==="AstNode"){this.entries.add("AstNode",r);return}for(let n of this.reflection.getAllSubTypes(e))this.entries.add(n,r)}getChecks(e,r){let n=ee(this.entries.get(e)).concat(this.entries.get("AstNode"));return r&&(n=n.filter(i=>r.includes(i.category))),n.map(i=>i.check)}registerBeforeDocument(e,r=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",r))}registerAfterDocument(e,r=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",r))}wrapPreparationException(e,r,n){return async(i,s,a,o)=>{await this.handleException(()=>e.call(n,i,s,a,o),r,s,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}getAllValidationCategories(e){return this.knownCategories}};var oy=Object.freeze({validateNode:!0,validateChildren:!0}),co=class{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async validateDocument(e,r={},n=B.CancellationToken.None){let i=e.parseResult,s=[];if(await Oe(n),(!r.categories||r.categories.includes("built-in"))&&(this.processLexingErrors(i,s,r),r.stopAfterLexingErrors&&s.some(a=>a.data?.code===ur.LexingError)||(this.processParsingErrors(i,s,r),r.stopAfterParsingErrors&&s.some(a=>a.data?.code===ur.ParsingError))||(this.processLinkingErrors(e,s,r),r.stopAfterLinkingErrors&&s.some(a=>a.data?.code===ur.LinkingError))))return s;try{s.push(...await this.validateAst(i.value,r,n))}catch(a){if(kr(a))throw a;console.error("An error occurred during validation:",a)}return await Oe(n),s}processLexingErrors(e,r,n){let i=[...e.lexerErrors,...e.lexerReport?.diagnostics??[]];for(let s of i){let a=s.severity??"error",o={severity:Tl(a),range:{start:{line:s.line-1,character:s.column-1},end:{line:s.line-1,character:s.column+s.length-1}},message:s.message,data:ly(a),source:this.getSource()};r.push(o)}}processParsingErrors(e,r,n){for(let i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){let a=i.previousToken;if(isNaN(a.startOffset)){let o={line:0,character:0};s={start:o,end:o}}else{let o={line:a.endLine-1,character:a.endColumn};s={start:o,end:o}}}}else s=Di(i.token);if(s){let a={severity:Tl("error"),range:s,message:i.message,data:hi(ur.ParsingError),source:this.getSource()};r.push(a)}}}processLinkingErrors(e,r,n){for(let i of e.references){let s=i.error;if(s){let a={node:s.info.container,range:i.$refNode?.range,property:s.info.property,index:s.info.index,data:{code:ur.LinkingError,containerType:s.info.container.$type,property:s.info.property,refText:s.info.reference.$refText}};r.push(this.toDiagnostic("error",s.message,a))}}}async validateAst(e,r,n=B.CancellationToken.None){let i=[],s=(a,o,c)=>{i.push(this.toDiagnostic(a,o,c))};return await this.validateAstBefore(e,r,s,n),await this.validateAstNodes(e,r,s,n),await this.validateAstAfter(e,r,s,n),i}async validateAstBefore(e,r,n,i=B.CancellationToken.None){let s=this.validationRegistry.checksBefore;for(let a of s)await Oe(i),await a(e,n,r.categories??[],i)}async validateAstNodes(e,r,n,i=B.CancellationToken.None){if(this.profiler?.isActive("validating")){let s=this.profiler.createTask("validating",this.languageId);s.start();try{let a=At(e).iterator();for(let o of a){s.startSubTask(o.$type);let c=this.validateSingleNodeOptions(o,r);if(c.validateNode)try{let l=this.validationRegistry.getChecks(o.$type,r.categories);for(let u of l)await u(o,n,i)}finally{s.stopSubTask(o.$type)}c.validateChildren||a.prune()}}finally{s.stop()}}else{let s=At(e).iterator();for(let a of s){await Oe(i);let o=this.validateSingleNodeOptions(a,r);if(o.validateNode){let c=this.validationRegistry.getChecks(a.$type,r.categories);for(let l of c)await l(a,n,i)}o.validateChildren||s.prune()}}}validateSingleNodeOptions(e,r){return oy}async validateAstAfter(e,r,n,i=B.CancellationToken.None){let s=this.validationRegistry.checksAfter;for(let a of s)await Oe(i),await a(e,n,r.categories??[],i)}toDiagnostic(e,r,n){return{message:r,range:cy(n),severity:Tl(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}};function cy(t){if(t.range)return t.range;let e;return typeof t.property=="string"?e=ma(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=tf(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function Tl(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function ly(t){switch(t){case"error":return hi(ur.LexingError);case"warning":return hi(ur.LexingWarning);case"info":return hi(ur.LexingInfo);case"hint":return hi(ur.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}var ur=(function(t){return t.LexingError="lexing-error",t.LexingWarning="lexing-warning",t.LexingInfo="lexing-info",t.LexingHint="lexing-hint",t.ParsingError="parsing-error",t.LinkingError="linking-error",t})(ur||{});var lo=class{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,r,n){let i=n??ht(e);r??(r=this.nameProvider.getName(e));let s=this.astNodeLocator.getAstNodePath(e);if(!r)throw new Error(`Node at path ${s} has no name.`);let a,o=()=>a??(a=Kn(this.nameProvider.getNameNode(e)??e.$cstNode));return{node:e,name:r,get nameSegment(){return o()},selectionSegment:Kn(e.$cstNode),type:e.$type,documentUri:i.uri,path:s}}},uo=class{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,r=B.CancellationToken.None){let n=[],i=e.parseResult.value;for(let s of At(i))await Oe(r),on(s).forEach(a=>{a.reference.error||n.push(...this.createInfoDescriptions(a))});return n}createInfoDescriptions(e){let r=e.reference;if(r.error||!r.$refNode)return[];let n=[];Qe(r)&&r.$nodeDescription?n=[r.$nodeDescription]:qt(r)&&(n=r.items.map(c=>c.$nodeDescription).filter(c=>c!==void 0));let i=ht(e.container).uri,s=this.nodeLocator.getAstNodePath(e.container),a=[],o=Kn(r.$refNode);for(let c of n)a.push({sourceUri:i,sourcePath:s,targetUri:c.documentUri,targetPath:c.path,segment:o,local:ze.equals(c.documentUri,i)});return a}};var fo=class{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let r=this.getAstNodePath(e.$container),n=this.getPathSegment(e);return r+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:e,$containerIndex:r}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return r!==void 0?e+this.indexSeparator+r:e}getAstNode(e,r){return r.split(this.segmentSeparator).reduce((i,s)=>{if(!i||s.length===0)return i;let a=s.indexOf(this.indexSeparator);if(a>0){let o=s.substring(0,a),c=parseInt(s.substring(a+1));return i[o]?.[c]}return i[s]},e)}};var ke={};ae(ke,du(ui(),1));var po=class{constructor(e){this._ready=new Ct,this.onConfigurationSectionUpdateEmitter=new ke.Emitter,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){this.workspaceConfig=e.capabilities.workspace?.configuration??!1}async initialized(e){if(this.workspaceConfig){if(e.register){let r=this.serviceRegistry.all;e.register({section:r.map(n=>this.toSectionName(n.LanguageMetaData.languageId))})}if(e.fetchConfiguration){let r=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),n=await e.fetchConfiguration(r);r.forEach((i,s)=>{this.updateSectionConfiguration(i.section,n[s])})}}this._ready.resolve()}updateConfiguration(e){typeof e.settings!="object"||e.settings===null||Object.entries(e.settings).forEach(([r,n])=>{this.updateSectionConfiguration(r,n),this.onConfigurationSectionUpdateEmitter.fire({section:r,configuration:n})})}updateSectionConfiguration(e,r){this.settings[e]=r}async getConfiguration(e,r){await this.ready;let n=this.toSectionName(e);if(this.settings[n])return this.settings[n][r]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}};var Ds=du(bx(),1);var In;(function(t){function e(r){return{dispose:async()=>await r()}}t.create=e})(In||(In={}));var Eo=class{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new gt,this.documentPhaseListeners=new gt,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=re.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.fileSystemProvider=e.workspace.FileSystemProvider,this.workspaceManager=()=>e.workspace.WorkspaceManager,this.serviceRegistry=e.ServiceRegistry}async build(e,r={},n=B.CancellationToken.None){for(let i of e){let s=i.uri.toString();if(i.state===re.Validated){if(typeof r.validation=="boolean"&&r.validation)this.resetToState(i,re.IndexedReferences);else if(typeof r.validation=="object"){let a=this.findMissingValidationCategories(i,r);a.length>0&&(this.buildState.set(s,{completed:!1,options:{validation:{categories:a}},result:this.buildState.get(s)?.result}),i.state=re.IndexedReferences)}}else this.buildState.delete(s)}this.currentState=re.Changed,await this.emitUpdate(e.map(i=>i.uri),[]),await this.buildDocuments(e,r,n)}async update(e,r,n=B.CancellationToken.None){this.currentState=re.Changed;let i=[];for(let c of r){let l=this.langiumDocuments.deleteDocuments(c);for(let u of l)i.push(u.uri),this.cleanUpDeleted(u)}let s=(await Promise.all(e.map(c=>this.findChangedUris(c)))).flat();for(let c of s){let l=this.langiumDocuments.getDocument(c);l===void 0&&(l=this.langiumDocumentFactory.fromModel({$type:"INVALID"},c),l.state=re.Changed,this.langiumDocuments.addDocument(l)),this.resetToState(l,re.Changed)}let a=ee(s).concat(i).map(c=>c.toString()).toSet();this.langiumDocuments.all.filter(c=>!a.has(c.uri.toString())&&this.shouldRelink(c,a)).forEach(c=>this.resetToState(c,re.ComputedScopes)),await this.emitUpdate(s,i),await Oe(n);let o=this.sortDocuments(this.langiumDocuments.all.filter(c=>c.state<re.Validated||!this.buildState.get(c.uri.toString())?.completed||this.resultsAreIncomplete(c,this.updateBuildOptions)).toArray());await this.buildDocuments(o,this.updateBuildOptions,n)}resultsAreIncomplete(e,r){return this.findMissingValidationCategories(e,r).length>=1}findMissingValidationCategories(e,r){let n=this.buildState.get(e.uri.toString()),i=this.serviceRegistry.getServices(e.uri).validation.ValidationRegistry.getAllValidationCategories(e),s=n?.result?.validationChecks?new Set(n?.result?.validationChecks):n?.completed?i:new Set,a=r===void 0||r.validation===!0?i:typeof r.validation=="object"?r.validation.categories??i:[];return ee(a).filter(o=>!s.has(o)).toArray()}async findChangedUris(e){if(this.langiumDocuments.getDocument(e)??this.textDocuments?.get(e))return[e];try{let n=await this.fileSystemProvider.stat(e);if(n.isDirectory)return await this.workspaceManager().searchFolder(e);if(this.workspaceManager().shouldIncludeEntry(n))return[e]}catch{}return[]}async emitUpdate(e,r){await Promise.all(this.updateListeners.map(n=>n(e,r)))}sortDocuments(e){let r=0,n=e.length-1;for(;r<n;){for(;r<e.length&&this.hasTextDocument(e[r]);)r++;for(;n>=0&&!this.hasTextDocument(e[n]);)n--;r<n&&([e[r],e[n]]=[e[n],e[r]])}return e}hasTextDocument(e){return!!this.textDocuments?.get(e.uri)}shouldRelink(e,r){return e.references.some(n=>n.error!==void 0)?!0:this.indexManager.isAffected(e,r)}onUpdate(e){return this.updateListeners.push(e),In.create(()=>{let r=this.updateListeners.indexOf(e);r>=0&&this.updateListeners.splice(r,1)})}resetToState(e,r){switch(r){case re.Changed:case re.Parsed:this.indexManager.removeContent(e.uri);case re.IndexedContent:e.localSymbols=void 0;case re.ComputedScopes:this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e);case re.Linked:this.indexManager.removeReferences(e.uri);case re.IndexedReferences:e.diagnostics=void 0,this.buildState.delete(e.uri.toString());case re.Validated:}e.state>r&&(e.state=r)}cleanUpDeleted(e){this.buildState.delete(e.uri.toString()),this.indexManager.remove(e.uri),e.state=re.Changed}async buildDocuments(e,r,n){this.prepareBuild(e,r),await this.runCancelable(e,re.Parsed,n,a=>this.langiumDocumentFactory.update(a,n)),await this.runCancelable(e,re.IndexedContent,n,a=>this.indexManager.updateContent(a,n)),await this.runCancelable(e,re.ComputedScopes,n,async a=>{let o=this.serviceRegistry.getServices(a.uri).references.ScopeComputation;a.localSymbols=await o.collectLocalSymbols(a,n)});let i=e.filter(a=>this.shouldLink(a));await this.runCancelable(i,re.Linked,n,a=>this.serviceRegistry.getServices(a.uri).references.Linker.link(a,n)),await this.runCancelable(i,re.IndexedReferences,n,a=>this.indexManager.updateReferences(a,n));let s=e.filter(a=>this.shouldValidate(a)?!0:(this.markAsCompleted(a),!1));await this.runCancelable(s,re.Validated,n,async a=>{await this.validate(a,n),this.markAsCompleted(a)})}markAsCompleted(e){let r=this.buildState.get(e.uri.toString());r&&(r.completed=!0)}prepareBuild(e,r){for(let n of e){let i=n.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:r,result:s?.result})}}async runCancelable(e,r,n,i){for(let a of e)a.state<r&&(await Oe(n),await i(a),a.state=r,await this.notifyDocumentPhase(a,r,n));let s=e.filter(a=>a.state===r);await this.notifyBuildPhase(s,r,n),this.currentState=r}onBuildPhase(e,r){return this.buildPhaseListeners.add(e,r),In.create(()=>{this.buildPhaseListeners.delete(e,r)})}onDocumentPhase(e,r){return this.documentPhaseListeners.add(e,r),In.create(()=>{this.documentPhaseListeners.delete(e,r)})}waitUntil(e,r,n){let i;return r&&"path"in r?i=r:n=r,n??(n=B.CancellationToken.None),i?this.awaitDocumentState(e,i,n):this.awaitBuilderState(e,n)}awaitDocumentState(e,r,n){let i=this.langiumDocuments.getDocument(r);if(i){if(i.state>=e)return Promise.resolve(r);if(n.isCancellationRequested)return Promise.reject(Jt);if(this.currentState>=e&&e>i.state)return Promise.reject(new Ds.ResponseError(Ds.LSPErrorCodes.RequestFailed,`Document state of ${r.toString()} is ${re[i.state]}, requiring ${re[e]}, but workspace state is already ${re[this.currentState]}. Returning undefined.`))}else return Promise.reject(new Ds.ResponseError(Ds.LSPErrorCodes.ServerCancelled,`No document found for URI: ${r.toString()}`));return new Promise((s,a)=>{let o=this.onDocumentPhase(e,l=>{ze.equals(l.uri,r)&&(o.dispose(),c.dispose(),s(l.uri))}),c=n.onCancellationRequested(()=>{o.dispose(),c.dispose(),a(Jt)})})}awaitBuilderState(e,r){return this.currentState>=e?Promise.resolve():r.isCancellationRequested?Promise.reject(Jt):new Promise((n,i)=>{let s=this.onBuildPhase(e,()=>{s.dispose(),a.dispose(),n()}),a=r.onCancellationRequested(()=>{s.dispose(),a.dispose(),i(Jt)})})}async notifyDocumentPhase(e,r,n){let s=this.documentPhaseListeners.get(r).slice();for(let a of s)try{await Oe(n),await a(e,n)}catch(o){if(!kr(o))throw o}}async notifyBuildPhase(e,r,n){if(e.length===0)return;let s=this.buildPhaseListeners.get(r).slice();for(let a of s)await Oe(n),await a(e,n)}shouldLink(e){return this.getBuildOptions(e).eagerLinking??!0}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,r){let n=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,i=this.getBuildOptions(e),s=typeof i.validation=="object"?me({},i.validation):{};s.categories=this.findMissingValidationCategories(e,i);let a=await n.validateDocument(e,s,r);e.diagnostics?e.diagnostics.push(...a):e.diagnostics=a;let o=this.buildState.get(e.uri.toString());o&&(o.result??(o.result={}),o.result.validationChecks?o.result.validationChecks=ee(o.result.validationChecks).concat(s.categories).distinct().toArray():o.result.validationChecks=[...s.categories])}getBuildOptions(e){return this.buildState.get(e.uri.toString())?.options??{}}};var Ao=class{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new pi,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,r){let n=ht(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(a=>{ze.equals(a.targetUri,n)&&a.targetPath===r&&i.push(a)})}),ee(i)}allElements(e,r){let n=ee(this.symbolIndex.keys());return r&&(n=n.filter(i=>!r||r.has(i))),n.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,r){return r?this.symbolByTypeIndex.get(e,r,()=>(this.symbolIndex.get(e)??[]).filter(s=>this.astReflection.isSubtype(s.type,r))):this.symbolIndex.get(e)??[]}remove(e){this.removeContent(e),this.removeReferences(e)}removeContent(e){let r=e.toString();this.symbolIndex.delete(r),this.symbolByTypeIndex.clear(r)}removeReferences(e){let r=e.toString();this.referenceIndex.delete(r)}async updateContent(e,r=B.CancellationToken.None){let i=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.collectExportedSymbols(e,r),s=e.uri.toString();this.symbolIndex.set(s,i),this.symbolByTypeIndex.clear(s)}async updateReferences(e,r=B.CancellationToken.None){let i=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,r);this.referenceIndex.set(e.uri.toString(),i)}isAffected(e,r){let n=this.referenceIndex.get(e.uri.toString());return n?n.some(i=>!i.local&&r.has(i.targetUri.toString())):!1}};var $o=class{constructor(e){this.initialBuildOptions={},this._ready=new Ct,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){this.folders=e.workspaceFolders??void 0}initialized(e){return this.mutex.write(r=>this.initializeWorkspace(this.folders??[],r))}async initializeWorkspace(e,r=B.CancellationToken.None){let n=await this.performStartup(e);await Oe(r),await this.documentBuilder.build(n,this.initialBuildOptions,r)}async performStartup(e){let r=[],n=a=>{r.push(a),this.langiumDocuments.hasDocument(a.uri)||this.langiumDocuments.addDocument(a)};await this.loadAdditionalDocuments(e,n);let i=[];await Promise.all(e.map(a=>this.getRootFolder(a)).map(async a=>this.traverseFolder(a,i)));let s=ee(i).distinct(a=>a.toString()).filter(a=>!this.langiumDocuments.hasDocument(a));return await this.loadWorkspaceDocuments(s,n),this._ready.resolve(),r}async loadWorkspaceDocuments(e,r){await Promise.all(e.map(async n=>{let i=await this.langiumDocuments.getOrCreateDocument(n);r(i)}))}loadAdditionalDocuments(e,r){return Promise.resolve()}getRootFolder(e){return Ze.parse(e.uri)}async traverseFolder(e,r){try{let n=await this.fileSystemProvider.readDirectory(e);await Promise.all(n.map(async i=>{this.shouldIncludeEntry(i)&&(i.isDirectory?await this.traverseFolder(i.uri,r):i.isFile&&r.push(i.uri))}))}catch(n){console.error("Failure to read directory content of "+e.toString(!0),n)}}async searchFolder(e){let r=[];return await this.traverseFolder(e,r),r}shouldIncludeEntry(e){let r=ze.basename(e.uri);return r.startsWith(".")?!1:e.isDirectory?r!=="node_modules"&&r!=="out":e.isFile?this.serviceRegistry.hasServices(e.uri):!1}};var So=class{buildUnexpectedCharactersMessage(e,r,n,i,s){return Vi.buildUnexpectedCharactersMessage(e,r,n,i,s)}buildUnableToPopLexerModeMessage(e){return Vi.buildUnableToPopLexerModeMessage(e)}},Jl={mode:"full"},Ti=class{constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;let r=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(r);let n=lh(r)?Object.values(r):r,i=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new Ve(n,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,r=Jl){let n=this.chevrotainLexer.tokenize(e);return{tokens:n.tokens,errors:n.errors,hidden:n.groups.hidden??[],report:this.tokenBuilder.flushLexingReport?.(e)}}toTokenTypeDictionary(e){if(lh(e))return e;let r=uh(e)?Object.values(e.modes).flat():e,n={};return r.forEach(i=>n[i.name]=i),n}};function Ql(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}function uh(t){return t&&"modes"in t&&"defaultMode"in t}function lh(t){return!Ql(t)&&!uh(t)}ls();function ph(t,e,r){let n,i;typeof t=="string"?(i=e,n=r):(i=t.range.start,n=e),i||(i=ce.create(0,0));let s=Lx(t),a=mh(n),o=q$({lines:s,position:i,options:a});return V$({index:0,tokens:o,position:i})}function hh(t,e){let r=mh(e),n=Lx(t);if(n.length===0)return!1;let i=n[0],s=n[n.length-1],a=r.start,o=r.end;return!!a?.exec(i)&&!!o?.exec(s)}function Lx(t){let e="";return typeof t=="string"?e=t:e=t.text,e.split(Vu)}var Px=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,U$=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function q$(t){let e=[],r=t.position.line,n=t.position.character;for(let i=0;i<t.lines.length;i++){let s=i===0,a=i===t.lines.length-1,o=t.lines[i],c=0;if(s&&t.options.start){let u=t.options.start?.exec(o);u&&(c=u.index+u[0].length)}else{let u=t.options.line?.exec(o);u&&(c=u.index+u[0].length)}if(a){let u=t.options.end?.exec(o);u&&(o=o.substring(0,u.index))}if(o=o.substring(0,W$(o)),dh(o,c)>=o.length){if(e.length>0){let u=ce.create(r,n);e.push({type:"break",content:"",range:ie.create(u,u)})}}else{Px.lastIndex=c;let u=Px.exec(o);if(u){let p=u[0],h=u[1],g=ce.create(r,n+c),N=ce.create(r,n+c+p.length);e.push({type:"tag",content:h,range:ie.create(g,N)}),c+=p.length,c=dh(o,c)}if(c<o.length){let p=o.substring(c),h=Array.from(p.matchAll(U$));e.push(...z$(h,p,r,n+c))}}r++,n=0}return e.length>0&&e[e.length-1].type==="break"?e.slice(0,-1):e}function z$(t,e,r,n){let i=[];if(t.length===0){let s=ce.create(r,n),a=ce.create(r,n+e.length);i.push({type:"text",content:e,range:ie.create(s,a)})}else{let s=0;for(let o of t){let c=o.index,l=e.substring(s,c);l.length>0&&i.push({type:"text",content:e.substring(s,c),range:ie.create(ce.create(r,s+n),ce.create(r,c+n))});let u=l.length+1,p=o[1];if(i.push({type:"inline-tag",content:p,range:ie.create(ce.create(r,s+u+n),ce.create(r,s+u+p.length+n))}),u+=p.length,o.length===4){u+=o[2].length;let h=o[3];i.push({type:"text",content:h,range:ie.create(ce.create(r,s+u+n),ce.create(r,s+u+h.length+n))})}else i.push({type:"text",content:"",range:ie.create(ce.create(r,s+u+n),ce.create(r,s+u+n))});s=c+o[0].length}let a=e.substring(s);a.length>0&&i.push({type:"text",content:a,range:ie.create(ce.create(r,s+n),ce.create(r,s+n+a.length))})}return i}var j$=/\S/,B$=/\s*$/;function dh(t,e){let r=t.substring(e).match(j$);return r?e+r.index:t.length}function W$(t){let e=t.match(B$);if(e&&typeof e.index=="number")return e.index}function V$(t){let e=ce.create(t.position.line,t.position.character);if(t.tokens.length===0)return new Zl([],ie.create(e,e));let r=[];for(;t.index<t.tokens.length;){let s=K$(t,r[r.length-1]);s&&r.push(s)}let n=r[0]?.range.start??e,i=r[r.length-1]?.range.end??e;return new Zl(r,ie.create(n,i))}function K$(t,e){let r=t.tokens[t.index];if(r.type==="tag")return Mx(t,!1);if(r.type==="text"||r.type==="inline-tag")return Dx(t);H$(r,e),t.index++}function H$(t,e){if(e){let r=new eu("",t.range);"inlines"in e?e.inlines.push(r):e.content.inlines.push(r)}}function Dx(t){let e=t.tokens[t.index],r=e,n=e,i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(Y$(t)),n=e,e=t.tokens[t.index];return new No(i,ie.create(r.range.start,n.range.end))}function Y$(t){return t.tokens[t.index].type==="inline-tag"?Mx(t,!0):Fx(t)}function Mx(t,e){let r=t.tokens[t.index++],n=r.content.substring(1);if(t.tokens[t.index]?.type==="text")if(e){let s=Fx(t);return new ko(n,new No([s],s.range),e,ie.create(r.range.start,s.range.end))}else{let s=Dx(t);return new ko(n,s,e,ie.create(r.range.start,s.range.end))}else{let s=r.range;return new ko(n,new No([],s),e,s)}}function Fx(t){let e=t.tokens[t.index++];return new eu(e.content,e.range)}function mh(t){if(!t)return mh({start:"/**",end:"*/",line:"*"});let{start:e,end:r,line:n}=t;return{start:fh(e,!0),end:fh(r,!1),line:fh(n,!0)}}function fh(t,e){if(typeof t=="string"||typeof t=="object"){let r=typeof t=="string"?mn(t):t.source;return e?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}else return t}var Zl=class{constructor(e,r){this.elements=e,this.range=r}getTag(e){return this.getAllTags().find(r=>r.name===e)}getTags(e){return this.getAllTags().filter(r=>r.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(let r of this.elements)if(e.length===0)e=r.toString();else{let n=r.toString();e+=Ox(e)+n}return e.trim()}toMarkdown(e){let r="";for(let n of this.elements)if(r.length===0)r=n.toMarkdown(e);else{let i=n.toMarkdown(e);r+=Ox(r)+i}return r.trim()}},ko=class{constructor(e,r,n,i){this.name=e,this.content=r,this.inline=n,this.range=i}toString(){let e=`@${this.name}`,r=this.content.toString();return this.content.inlines.length===1?e=`${e} ${r}`:this.content.inlines.length>1&&(e=`${e}
${r}`),this.inline?`{${e}}`:e}toMarkdown(e){return e?.renderTag?.(this)??this.toMarkdownDefault(e)}toMarkdownDefault(e){let r=this.content.toMarkdown(e);if(this.inline){let s=X$(this.name,r,e??{});if(typeof s=="string")return s}let n="";e?.tag==="italic"||e?.tag===void 0?n="*":e?.tag==="bold"?n="**":e?.tag==="bold-italic"&&(n="***");let i=`${n}@${this.name}${n}`;return this.content.inlines.length===1?i=`${i} \u2014 ${r}`:this.content.inlines.length>1&&(i=`${i}
${r}`),this.inline?`{${i}}`:i}};function X$(t,e,r){if(t==="linkplain"||t==="linkcode"||t==="link"){let n=e.indexOf(" "),i=e;if(n>0){let a=dh(e,n);i=e.substring(a),e=e.substring(0,n)}return(t==="linkcode"||t==="link"&&r.link==="code")&&(i=`\`${i}\``),r.renderLink?.(e,i)??J$(e,i)}}function J$(t,e){try{return Ze.parse(t,!0),`[${e}](${t})`}catch{return t}}var No=class{constructor(e,r){this.inlines=e,this.range=r}toString(){let e="";for(let r=0;r<this.inlines.length;r++){let n=this.inlines[r],i=this.inlines[r+1];e+=n.toString(),i&&i.range.start.line>n.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let r="";for(let n=0;n<this.inlines.length;n++){let i=this.inlines[n],s=this.inlines[n+1];r+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(r+=`
`)}return r}},eu=class{constructor(e,r){this.text=e,this.range=r}toString(){return this.text}toMarkdown(){return this.text}};function Ox(t){return t.endsWith(`
`)?`
`:`

`}var Co=class{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){let r=this.commentProvider.getComment(e);if(r&&hh(r))return ph(r).toMarkdown({renderLink:(i,s)=>this.documentationLinkRenderer(e,i,s),renderTag:i=>this.documentationTagRenderer(e,i)})}documentationLinkRenderer(e,r,n){let i=this.findNameInLocalSymbols(e,r)??this.findNameInGlobalScope(e,r);if(i&&i.nameSegment){let s=i.nameSegment.range.start.line+1,a=i.nameSegment.range.start.character+1,o=i.documentUri.with({fragment:`L${s},${a}`});return`[${n}](${o.toString()})`}else return}documentationTagRenderer(e,r){}findNameInLocalSymbols(e,r){let i=ht(e).localSymbols;if(!i)return;let s=e;do{let o=i.getStream(s).find(c=>c.name===r);if(o)return o;s=s.$container}while(s)}findNameInGlobalScope(e,r){return this.indexManager.allElements().find(i=>i.name===r)}};var wo=class{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){return jd(e)?e.$comment:qu(e.$cstNode,this.grammarConfig().multilineCommentRules)?.text}};var Io=class{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,r){return Promise.resolve(this.syncParser.parse(e))}},gh=class{constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){let e=this.createWorker();e.onReady(()=>{if(this.queue.length>0){let r=this.queue.shift();r&&(e.lock(),r.resolve(e))}}),this.workerPool.push(e)}}async parse(e,r){let n=await this.acquireParserWorker(r),i=new Ct,s,a=r.onCancellationRequested(()=>{s=setTimeout(()=>{this.terminateWorker(n)},this.terminationDelay)});return n.parse(e).then(o=>{let c=this.hydrator.hydrate(o);i.resolve(c)}).catch(o=>{i.reject(o)}).finally(()=>{a.dispose(),clearTimeout(s)}),i.promise}terminateWorker(e){e.terminate();let r=this.workerPool.indexOf(e);r>=0&&this.workerPool.splice(r,1)}async acquireParserWorker(e){this.initializeWorkers();for(let n of this.workerPool)if(n.ready)return n.lock(),n;let r=new Ct;return e.onCancellationRequested(()=>{let n=this.queue.indexOf(r);n>=0&&this.queue.splice(n,1),r.reject(Jt)}),this.queue.push(r),r.promise}},yh=class{get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,r,n,i){this.onReadyEmitter=new ke.Emitter,this.deferred=new Ct,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=i,r(s=>{let a=s;this.deferred.resolve(a),this.unlock()}),n(s=>{this.deferred.reject(s),this.unlock()})}terminate(){this.deferred.reject(Jt),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Ct,this.sendMessage(e),this.deferred.promise}};var _o=class{constructor(){this.previousTokenSource=new B.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();let r=hl();return this.previousTokenSource=r,this.enqueue(this.writeQueue,e,r.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,r,n=B.CancellationToken.None){let i=new Ct,s={action:r,deferred:i,cancellationToken:n};return e.push(s),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;let e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(e.map(async({action:r,deferred:n,cancellationToken:i})=>{try{let s=await Promise.resolve().then(()=>r(i));n.resolve(s)}catch(s){kr(s)?n.resolve(void 0):n.reject(s)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}};var bo=class{constructor(e){this.grammarElementIdMap=new di,this.tokenTypeIdMap=new di,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map(r=>tr(me({},r),{message:r.message})),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){let r=new Map,n=new Map;for(let i of At(e))r.set(i,{});if(e.$cstNode)for(let i of Vn(e.$cstNode))n.set(i,{});return{astNodes:r,cstNodes:n}}dehydrateAstNode(e,r){let n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(n.$cstNode=this.dehydrateCstNode(e.$cstNode,r));for(let[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){let a=[];n[i]=a;for(let o of s)_e(o)?a.push(this.dehydrateAstNode(o,r)):Qe(o)?a.push(this.dehydrateReference(o,r)):a.push(o)}else _e(s)?n[i]=this.dehydrateAstNode(s,r):Qe(s)?n[i]=this.dehydrateReference(s,r):s!==void 0&&(n[i]=s);return n}dehydrateReference(e,r){let n={};return n.$refText=e.$refText,e.$refNode&&(n.$refNode=r.cstNodes.get(e.$refNode)),n}dehydrateCstNode(e,r){let n=r.cstNodes.get(e);return Js(e)?n.fullText=e.fullText:n.grammarSource=this.getGrammarElementId(e.grammarSource),n.hidden=e.hidden,n.astNode=r.astNodes.get(e.astNode),nr(e)?n.content=e.content.map(i=>this.dehydrateCstNode(i,r)):sn(e)&&(n.tokenType=e.tokenType.name,n.offset=e.offset,n.length=e.length,n.startLine=e.range.start.line,n.startColumn=e.range.start.character,n.endLine=e.range.end.line,n.endColumn=e.range.end.character),n}hydrate(e){let r=e.value,n=this.createHydrationContext(r);return"$cstNode"in r&&this.hydrateCstNode(r.$cstNode,n),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(r,n)}}createHydrationContext(e){let r=new Map,n=new Map;for(let s of At(e))r.set(s,{});let i;if(e.$cstNode)for(let s of Vn(e.$cstNode)){let a;"fullText"in s?(a=new us(s.fullText),i=a):"content"in s?a=new oi:"tokenType"in s&&(a=this.hydrateCstLeafNode(s)),a&&(n.set(s,a),a.root=i)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,r){let n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode&&(n.$cstNode=r.cstNodes.get(e.$cstNode));for(let[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){let a=[];n[i]=a;for(let o of s)_e(o)?a.push(this.setParent(this.hydrateAstNode(o,r),n)):Qe(o)?a.push(this.hydrateReference(o,n,i,r)):a.push(o)}else _e(s)?n[i]=this.setParent(this.hydrateAstNode(s,r),n):Qe(s)?n[i]=this.hydrateReference(s,n,i,r):s!==void 0&&(n[i]=s);return n}setParent(e,r){return e.$container=r,e}hydrateReference(e,r,n,i){return this.linker.buildReference(r,n,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,r,n=0){let i=r.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=r.astNodes.get(e.astNode),nr(i))for(let s of e.content){let a=this.hydrateCstNode(s,r,n++);i.content.push(a)}return i}hydrateCstLeafNode(e){let r=this.getTokenType(e.tokenType),n=e.offset,i=e.length,s=e.startLine,a=e.startColumn,o=e.endLine,c=e.endColumn,l=e.hidden;return new ai(n,i,{start:{line:s,character:a},end:{line:o,character:c}},r,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(let r of At(this.grammar))oa(r)&&this.grammarElementIdMap.set(r,e++)}};function Th(t){return{documentation:{CommentProvider:e=>new wo(e),DocumentationProvider:e=>new Co(e)},parser:{AsyncParser:e=>new Io(e),GrammarConfig:e=>of(e),LangiumParser:e=>Pd(e),CompletionParser:e=>bd(e),ValueConverter:()=>new li,TokenBuilder:()=>new Qr,Lexer:e=>new Ti(e),ParserErrorMessageProvider:()=>new fs,LexerErrorMessageProvider:()=>new So},workspace:{AstNodeLocator:()=>new fo,AstNodeDescriptionProvider:e=>new lo(e),ReferenceDescriptionProvider:e=>new uo(e)},references:{Linker:e=>new Qa(e),NameProvider:()=>new Za,ScopeProvider:e=>new io(e),ScopeComputation:e=>new to(e),References:e=>new eo(e)},serializer:{Hydrator:e=>new bo(e),JsonSerializer:e=>new so(e)},validation:{DocumentValidator:e=>new co(e),ValidationRegistry:e=>new oo(e)},shared:()=>t.shared}}function Rh(t){return{ServiceRegistry:e=>new ao(e),workspace:{LangiumDocuments:e=>new Ja(e),LangiumDocumentFactory:e=>new Xa(e),DocumentBuilder:e=>new Eo(e),IndexManager:e=>new Ao(e),WorkspaceManager:e=>new $o(e),FileSystemProvider:e=>t.fileSystemProvider(e),WorkspaceLock:()=>new _o,ConfigurationProvider:e=>new po(e)},profilers:{}}}var qx=(function(t){return t.merge=(e,r)=>Po(Po({},e),r),t})(qx||{});function tu(t,e,r,n,i,s,a,o,c){let l=[t,e,r,n,i,s,a,o,c].reduce(Po,{});return Bx(l)}var zx=Symbol("isProxy");function jx(t){if(t&&t[zx])for(let e of Object.values(t))jx(e);return t}function Bx(t,e){let r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,i)=>i===zx?!0:Ux(n,i,t,e||r),getOwnPropertyDescriptor:(n,i)=>(Ux(n,i,t,e||r),Object.getOwnPropertyDescriptor(n,i)),has:(n,i)=>i in t,ownKeys:()=>[...Object.getOwnPropertyNames(t)]});return r}var Gx=Symbol();function Ux(t,e,r,n){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable. Cause: "+t[e]);if(t[e]===Gx)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}else if(e in r){let i=r[e];t[e]=Gx;try{t[e]=typeof i=="function"?i(n):Bx(i,n)}catch(s){throw t[e]=s instanceof Error?s:void 0,s}return t[e]}else return}function Po(t,e){if(e){for(let[r,n]of Object.entries(e))if(n!=null)if(typeof n=="object"){let i=t[r];typeof i=="object"&&i!==null?t[r]=Po(i,n):t[r]=Po({},n)}else t[r]=n}return t}var xh={indentTokenName:"INDENT",dedentTokenName:"DEDENT",whitespaceTokenName:"WS",ignoreIndentationDelimiters:[]},Ms=(function(t){return t.REGULAR="indentation-sensitive",t.IGNORE_INDENTATION="ignore-indentation",t})(Ms||{}),ru=class extends Qr{constructor(e=xh){super(),this.indentationStack=[0],this.whitespaceRegExp=/[ \t]+/y,this.options=me(me({},xh),e),this.indentTokenType=yn({name:this.options.indentTokenName,pattern:this.indentMatcher.bind(this),line_breaks:!1}),this.dedentTokenType=yn({name:this.options.dedentTokenName,pattern:this.dedentMatcher.bind(this),line_breaks:!1})}buildTokens(e,r){let n=super.buildTokens(e,r);if(!Ql(n))throw new Error("Invalid tokens built by default builder");let{indentTokenName:i,dedentTokenName:s,whitespaceTokenName:a,ignoreIndentationDelimiters:o}=this.options,c,l,u,p=[];for(let h of n){for(let[g,N]of o)h.name===g?h.PUSH_MODE=Ms.IGNORE_INDENTATION:h.name===N&&(h.POP_MODE=!0);h.name===s?c=h:h.name===i?l=h:h.name===a?u=h:p.push(h)}if(!c||!l||!u)throw new Error("Some indentation/whitespace tokens not found!");return o.length>0?{modes:{[Ms.REGULAR]:[c,l,...p,u],[Ms.IGNORE_INDENTATION]:[...p,u]},defaultMode:Ms.REGULAR}:[c,l,u,...p]}flushLexingReport(e){let r=super.flushLexingReport(e);return tr(me({},r),{remainingDedents:this.flushRemainingDedents(e)})}isStartOfLine(e,r){return r===0||`\r
`.includes(e[r-1])}matchWhitespace(e,r,n,i){this.whitespaceRegExp.lastIndex=r;let s=this.whitespaceRegExp.exec(e);return{currIndentLevel:s?.[0].length??0,prevIndentLevel:this.indentationStack.at(-1),match:s}}createIndentationTokenInstance(e,r,n,i){let s=this.getLineNumber(r,i);return Hr(e,n,i,i+n.length,s,s,1,n.length)}getLineNumber(e,r){return e.substring(0,r).split(/\r\n|\r|\n/).length}indentMatcher(e,r,n,i){if(!this.isStartOfLine(e,r))return null;let{currIndentLevel:s,prevIndentLevel:a,match:o}=this.matchWhitespace(e,r,n,i);return s<=a?null:(this.indentationStack.push(s),o)}dedentMatcher(e,r,n,i){if(!this.isStartOfLine(e,r))return null;let{currIndentLevel:s,prevIndentLevel:a,match:o}=this.matchWhitespace(e,r,n,i);if(s>=a)return null;let c=this.indentationStack.lastIndexOf(s);if(c===-1)return this.diagnostics.push({severity:"error",message:`Invalid dedent level ${s} at offset: ${r}. Current indentation stack: ${this.indentationStack}`,offset:r,length:o?.[0]?.length??0,line:this.getLineNumber(e,r),column:1}),null;let l=this.indentationStack.length-c-1,u=e.substring(0,r).match(/[\r\n]+$/)?.[0].length??1;for(let p=0;p<l;p++){let h=this.createIndentationTokenInstance(this.dedentTokenType,e,"",r-(u-1));n.push(h),this.indentationStack.pop()}return null}buildTerminalToken(e){let r=super.buildTerminalToken(e),{indentTokenName:n,dedentTokenName:i,whitespaceTokenName:s}=this.options;return r.name===n?this.indentTokenType:r.name===i?this.dedentTokenType:r.name===s?yn({name:s,pattern:this.whitespaceRegExp,group:Ve.SKIPPED}):r}flushRemainingDedents(e){let r=[];for(;this.indentationStack.length>1;)r.push(this.createIndentationTokenInstance(this.dedentTokenType,e,"",e.length)),this.indentationStack.pop();return this.indentationStack=[0],r}},vh=class extends Ti{constructor(e){if(super(e),e.parser.TokenBuilder instanceof ru)this.indentationTokenBuilder=e.parser.TokenBuilder;else throw new Error("IndentationAwareLexer requires an accompanying IndentationAwareTokenBuilder")}tokenize(e,r=Jl){let n=super.tokenize(e),i=n.report;r?.mode==="full"&&n.tokens.push(...i.remainingDedents),i.remainingDedents=[];let{indentTokenType:s,dedentTokenType:a}=this.indentationTokenBuilder,o=s.tokenTypeIdx,c=a.tokenTypeIdx,l=[],u=n.tokens.length-1;for(let p=0;p<u;p++){let h=n.tokens[p],g=n.tokens[p+1];if(h.tokenTypeIdx===o&&g.tokenTypeIdx===c){p++;continue}l.push(h)}return u>=0&&l.push(n.tokens[u]),n.tokens=l,n}};var le={};rn(le,{AstUtils:()=>qo,BiMap:()=>di,Cancellation:()=>B,ContextCache:()=>pi,CstUtils:()=>oc,DONE_RESULT:()=>pt,Deferred:()=>Ct,Disposable:()=>In,DisposableCache:()=>Rs,DocumentCache:()=>gl,EMPTY_STREAM:()=>an,ErrorWithLocation:()=>Hn,GrammarUtils:()=>pc,MultiMap:()=>gt,OperationCancelled:()=>Jt,Reduction:()=>Si,RegExpUtils:()=>uc,SimpleCache:()=>no,StreamImpl:()=>zt,TreeStreamImpl:()=>Tr,URI:()=>Ze,UriTrie:()=>ys,UriUtils:()=>ze,WorkspaceCache:()=>xs,assertCondition:()=>Xh,assertUnreachable:()=>xr,delayNextTick:()=>Ud,interruptAndCheck:()=>Oe,isOperationCancelled:()=>kr,loadGrammarFromJson:()=>br,setInterruptionPeriod:()=>ey,startCancelableOperation:()=>hl,stream:()=>ee});ae(le,ke);var nu=class{stat(e){throw new Error("No file system is available.")}statSync(e){throw new Error("No file system is available.")}async exists(){return!1}existsSync(){return!1}readBinary(){throw new Error("No file system is available.")}readBinarySync(){throw new Error("No file system is available.")}readFile(){throw new Error("No file system is available.")}readFileSync(){throw new Error("No file system is available.")}async readDirectory(){return[]}readDirectorySync(){return[]}},Eh={fileSystemProvider:()=>new nu};var Q$={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Z$={AstReflection:()=>new Li};function eS(){let t=tu(Rh(Eh),Z$),e=tu(Th({shared:t}),Q$);return t.ServiceRegistry.register(e),e}function br(t){let e=eS(),r=e.serializer.JsonSerializer.deserialize(t);return e.shared.workspace.LangiumDocumentFactory.fromModel(r,Ze.parse(`memory:/${r.name??"grammar"}.langium`)),r}ae(Fe,le);var Ah=class{constructor(e){this.activeCategories=new Set,this.allCategories=new Set(["validating","parsing","linking"]),this.activeCategories=e??new Set(this.allCategories),this.records=new gt}isActive(e){return this.activeCategories.has(e)}start(...e){e?e.forEach(r=>this.activeCategories.add(r)):this.activeCategories=new Set(this.allCategories)}stop(...e){e?e.forEach(r=>this.activeCategories.delete(r)):this.activeCategories.clear()}createTask(e,r){if(!this.isActive(e))throw new Error(`Category "${e}" is not active.`);return console.log(`Creating profiling task for '${e}.${r}'.`),new iu(n=>this.records.add(e,this.dumpRecord(e,n)),r)}dumpRecord(e,r){console.info(`Task ${e}.${r.identifier} executed in ${r.duration.toFixed(2)}ms and ended at ${r.date.toISOString()}`);let n=[];for(let a of r.entries.keys()){let o=r.entries.get(a),c=o.reduce((l,u)=>l+u);n.push({name:`${r.identifier}.${a}`,count:o.length,duration:c})}let i=r.duration-n.map(a=>a.duration).reduce((a,o)=>a+o,0);n.push({name:r.identifier,count:1,duration:i}),n.sort((a,o)=>o.duration-a.duration);function s(a){return Math.round(100*a)/100}return console.table(n.map(a=>({Element:a.name,Count:a.count,"Self %":s(100*a.duration/r.duration),"Time (ms)":s(a.duration)}))),r}getRecords(...e){return e.length===0?this.records.values():this.records.entries().filter(r=>e.some(n=>n===r[0])).flatMap(r=>r[1])}},iu=class{constructor(e,r){this.stack=[],this.entries=new gt,this.addRecord=e,this.identifier=r}start(){if(this.startTime!==void 0)throw new Error(`Task "${this.identifier}" is already started.`);this.startTime=performance.now()}stop(){if(this.startTime===void 0)throw new Error(`Task "${this.identifier}" was not started.`);if(this.stack.length!==0)throw new Error(`Task "${this.identifier}" cannot be stopped before sub-task(s): ${this.stack.map(r=>r.id).join(", ")}.`);let e={identifier:this.identifier,date:new Date,duration:performance.now()-this.startTime,entries:this.entries};this.addRecord(e),this.startTime=void 0,this.entries.clear()}startSubTask(e){this.stack.push({id:e,start:performance.now(),content:0})}stopSubTask(e){let r=this.stack.pop();if(!r)throw new Error(`Task "${this.identifier}.${e}" was not started.`);if(r.id!==e)throw new Error(`Sub-Task "${r.id}" is not already stopped.`);let n=performance.now()-r.start;this.stack.at(-1)!==void 0&&(this.stack[this.stack.length-1].content+=n);let i=n-r.content;this.entries.add(e,i)}};var tS=Object.defineProperty,ne=(t,e)=>tS(t,"name",{value:e,configurable:!0}),Ih;(t=>{t.Terminals={ARROW_DIRECTION:/L|R|T|B/,ARROW_GROUP:/\{group\}/,ARROW_INTO:/<|>/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,ARCH_ICON:/\([\w-:]+\)/,ARCH_TITLE:/\[[\w ]+\]/}})(Ih||(Ih={}));var _h;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,REFERENCE:/\w([-\./\w]*[-\w])?/}})(_h||(_h={}));var bh;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(bh||(bh={}));var Ph;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Ph||(Ph={}));var Oh;(t=>{t.Terminals={NUMBER_PIE:/(?:-?[0-9]+\.[0-9]+(?!\.))|(?:-?(0|[1-9][0-9]*)(?!\.))/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Oh||(Oh={}));var Lh;(t=>{t.Terminals={GRATICULE:/circle|polygon/,BOOLEAN:/true|false/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NUMBER:/(?:[0-9]+\.[0-9]+(?!\.))|(?:0|[1-9][0-9]*(?!\.))/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Lh||(Lh={}));var Dh;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,TREEMAP_KEYWORD:/treemap-beta|treemap/,CLASS_DEF:/classDef\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\s+([^;\r\n]*))?(?:;)?/,STYLE_SEPARATOR:/:::/,SEPARATOR:/:/,COMMA:/,/,INDENTATION:/[ \t]{1,}/,WS:/[ \t]+/,ML_COMMENT:/\%\%[^\n]*/,NL:/\r?\n/,ID2:/[a-zA-Z_][a-zA-Z0-9_]*/,NUMBER2:/[0-9_\.\,]+/,STRING2:/"[^"]*"|'[^']*'/}})(Dh||(Dh={}));var vL=me(me(me(me(me(me(me({},Ih.Terminals),_h.Terminals),bh.Terminals),Ph.Terminals),Oh.Terminals),Lh.Terminals),Dh.Terminals),en={$type:"Architecture",accDescr:"accDescr",accTitle:"accTitle",edges:"edges",groups:"groups",junctions:"junctions",services:"services",title:"title"};function rS(t){return dr.isInstance(t,en.$type)}ne(rS,"isArchitecture");var su={$type:"Axis",label:"label",name:"name"},lu={$type:"Branch",name:"name",order:"order"};function nS(t){return dr.isInstance(t,lu.$type)}ne(nS,"isBranch");var Wx={$type:"Checkout",branch:"branch"},au={$type:"CherryPicking",id:"id",parent:"parent",tags:"tags"},$h={$type:"ClassDefStatement",className:"className",styleText:"styleText"},qs={$type:"Commit",id:"id",message:"message",tags:"tags",type:"type"};function iS(t){return dr.isInstance(t,qs.$type)}ne(iS,"isCommit");var ou={$type:"Curve",entries:"entries",label:"label",name:"name"},Fs={$type:"Direction",accDescr:"accDescr",accTitle:"accTitle",dir:"dir",statements:"statements",title:"title"},Pr={$type:"Edge",lhsDir:"lhsDir",lhsGroup:"lhsGroup",lhsId:"lhsId",lhsInto:"lhsInto",rhsDir:"rhsDir",rhsGroup:"rhsGroup",rhsId:"rhsId",rhsInto:"rhsInto",title:"title"},Sh={$type:"Entry",axis:"axis",value:"value"},xi={$type:"GitGraph",accDescr:"accDescr",accTitle:"accTitle",statements:"statements",title:"title"};function sS(t){return dr.isInstance(t,xi.$type)}ne(sS,"isGitGraph");var Oo={$type:"Group",icon:"icon",id:"id",in:"in",title:"title"},Do={$type:"Info",accDescr:"accDescr",accTitle:"accTitle",title:"title"};function aS(t){return dr.isInstance(t,Do.$type)}ne(aS,"isInfo");var Lo={$type:"Item",classSelector:"classSelector",name:"name"},kh={$type:"Junction",id:"id",in:"in"},cu={$type:"Leaf",classSelector:"classSelector",name:"name",value:"value"},zs={$type:"Merge",branch:"branch",id:"id",tags:"tags",type:"type"};function oS(t){return dr.isInstance(t,zs.$type)}ne(oS,"isMerge");var Nh={$type:"Option",name:"name",value:"value"},js={$type:"Packet",accDescr:"accDescr",accTitle:"accTitle",blocks:"blocks",title:"title"};function cS(t){return dr.isInstance(t,js.$type)}ne(cS,"isPacket");var Bs={$type:"PacketBlock",bits:"bits",end:"end",label:"label",start:"start"};function lS(t){return dr.isInstance(t,Bs.$type)}ne(lS,"isPacketBlock");var vi={$type:"Pie",accDescr:"accDescr",accTitle:"accTitle",sections:"sections",showData:"showData",title:"title"};function uS(t){return dr.isInstance(t,vi.$type)}ne(uS,"isPie");var uu={$type:"PieSection",label:"label",value:"value"};function fS(t){return dr.isInstance(t,uu.$type)}ne(fS,"isPieSection");var Ri={$type:"Radar",accDescr:"accDescr",accTitle:"accTitle",axes:"axes",curves:"curves",options:"options",title:"title"},Ch={$type:"Section",classSelector:"classSelector",name:"name"},Gs={$type:"Service",icon:"icon",iconText:"iconText",id:"id",in:"in",title:"title"},Us={$type:"Statement"},Ws={$type:"Treemap",accDescr:"accDescr",accTitle:"accTitle",title:"title",TreemapRows:"TreemapRows"};function dS(t){return dr.isInstance(t,Ws.$type)}ne(dS,"isTreemap");var wh={$type:"TreemapRow",indent:"indent",item:"item"},Zx=class extends Pn{constructor(){super(...arguments),this.types={Architecture:{name:en.$type,properties:{accDescr:{name:en.accDescr},accTitle:{name:en.accTitle},edges:{name:en.edges,defaultValue:[]},groups:{name:en.groups,defaultValue:[]},junctions:{name:en.junctions,defaultValue:[]},services:{name:en.services,defaultValue:[]},title:{name:en.title}},superTypes:[]},Axis:{name:su.$type,properties:{label:{name:su.label},name:{name:su.name}},superTypes:[]},Branch:{name:lu.$type,properties:{name:{name:lu.name},order:{name:lu.order}},superTypes:[Us.$type]},Checkout:{name:Wx.$type,properties:{branch:{name:Wx.branch}},superTypes:[Us.$type]},CherryPicking:{name:au.$type,properties:{id:{name:au.id},parent:{name:au.parent},tags:{name:au.tags,defaultValue:[]}},superTypes:[Us.$type]},ClassDefStatement:{name:$h.$type,properties:{className:{name:$h.className},styleText:{name:$h.styleText}},superTypes:[]},Commit:{name:qs.$type,properties:{id:{name:qs.id},message:{name:qs.message},tags:{name:qs.tags,defaultValue:[]},type:{name:qs.type}},superTypes:[Us.$type]},Curve:{name:ou.$type,properties:{entries:{name:ou.entries,defaultValue:[]},label:{name:ou.label},name:{name:ou.name}},superTypes:[]},Direction:{name:Fs.$type,properties:{accDescr:{name:Fs.accDescr},accTitle:{name:Fs.accTitle},dir:{name:Fs.dir},statements:{name:Fs.statements,defaultValue:[]},title:{name:Fs.title}},superTypes:[xi.$type]},Edge:{name:Pr.$type,properties:{lhsDir:{name:Pr.lhsDir},lhsGroup:{name:Pr.lhsGroup,defaultValue:!1},lhsId:{name:Pr.lhsId},lhsInto:{name:Pr.lhsInto,defaultValue:!1},rhsDir:{name:Pr.rhsDir},rhsGroup:{name:Pr.rhsGroup,defaultValue:!1},rhsId:{name:Pr.rhsId},rhsInto:{name:Pr.rhsInto,defaultValue:!1},title:{name:Pr.title}},superTypes:[]},Entry:{name:Sh.$type,properties:{axis:{name:Sh.axis,referenceType:su.$type},value:{name:Sh.value}},superTypes:[]},GitGraph:{name:xi.$type,properties:{accDescr:{name:xi.accDescr},accTitle:{name:xi.accTitle},statements:{name:xi.statements,defaultValue:[]},title:{name:xi.title}},superTypes:[]},Group:{name:Oo.$type,properties:{icon:{name:Oo.icon},id:{name:Oo.id},in:{name:Oo.in},title:{name:Oo.title}},superTypes:[]},Info:{name:Do.$type,properties:{accDescr:{name:Do.accDescr},accTitle:{name:Do.accTitle},title:{name:Do.title}},superTypes:[]},Item:{name:Lo.$type,properties:{classSelector:{name:Lo.classSelector},name:{name:Lo.name}},superTypes:[]},Junction:{name:kh.$type,properties:{id:{name:kh.id},in:{name:kh.in}},superTypes:[]},Leaf:{name:cu.$type,properties:{classSelector:{name:cu.classSelector},name:{name:cu.name},value:{name:cu.value}},superTypes:[Lo.$type]},Merge:{name:zs.$type,properties:{branch:{name:zs.branch},id:{name:zs.id},tags:{name:zs.tags,defaultValue:[]},type:{name:zs.type}},superTypes:[Us.$type]},Option:{name:Nh.$type,properties:{name:{name:Nh.name},value:{name:Nh.value,defaultValue:!1}},superTypes:[]},Packet:{name:js.$type,properties:{accDescr:{name:js.accDescr},accTitle:{name:js.accTitle},blocks:{name:js.blocks,defaultValue:[]},title:{name:js.title}},superTypes:[]},PacketBlock:{name:Bs.$type,properties:{bits:{name:Bs.bits},end:{name:Bs.end},label:{name:Bs.label},start:{name:Bs.start}},superTypes:[]},Pie:{name:vi.$type,properties:{accDescr:{name:vi.accDescr},accTitle:{name:vi.accTitle},sections:{name:vi.sections,defaultValue:[]},showData:{name:vi.showData,defaultValue:!1},title:{name:vi.title}},superTypes:[]},PieSection:{name:uu.$type,properties:{label:{name:uu.label},value:{name:uu.value}},superTypes:[]},Radar:{name:Ri.$type,properties:{accDescr:{name:Ri.accDescr},accTitle:{name:Ri.accTitle},axes:{name:Ri.axes,defaultValue:[]},curves:{name:Ri.curves,defaultValue:[]},options:{name:Ri.options,defaultValue:[]},title:{name:Ri.title}},superTypes:[]},Section:{name:Ch.$type,properties:{classSelector:{name:Ch.classSelector},name:{name:Ch.name}},superTypes:[Lo.$type]},Service:{name:Gs.$type,properties:{icon:{name:Gs.icon},iconText:{name:Gs.iconText},id:{name:Gs.id},in:{name:Gs.in},title:{name:Gs.title}},superTypes:[]},Statement:{name:Us.$type,properties:{},superTypes:[]},Treemap:{name:Ws.$type,properties:{accDescr:{name:Ws.accDescr},accTitle:{name:Ws.accTitle},title:{name:Ws.title},TreemapRows:{name:Ws.TreemapRows,defaultValue:[]}},superTypes:[]},TreemapRow:{name:wh.$type,properties:{indent:{name:wh.indent},item:{name:wh.item}},superTypes:[]}}}static{ne(this,"MermaidAstReflection")}},dr=new Zx,Vx,pS=ne(()=>Vx??(Vx=br(`{"$type":"Grammar","isDeclared":true,"name":"ArchitectureGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"ArchitectureGrammarGrammar"),Kx,hS=ne(()=>Kx??(Kx=br(`{"$type":"Grammar","isDeclared":true,"name":"GitGraphGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"GitGraphGrammarGrammar"),Hx,mS=ne(()=>Hx??(Hx=br(`{"$type":"Grammar","isDeclared":true,"name":"InfoGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"InfoGrammarGrammar"),Yx,gS=ne(()=>Yx??(Yx=br(`{"$type":"Grammar","isDeclared":true,"name":"PacketGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PacketGrammarGrammar"),Xx,yS=ne(()=>Xx??(Xx=br(`{"$type":"Grammar","isDeclared":true,"name":"PieGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PieGrammarGrammar"),Jx,TS=ne(()=>Jx??(Jx=br(`{"$type":"Grammar","isDeclared":true,"name":"RadarGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false,"isMulti":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}},"isMulti":false}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"types":[]}`)),"RadarGrammarGrammar"),Qx,RS=ne(()=>Qx??(Qx=br(`{"$type":"Grammar","isDeclared":true,"name":"TreemapGrammar","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@15"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"imports":[],"types":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`)),"TreemapGrammarGrammar"),xS={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},vS={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},ES={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},AS={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},$S={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},SS={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},kS={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},AL={AstReflection:ne(()=>new Zx,"AstReflection")},$L={Grammar:ne(()=>pS(),"Grammar"),LanguageMetaData:ne(()=>xS,"LanguageMetaData"),parser:{}},SL={Grammar:ne(()=>hS(),"Grammar"),LanguageMetaData:ne(()=>vS,"LanguageMetaData"),parser:{}},kL={Grammar:ne(()=>mS(),"Grammar"),LanguageMetaData:ne(()=>ES,"LanguageMetaData"),parser:{}},NL={Grammar:ne(()=>gS(),"Grammar"),LanguageMetaData:ne(()=>AS,"LanguageMetaData"),parser:{}},CL={Grammar:ne(()=>yS(),"Grammar"),LanguageMetaData:ne(()=>$S,"LanguageMetaData"),parser:{}},wL={Grammar:ne(()=>TS(),"Grammar"),LanguageMetaData:ne(()=>SS,"LanguageMetaData"),parser:{}},IL={Grammar:ne(()=>RS(),"Grammar"),LanguageMetaData:ne(()=>kS,"LanguageMetaData"),parser:{}},NS=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,CS=/accTitle[\t ]*:([^\n\r]*)/,wS=/title([\t ][^\n\r]*|)/,IS={ACC_DESCR:NS,ACC_TITLE:CS,TITLE:wS},_S=class extends li{static{ne(this,"AbstractMermaidValueConverter")}runConverter(t,e,r){let n=this.runCommonConverter(t,e,r);return n===void 0&&(n=this.runCustomConverter(t,e,r)),n===void 0?super.runConverter(t,e,r):n}runCommonConverter(t,e,r){let n=IS[t.name];if(n===void 0)return;let i=n.exec(e);if(i!==null){if(i[1]!==void 0)return i[1].trim().replace(/[\t ]{2,}/gm," ");if(i[2]!==void 0)return i[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},bL=class extends _S{static{ne(this,"CommonValueConverter")}runCustomConverter(t,e,r){}},bS=class extends Qr{static{ne(this,"AbstractMermaidTokenBuilder")}constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,e,r){let n=super.buildKeywordTokens(t,e,r);return n.forEach(i=>{this.keywords.has(i.name)&&i.PATTERN!==void 0&&(i.PATTERN=new RegExp(i.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),n}},OL=class extends bS{static{ne(this,"CommonTokenBuilder")}};export{Th as a,Rh as b,tu as c,Eh as d,Fe as e,ne as f,AL as g,$L as h,SL as i,kL as j,NL as k,CL as l,wL as m,IL as n,_S as o,bL as p,bS as q};
